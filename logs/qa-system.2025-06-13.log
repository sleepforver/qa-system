2025-06-13 09:08:46 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 18228 (E:\ai-chat\qa-system\target\classes started by èµ¤ in E:\ai-chat\qa-system)
2025-06-13 09:08:46 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-13 09:08:46 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-13 09:08:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-13 09:08:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-13 09:08:47 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-13 09:08:47 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-13 09:08:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-13 09:08:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-13 09:08:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 JDBC repository interfaces.
2025-06-13 09:08:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-13 09:08:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-13 09:08:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 Redis repository interfaces.
2025-06-13 09:08:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-13 09:08:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ConversationMapper.class]
2025-06-13 09:08:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-13 09:08:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-13 09:08:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'conversationMapper' and 'com.example.qasystem.mapper.ConversationMapper' mapperInterface
2025-06-13 09:08:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-13 09:08:48 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 09:08:48 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-13 09:08:48 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 09:08:48 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-13 09:08:48 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 09:08:48 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1834 ms
2025-06-13 09:08:48 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [D15DE782F03204A6BCAFA464E9657BAA]
2025-06-13 09:08:48 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-06-13 09:08:48 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-06-13 09:08:48 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-13 09:08:48 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ConversationMapper.xml]'
2025-06-13 09:08:48 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-13 09:08:48 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-13 09:08:49 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 09:08:49 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-13 09:08:49 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-13 09:08:49 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 09:08:50 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-13 09:08:50 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-13 09:08:50 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 4.174 seconds (process running for 4.813)
2025-06-13 09:09:43 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 09:09:43 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-13 09:09:43 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-13 09:09:43 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - æ˜¾ç¤ºç™»å½•é¡µé¢
2025-06-13 09:09:44 [http-nio-8080-exec-7] DEBUG c.e.q.controller.UserController - æ˜¾ç¤ºç™»å½•é¡µé¢
2025-06-13 09:09:48 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:09:48 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39d48a67] was not registered for synchronization because synchronization is not active
2025-06-13 09:09:48 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:08:48.651}] will not be managed by Spring
2025-06-13 09:09:48 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-13 09:09:49 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-13 09:09:49 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-13 09:09:49 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39d48a67]
2025-06-13 09:09:49 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - å‘ç”¨æˆ·å±•ç¤ºèŠå¤©ç•Œé¢: ls1
2025-06-13 09:09:49 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - é€šè¿‡ç”¨æˆ·åå¯»æ‰¾ç”¨æˆ·: ls1
2025-06-13 09:09:49 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:09:49 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef4304a] was not registered for synchronization because synchronization is not active
2025-06-13 09:09:49 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:08:48.651}] will not be managed by Spring
2025-06-13 09:09:49 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-13 09:09:49 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-13 09:09:49 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-13 09:09:49 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef4304a]
2025-06-13 09:09:49 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-13 09:09:49 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - é€šè¿‡ç”¨æˆ·åå¯»æ‰¾ç”¨æˆ·: ls1
2025-06-13 09:09:49 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:09:49 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d4ba592] was not registered for synchronization because synchronization is not active
2025-06-13 09:09:49 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:08:48.651}] will not be managed by Spring
2025-06-13 09:09:49 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-13 09:09:49 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-13 09:09:49 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-13 09:09:49 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d4ba592]
2025-06-13 09:10:49 [http-nio-8080-exec-2] INFO  c.e.q.controller.ChatController - æ”¶åˆ°ç”¨æˆ·è¯·æ±‚: ls1, æç¤ºè¯: æˆ‘éœ€è¦çŸ¥é“å¹¿å·å¸‚æ˜å¤©çš„å¤©æ°”çŠ¶å†µ
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - é€šè¿‡ç”¨æˆ·åå¯»æ‰¾ç”¨æˆ·: ls1
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554e5ca1] was not registered for synchronization because synchronization is not active
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:10:49.896}] will not be managed by Spring
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554e5ca1]
2025-06-13 09:10:49 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: æˆ‘éœ€è¦çŸ¥é“å¹¿å·å¸‚æ˜å¤©çš„å¤©æ°”çŠ¶å†µ
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a23b13]
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:10:49.896}] will be managed by Spring
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 25
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a23b13]
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a23b13] from current transaction
2025-06-13 09:10:49 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-13 09:10:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), æˆ‘éœ€è¦çŸ¥é“å¹¿å·å¸‚æ˜å¤©çš„å¤©æ°”çŠ¶å†µ(String), null, 19(Long), 2025-06-13T09:10:49.968938400(LocalDateTime), 24(Long)
2025-06-13 09:10:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-13 09:10:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a23b13]
2025-06-13 09:10:50 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - ä¿å­˜å†å²è®°å½•: æˆ‘éœ€è¦çŸ¥é“å¹¿å·å¸‚æ˜å¤©çš„å¤©æ°”çŠ¶å†µ
2025-06-13 09:10:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a23b13]
2025-06-13 09:10:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a23b13]
2025-06-13 09:10:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a23b13]
2025-06-13 09:11:11 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-13 09:11:11 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ä½ å¯ä»¥
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: é€šè¿‡ä»¥ä¸‹
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æ–¹å¼è·å–
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: å¹¿å·å¸‚æ˜å¤©çš„
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: å‡†ç¡®
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: å¤©æ°”ä¿¡æ¯
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ï¼š

1
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: . 
2025-06-13 09:11:12 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–å¹¿å·å¸‚æ˜å¤©çš„å‡†ç¡®å¤©æ°”ä¿¡æ¯ï¼š

1. 
2025-06-13 09:11:12 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:11:12 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d03a090] was not registered for synchronization because synchronization is not active
2025-06-13 09:11:12 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:10:49.896}] will not be managed by Spring
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–å¹¿å·å¸‚æ˜å¤©çš„å‡†ç¡®å¤©æ°”ä¿¡æ¯ï¼š

1. (String), 19(Long)
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-13 09:11:12 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d03a090]
2025-06-13 09:11:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-13 09:11:24 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - å‘ç”¨æˆ·å±•ç¤ºèŠå¤©ç•Œé¢: ls1
2025-06-13 09:11:24 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - é€šè¿‡ç”¨æˆ·åå¯»æ‰¾ç”¨æˆ·: ls1
2025-06-13 09:11:24 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:11:24 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e6ab25] was not registered for synchronization because synchronization is not active
2025-06-13 09:11:24 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:10:49.896}] will not be managed by Spring
2025-06-13 09:11:24 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-13 09:11:24 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-13 09:11:24 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-13 09:11:24 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e6ab25]
2025-06-13 09:11:24 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-13 09:11:24 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - é€šè¿‡ç”¨æˆ·åå¯»æ‰¾ç”¨æˆ·: ls1
2025-06-13 09:11:24 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:11:24 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a6f7df0] was not registered for synchronization because synchronization is not active
2025-06-13 09:11:24 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:10:49.896}] will not be managed by Spring
2025-06-13 09:11:24 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-13 09:11:24 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-13 09:11:24 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-13 09:11:24 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a6f7df0]
2025-06-13 09:11:25 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:11:25 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab6e329] was not registered for synchronization because synchronization is not active
2025-06-13 09:11:25 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:10:49.896}] will not be managed by Spring
2025-06-13 09:11:25 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-13 09:11:25 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 24(Long)
2025-06-13 09:11:25 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 14
2025-06-13 09:11:25 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab6e329]
2025-06-13 09:13:00 [http-nio-8080-exec-2] INFO  c.e.q.controller.ChatController - æ”¶åˆ°ç”¨æˆ·è¯·æ±‚: ls1, æç¤ºè¯: ç»§ç»­ä¹‹å‰çš„è¯é¢˜
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - é€šè¿‡ç”¨æˆ·åå¯»æ‰¾ç”¨æˆ·: ls1
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ae4d2b] was not registered for synchronization because synchronization is not active
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:13:00.338}] will not be managed by Spring
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ae4d2b]
2025-06-13 09:13:00 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: ç»§ç»­ä¹‹å‰çš„è¯é¢˜
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f98772c]
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:13:00.338}] will be managed by Spring
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 26
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f98772c]
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f98772c] from current transaction
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), ç»§ç»­ä¹‹å‰çš„è¯é¢˜(String), null, 20(Long), 2025-06-13T09:13:00.347539600(LocalDateTime), 24(Long)
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f98772c]
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - ä¿å­˜å†å²è®°å½•: ç»§ç»­ä¹‹å‰çš„è¯é¢˜
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f98772c]
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f98772c]
2025-06-13 09:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f98772c]
2025-06-13 09:13:20 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-13 09:13:20 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: å¥½çš„ï¼
2025-06-13 09:13:20 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æˆ‘ä»¬ä¹‹å‰
2025-06-13 09:13:20 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: èŠåˆ°
2025-06-13 09:13:20 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ä¹¦ç±
2025-06-13 09:13:20 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æ¨èï¼Œ
2025-06-13 09:13:20 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ä½ 
2025-06-13 09:13:20 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æåˆ°
2025-06-13 09:13:20 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ã€Œ
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ç»™æˆ‘
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æ¨èä¸€æœ¬ä¹¦
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ã€ï¼Œä½†
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: å½“æ—¶
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æˆ‘çš„
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: å›å¤è¢«
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æ„å¤–ä¸­æ–­
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: äº†ã€‚
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ç°åœ¨ä¸ºä½ 
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: è¡¥
2025-06-13 09:13:21 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ä¸Šç²¾å¿ƒ
2025-06-13 09:13:22 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æŒ‘é€‰
2025-06-13 09:13:22 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: çš„ä¹¦
2025-06-13 09:13:22 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: å•ï¼Œ
2025-06-13 09:13:22 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æ¶µç›–
2025-06-13 09:13:22 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ä¸åŒé£æ ¼
2025-06-13 09:13:22 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ï¼Œå¸Œæœ›
2025-06-13 09:13:22 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æœ‰ä½ 
2025-06-13 09:13:23 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: å–œæ¬¢çš„ ğŸ˜Š


2025-06-13 09:13:23 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ---

ğŸ“š 
2025-06-13 09:13:23 [boundedElastic-4] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
å¥½çš„ï¼æˆ‘ä»¬ä¹‹å‰èŠåˆ°ä¹¦ç±æ¨èï¼Œä½ æåˆ°ã€Œç»™æˆ‘æ¨èä¸€æœ¬ä¹¦ã€ï¼Œä½†å½“æ—¶æˆ‘çš„å›å¤è¢«æ„å¤–ä¸­æ–­äº†ã€‚ç°åœ¨ä¸ºä½ è¡¥ä¸Šç²¾å¿ƒæŒ‘é€‰çš„ä¹¦å•ï¼Œæ¶µç›–ä¸åŒé£æ ¼ï¼Œå¸Œæœ›æœ‰ä½ å–œæ¬¢çš„ ğŸ˜Š

---

ğŸ“š 
2025-06-13 09:13:23 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:13:23 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444deb0b] was not registered for synchronization because synchronization is not active
2025-06-13 09:13:23 [boundedElastic-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:13:00.338}] will not be managed by Spring
2025-06-13 09:13:23 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-13 09:13:23 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
å¥½çš„ï¼æˆ‘ä»¬ä¹‹å‰èŠåˆ°ä¹¦ç±æ¨èï¼Œä½ æåˆ°ã€Œç»™æˆ‘æ¨èä¸€æœ¬ä¹¦ã€ï¼Œä½†å½“æ—¶æˆ‘çš„å›å¤è¢«æ„å¤–ä¸­æ–­äº†ã€‚ç°åœ¨ä¸ºä½ è¡¥ä¸Šç²¾å¿ƒæŒ‘é€‰çš„ä¹¦å•ï¼Œæ¶µç›–ä¸åŒé£æ ¼ï¼Œå¸Œæœ›æœ‰ä½ å–œæ¬¢çš„ ğŸ˜Š

---

ğŸ“š (String), 20(Long)
2025-06-13 09:13:23 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-13 09:13:23 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444deb0b]
2025-06-13 09:13:23 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-13 09:19:01 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - æ”¶åˆ°ç”¨æˆ·è¯·æ±‚: ls1, æç¤ºè¯: ç»™æˆ‘æ¨èå‡ æœ¬ç§‘å¹»ä¹¦
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - é€šè¿‡ç”¨æˆ·åå¯»æ‰¾ç”¨æˆ·: ls1
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@186aac81] was not registered for synchronization because synchronization is not active
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:19:01.841}] will not be managed by Spring
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@186aac81]
2025-06-13 09:19:01 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: ç»™æˆ‘æ¨èå‡ æœ¬ç§‘å¹»ä¹¦
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ca1943]
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:19:01.841}] will be managed by Spring
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 27
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ca1943]
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ca1943] from current transaction
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), ç»™æˆ‘æ¨èå‡ æœ¬ç§‘å¹»ä¹¦(String), null, 21(Long), 2025-06-13T09:19:01.849756400(LocalDateTime), 24(Long)
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ca1943]
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - ä¿å­˜å†å²è®°å½•: ç»™æˆ‘æ¨èå‡ æœ¬ç§‘å¹»ä¹¦
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ca1943]
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ca1943]
2025-06-13 09:19:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ca1943]
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: å¤ª
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æ£’äº†
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ï¼ç§‘å¹»
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ä¸–ç•Œ
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: å……æ»¡
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æƒ³è±¡åŠ›ä¸
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æ€æƒ³æ·±åº¦
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ï¼Œä»¥ä¸‹
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: æ˜¯æˆ‘ä¸ºä½ 
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ç²¾å¿ƒæŒ‘é€‰
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: çš„ 
2025-06-13 09:19:24 [boundedElastic-6] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
å¤ªæ£’äº†ï¼ç§‘å¹»ä¸–ç•Œå……æ»¡æƒ³è±¡åŠ›ä¸æ€æƒ³æ·±åº¦ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä¸ºä½ ç²¾å¿ƒæŒ‘é€‰çš„ 
2025-06-13 09:19:24 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:19:24 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cbf5961] was not registered for synchronization because synchronization is not active
2025-06-13 09:19:24 [boundedElastic-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:19:01.841}] will not be managed by Spring
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
å¤ªæ£’äº†ï¼ç§‘å¹»ä¸–ç•Œå……æ»¡æƒ³è±¡åŠ›ä¸æ€æƒ³æ·±åº¦ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä¸ºä½ ç²¾å¿ƒæŒ‘é€‰çš„ (String), 21(Long)
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-13 09:19:24 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cbf5961]
2025-06-13 09:19:24 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-13 09:19:43 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - å‘ç”¨æˆ·å±•ç¤ºèŠå¤©ç•Œé¢: ls1
2025-06-13 09:19:43 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - é€šè¿‡ç”¨æˆ·åå¯»æ‰¾ç”¨æˆ·: ls1
2025-06-13 09:19:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:19:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1953b86e] was not registered for synchronization because synchronization is not active
2025-06-13 09:19:43 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:19:01.841}] will not be managed by Spring
2025-06-13 09:19:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-13 09:19:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-13 09:19:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-13 09:19:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1953b86e]
2025-06-13 09:19:43 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-13 09:19:43 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - é€šè¿‡ç”¨æˆ·åå¯»æ‰¾ç”¨æˆ·: ls1
2025-06-13 09:19:43 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:19:43 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41b6bbfc] was not registered for synchronization because synchronization is not active
2025-06-13 09:19:43 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:19:01.841}] will not be managed by Spring
2025-06-13 09:19:43 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-13 09:19:43 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-13 09:19:43 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-13 09:19:43 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41b6bbfc]
2025-06-13 09:19:45 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-13 09:19:45 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5e33ae] was not registered for synchronization because synchronization is not active
2025-06-13 09:19:45 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-13 09:08:48.651, closeCount=0, lastValidateTimeMillis=2025-06-13 09:19:01.841}] will not be managed by Spring
2025-06-13 09:19:45 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-13 09:19:45 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 24(Long)
2025-06-13 09:19:45 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 16
2025-06-13 09:19:45 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5e33ae]
2025-06-13 09:33:08 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-13 09:33:08 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-13 09:33:08 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-06-13 09:33:08 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
