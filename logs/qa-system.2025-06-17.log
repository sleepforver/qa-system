2025-06-17 08:26:26 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 70732 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-17 08:26:26 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-17 08:26:26 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-17 08:26:26 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-17 08:26:26 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-17 08:26:30 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-17 08:26:30 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-17 08:26:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:26:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-17 08:26:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 0 JDBC repository interfaces.
2025-06-17 08:26:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:26:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-17 08:26:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-06-17 08:26:31 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-17 08:26:31 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ConversationMapper.class]
2025-06-17 08:26:31 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-17 08:26:31 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-17 08:26:31 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'conversationMapper' and 'com.example.qasystem.mapper.ConversationMapper' mapperInterface
2025-06-17 08:26:31 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-17 08:26:32 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-17 08:26:32 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-17 08:26:32 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-17 08:26:32 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-17 08:26:32 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-17 08:26:32 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5739 ms
2025-06-17 08:26:32 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-06-17 08:26:32 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-06-17 08:26:33 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-17 08:26:33 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ConversationMapper.xml]'
2025-06-17 08:26:33 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-17 08:26:33 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-17 08:26:34 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-17 08:26:34 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-17 08:26:35 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-17 08:26:35 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-17 08:26:35 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-17 08:26:35 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-17 08:26:35 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 10.662 seconds (process running for 9.638)
2025-06-17 08:26:48 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-17 08:26:48 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-17 08:26:48 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-17 08:26:48 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 08:26:53 [http-nio-8080-exec-5] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 08:26:59 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:26:59 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52394b6a] was not registered for synchronization because synchronization is not active
2025-06-17 08:26:59 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:26:59 [http-nio-8080-exec-7] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:26:59 [http-nio-8080-exec-7] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls2(String)
2025-06-17 08:26:59 [http-nio-8080-exec-7] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 08:26:59 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52394b6a]
2025-06-17 08:26:59 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:26:59 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:26:59 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:26:59 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4898118b] was not registered for synchronization because synchronization is not active
2025-06-17 08:26:59 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:26:59 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:26:59 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:26:59 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:26:59 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4898118b]
2025-06-17 08:26:59 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:27:00 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:27:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:27:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45ab52d7] was not registered for synchronization because synchronization is not active
2025-06-17 08:27:00 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:27:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:27:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:27:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:27:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45ab52d7]
2025-06-17 08:27:58 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:27:58 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:27:58 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:27:58 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72638d1a] was not registered for synchronization because synchronization is not active
2025-06-17 08:27:58 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:27:58 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:27:58 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:27:58 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:27:58 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72638d1a]
2025-06-17 08:27:58 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1606ace0] was not registered for synchronization because synchronization is not active
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1606ace0]
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a46001d] was not registered for synchronization because synchronization is not active
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM conversation WHERE user_id = ?
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-17 08:27:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a46001d]
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a942a3f] was not registered for synchronization because synchronization is not active
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 20(String)
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a942a3f]
2025-06-17 08:28:10 [http-nio-8080-exec-4] INFO  c.e.q.controller.ChatController - 收到用户请求: ls2, 提示词: 你是谁
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40599eed] was not registered for synchronization because synchronization is not active
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40599eed]
2025-06-17 08:28:10 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 8, prompt: 你是谁
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd7a785]
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will be managed by Spring
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd7a785]
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd7a785] from current transaction
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 你是谁(String), 20(Long)
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd7a785]
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd7a785] from current transaction
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 8(Long), 你是谁(String), null, 1(Long), 2025-06-17T08:28:10.142868400(LocalDateTime), 20(Long)
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd7a785]
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 你是谁
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd7a785]
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd7a785]
2025-06-17 08:28:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd7a785]
2025-06-17 08:28:23 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 我是一个智能助手，随时准备帮助您解决问题。
2025-06-17 08:28:23 [boundedElastic-2] WARN  c.e.qasystem.service.ChatService - 回应太短: 我是一个智能助手，随时准备帮助您解决问题。
2025-06-17 08:28:23 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 8, response: 我是一个智能助手，随时准备帮助您解决问题。（回答可能不完整，请尝试重新提问）
2025-06-17 08:28:23 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:28:23 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364db4a] was not registered for synchronization because synchronization is not active
2025-06-17 08:28:23 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:28:23 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:28:23 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 我是一个智能助手，随时准备帮助您解决问题。（回答可能不完整，请尝试重新提问）(String), 1(Long)
2025-06-17 08:28:23 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 2
2025-06-17 08:28:23 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364db4a]
2025-06-17 08:28:23 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2391ecd5] was not registered for synchronization because synchronization is not active
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 20(String)
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2391ecd5]
2025-06-17 08:28:50 [http-nio-8080-exec-10] INFO  c.e.q.controller.ChatController - 收到用户请求: ls2, 提示词: 我想知道台风是怎么形成的
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5deb62fb] was not registered for synchronization because synchronization is not active
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5deb62fb]
2025-06-17 08:28:50 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 8, prompt: 我想知道台风是怎么形成的
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d52daaf]
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will be managed by Spring
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d52daaf]
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d52daaf] from current transaction
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 我想知道台风是怎么形(String), 20(Long)
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d52daaf]
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d52daaf] from current transaction
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 8(Long), 我想知道台风是怎么形成的(String), null, 2(Long), 2025-06-17T08:28:50.496062100(LocalDateTime), 20(Long)
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d52daaf]
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 我想知道台风是怎么形成的
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d52daaf]
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d52daaf]
2025-06-17 08:28:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d52daaf]
2025-06-17 08:28:57 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 台风是一种热带气旋，通常在热带海洋上形成。
2025-06-17 08:28:57 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 它的形成需要温暖的海水、稳定的气流、地球自转的影响以及足够的湿度。
2025-06-17 08:28:58 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 当这些条件结合在一起时，空气会上升并旋转，逐渐形成一个低压系统，最终发展成台风。
2025-06-17 08:28:59 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 台风的中心是风眼，周围则是强烈的风和暴雨。
2025-06-17 08:28:59 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 希望这个解释能帮助你理解台风的形成过程。
2025-06-17 08:28:59 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 8, response: 台风是一种热带气旋，通常在热带海洋上形成。它的形成需要温暖的海水、稳定的气流、地球自转的影响以及足够的湿度。当这些条件结合在一起时，空气会上升并旋转，逐渐形成一个低压系统，最终发展成台风。台风的中心是风眼，周围则是强烈的风和暴雨。希望这个解释能帮助你理解台风的形成过程。
2025-06-17 08:28:59 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:28:59 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c93b973] was not registered for synchronization because synchronization is not active
2025-06-17 08:28:59 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:28:59 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:28:59 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 台风是一种热带气旋，通常在热带海洋上形成。它的形成需要温暖的海水、稳定的气流、地球自转的影响以及足够的湿度。当这些条件结合在一起时，空气会上升并旋转，逐渐形成一个低压系统，最终发展成台风。台风的中心是风眼，周围则是强烈的风和暴雨。希望这个解释能帮助你理解台风的形成过程。(String), 2(Long)
2025-06-17 08:28:59 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 2
2025-06-17 08:28:59 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c93b973]
2025-06-17 08:28:59 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd1fecf] was not registered for synchronization because synchronization is not active
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 20(String)
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd1fecf]
2025-06-17 08:29:34 [http-nio-8080-exec-1] INFO  c.e.q.controller.ChatController - 收到用户请求: ls2, 提示词: 如何计算圆的面积
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30f7c47e] was not registered for synchronization because synchronization is not active
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30f7c47e]
2025-06-17 08:29:34 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 8, prompt: 如何计算圆的面积
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29858009]
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will be managed by Spring
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 2
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29858009]
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29858009] from current transaction
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 如何计算圆的面积(String), 20(Long)
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29858009]
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29858009] from current transaction
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 8(Long), 如何计算圆的面积(String), null, 3(Long), 2025-06-17T08:29:34.367037800(LocalDateTime), 20(Long)
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29858009]
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 如何计算圆的面积
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29858009]
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29858009]
2025-06-17 08:29:34 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29858009]
2025-06-17 08:29:50 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 圆的面积可以通过公式计算：面积 = π × 半径²。
2025-06-17 08:29:50 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 其中，π（pi）是一个常数，约等于3.
2025-06-17 08:29:51 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 14159，半径是圆心到圆周的距离。
2025-06-17 08:29:52 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 例如，如果半径是5米，那么面积就是π ×5² =25π ≈78.
2025-06-17 08:29:52 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 54平方米。
2025-06-17 08:29:52 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 希望这个解释对你有帮助！
2025-06-17 08:29:52 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 8, response: 圆的面积可以通过公式计算：面积 = π × 半径²。其中，π（pi）是一个常数，约等于3.14159，半径是圆心到圆周的距离。例如，如果半径是5米，那么面积就是π ×5² =25π ≈78.54平方米。希望这个解释对你有帮助！
2025-06-17 08:29:52 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:29:52 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c764712] was not registered for synchronization because synchronization is not active
2025-06-17 08:29:52 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:26:32.918}] will not be managed by Spring
2025-06-17 08:29:52 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:29:52 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 圆的面积可以通过公式计算：面积 = π × 半径²。其中，π（pi）是一个常数，约等于3.14159，半径是圆心到圆周的距离。例如，如果半径是5米，那么面积就是π ×5² =25π ≈78.54平方米。希望这个解释对你有帮助！(String), 3(Long)
2025-06-17 08:29:52 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 2
2025-06-17 08:29:52 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c764712]
2025-06-17 08:29:52 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14aa04ff] was not registered for synchronization because synchronization is not active
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:31:17.243}] will not be managed by Spring
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14aa04ff]
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba31b0d] was not registered for synchronization because synchronization is not active
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:31:17.243}] will not be managed by Spring
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertConversation - ==>  Preparing: INSERT INTO conversation (user_id, name, start_time) VALUES (?, ?, ?)
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertConversation - ==> Parameters: 8(Long), 新建会话(String), 2025-06-17 08:31:17.246(Timestamp)
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertConversation - <==    Updates: 1
2025-06-17 08:31:17 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba31b0d]
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37464e20] was not registered for synchronization because synchronization is not active
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:31:17.243}] will not be managed by Spring
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37464e20]
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b70489] was not registered for synchronization because synchronization is not active
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.917, closeCount=0, lastValidateTimeMillis=2025-06-17 08:31:17.243}] will not be managed by Spring
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM conversation WHERE user_id = ?
2025-06-17 08:31:17 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:31:17 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce2b98e] was not registered for synchronization because synchronization is not active
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:31:17 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.909, closeCount=0, lastValidateTimeMillis=2025-06-17 08:31:17.269}] will not be managed by Spring
2025-06-17 08:31:17 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:31:17 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 37(Long)
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-17 08:31:17 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b70489]
2025-06-17 08:31:17 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 0
2025-06-17 08:31:17 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce2b98e]
2025-06-17 08:31:18 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:31:18 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:31:18 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:31:18 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@539040ce] was not registered for synchronization because synchronization is not active
2025-06-17 08:31:18 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.909, closeCount=0, lastValidateTimeMillis=2025-06-17 08:31:17.269}] will not be managed by Spring
2025-06-17 08:31:18 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:31:18 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:31:18 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:31:18 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@539040ce]
2025-06-17 08:31:18 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:31:18 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:31:18 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:31:18 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@130a2dfd] was not registered for synchronization because synchronization is not active
2025-06-17 08:31:18 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.909, closeCount=0, lastValidateTimeMillis=2025-06-17 08:31:17.269}] will not be managed by Spring
2025-06-17 08:31:18 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:31:18 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:31:18 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:31:18 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@130a2dfd]
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28953e6f] was not registered for synchronization because synchronization is not active
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.909, closeCount=0, lastValidateTimeMillis=2025-06-17 08:33:12.181}] will not be managed by Spring
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 37(String)
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28953e6f]
2025-06-17 08:33:12 [http-nio-8080-exec-1] INFO  c.e.q.controller.ChatController - 收到用户请求: ls2, 提示词: 你是谁
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4fa8a3] was not registered for synchronization because synchronization is not active
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.909, closeCount=0, lastValidateTimeMillis=2025-06-17 08:33:12.181}] will not be managed by Spring
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4fa8a3]
2025-06-17 08:33:12 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 8, prompt: 你是谁
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203521c8]
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.909, closeCount=0, lastValidateTimeMillis=2025-06-17 08:33:12.181}] will be managed by Spring
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 3
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203521c8]
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203521c8] from current transaction
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 你是谁(String), 37(Long)
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203521c8]
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203521c8] from current transaction
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 8(Long), 你是谁(String), null, 4(Long), 2025-06-17T08:33:12.192539200(LocalDateTime), 37(Long)
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203521c8]
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 你是谁
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203521c8]
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203521c8]
2025-06-17 08:33:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203521c8]
2025-06-17 08:33:25 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 我是一个智能助手，随时准备帮助您解决问题。
2025-06-17 08:33:25 [boundedElastic-4] WARN  c.e.qasystem.service.ChatService - 回应太短: 我是一个智能助手，随时准备帮助您解决问题。
2025-06-17 08:33:25 [boundedElastic-4] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 8, response: 我是一个智能助手，随时准备帮助您解决问题。（回答可能不完整，请尝试重新提问）
2025-06-17 08:33:25 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:33:25 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15d965c1] was not registered for synchronization because synchronization is not active
2025-06-17 08:33:25 [boundedElastic-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:26:32.909, closeCount=0, lastValidateTimeMillis=2025-06-17 08:33:12.181}] will not be managed by Spring
2025-06-17 08:33:25 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:33:25 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 我是一个智能助手，随时准备帮助您解决问题。（回答可能不完整，请尝试重新提问）(String), 4(Long)
2025-06-17 08:33:25 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 2
2025-06-17 08:33:25 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15d965c1]
2025-06-17 08:33:25 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:35:02 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2025-06-17 08:35:02 [Thread-7] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-17 08:35:02 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-06-17 08:35:02 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-17 08:35:02 [Thread-7] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-06-17 08:35:02 [Thread-7] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-06-17 08:35:02 [Thread-7] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-06-17 08:35:02 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 70732 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-17 08:35:02 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-17 08:35:02 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-17 08:35:02 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-17 08:35:02 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-17 08:35:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:35:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-17 08:35:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 JDBC repository interfaces.
2025-06-17 08:35:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:35:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-17 08:35:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 Redis repository interfaces.
2025-06-17 08:35:02 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-17 08:35:02 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ConversationMapper.class]
2025-06-17 08:35:02 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-17 08:35:02 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-17 08:35:02 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'conversationMapper' and 'com.example.qasystem.mapper.ConversationMapper' mapperInterface
2025-06-17 08:35:02 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-17 08:35:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-17 08:35:03 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-17 08:35:03 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-17 08:35:03 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-17 08:35:03 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-17 08:35:03 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 435 ms
2025-06-17 08:35:03 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [998A64355728A3AA3F4E511A28E99981]
2025-06-17 08:35:03 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-06-17 08:35:03 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-2} inited
2025-06-17 08:35:03 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-17 08:35:03 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ConversationMapper.xml]'
2025-06-17 08:35:03 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-17 08:35:03 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatController': Resolution of declared constructors on bean Class [com.example.qasystem.controller.ChatController] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@5e51a587] failed
2025-06-17 08:35:03 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-2} closing ...
2025-06-17 08:35:03 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-2} closed
2025-06-17 08:35:03 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-17 08:35:03 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-17 08:35:03 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatController': Resolution of declared constructors on bean Class [com.example.qasystem.controller.ChatController] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@5e51a587] failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:384)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1334)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1362)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1351)
	at com.example.qasystem.QaSystemApplication.main(QaSystemApplication.java:12)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.NoClassDefFoundError: com/example/qasystem/service/ChatService
	at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3373)
	at java.base/java.lang.Class.getDeclaredConstructors(Class.java:2555)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:379)
	... 25 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.example.qasystem.service.ChatService
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525)
	... 29 common frames omitted
2025-06-17 08:35:04 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 70732 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-17 08:35:04 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-17 08:35:04 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-17 08:35:04 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-17 08:35:04 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-17 08:35:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:35:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-17 08:35:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JDBC repository interfaces.
2025-06-17 08:35:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:35:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-17 08:35:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 Redis repository interfaces.
2025-06-17 08:35:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-17 08:35:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ConversationMapper.class]
2025-06-17 08:35:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-17 08:35:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-17 08:35:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'conversationMapper' and 'com.example.qasystem.mapper.ConversationMapper' mapperInterface
2025-06-17 08:35:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-17 08:35:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-17 08:35:05 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-17 08:35:05 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-17 08:35:05 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-17 08:35:05 [restartedMain] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-17 08:35:05 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 394 ms
2025-06-17 08:35:05 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-06-17 08:35:05 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-3} inited
2025-06-17 08:35:05 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-17 08:35:05 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ConversationMapper.xml]'
2025-06-17 08:35:05 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-17 08:35:05 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-17 08:35:05 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-17 08:35:05 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-17 08:35:05 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-17 08:35:05 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-17 08:35:05 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-17 08:35:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-17 08:35:05 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 0.893 seconds (process running for 519.353)
2025-06-17 08:35:05 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-17 08:35:06 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-17 08:35:06 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-17 08:35:06 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-17 08:35:06 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 08:35:16 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:35:16 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c49d3c4] was not registered for synchronization because synchronization is not active
2025-06-17 08:35:16 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:35:05.298}] will not be managed by Spring
2025-06-17 08:35:16 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:35:16 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls2(String)
2025-06-17 08:35:16 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 08:35:16 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c49d3c4]
2025-06-17 08:35:16 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:35:16 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:35:16 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:35:16 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49d7e2df] was not registered for synchronization because synchronization is not active
2025-06-17 08:35:16 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:35:05.298}] will not be managed by Spring
2025-06-17 08:35:16 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:35:16 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:35:16 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:35:16 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49d7e2df]
2025-06-17 08:35:16 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c99856] was not registered for synchronization because synchronization is not active
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:35:05.298}] will not be managed by Spring
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c99856]
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a31f326] was not registered for synchronization because synchronization is not active
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:35:05.298}] will not be managed by Spring
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM conversation WHERE user_id = ?
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-17 08:35:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a31f326]
2025-06-17 08:35:17 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:35:17 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da132d4] was not registered for synchronization because synchronization is not active
2025-06-17 08:35:17 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:35:05.298}] will not be managed by Spring
2025-06-17 08:35:17 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:35:17 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 37(Long)
2025-06-17 08:35:17 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 1
2025-06-17 08:35:17 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da132d4]
2025-06-17 08:36:44 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:36:44 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:36:44 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:36:44 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c2fc6f] was not registered for synchronization because synchronization is not active
2025-06-17 08:36:44 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:36:44.434}] will not be managed by Spring
2025-06-17 08:36:44 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:36:44 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:36:44 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:36:44 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c2fc6f]
2025-06-17 08:36:44 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:36:44 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:36:44 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:36:44 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1665d563] was not registered for synchronization because synchronization is not active
2025-06-17 08:36:44 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:36:44.434}] will not be managed by Spring
2025-06-17 08:36:44 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:36:44 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:36:44 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:36:44 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1665d563]
2025-06-17 08:37:54 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:37:54 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:37:54 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:37:54 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56a690ae] was not registered for synchronization because synchronization is not active
2025-06-17 08:37:54 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:37:54 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:37:54 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:37:54 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:37:54 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56a690ae]
2025-06-17 08:37:54 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:37:54 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:37:54 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:37:54 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c624f8] was not registered for synchronization because synchronization is not active
2025-06-17 08:37:54 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:37:54 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:37:54 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:37:54 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:37:54 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c624f8]
2025-06-17 08:37:56 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:37:56 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:37:56 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:37:56 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc61b3b] was not registered for synchronization because synchronization is not active
2025-06-17 08:37:56 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:37:56 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:37:56 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:37:56 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:37:56 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc61b3b]
2025-06-17 08:37:56 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:37:56 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:37:56 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:37:56 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e2313f] was not registered for synchronization because synchronization is not active
2025-06-17 08:37:56 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:37:56 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:37:56 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:37:56 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:37:56 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e2313f]
2025-06-17 08:38:03 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:38:03 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:38:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:38:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e09150f] was not registered for synchronization because synchronization is not active
2025-06-17 08:38:03 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:38:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:38:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:38:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:38:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e09150f]
2025-06-17 08:38:03 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:38:03 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:38:03 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:38:03 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2e3684] was not registered for synchronization because synchronization is not active
2025-06-17 08:38:03 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:38:03 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:38:03 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:38:03 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:38:03 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2e3684]
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dc247ec] was not registered for synchronization because synchronization is not active
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 37(String)
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dc247ec]
2025-06-17 08:38:09 [http-nio-8080-exec-10] INFO  c.e.q.controller.ChatController - 收到用户请求: ls2, 提示词: 你好
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4b0457] was not registered for synchronization because synchronization is not active
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4b0457]
2025-06-17 08:38:09 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 8, prompt: 你好
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41092471]
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will be managed by Spring
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 4
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41092471]
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41092471] from current transaction
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 你好(String), 37(Long)
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41092471]
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41092471] from current transaction
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 8(Long), 你好(String), null, 5(Long), 2025-06-17T08:38:09.414685800(LocalDateTime), 37(Long)
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41092471]
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 你好
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41092471]
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41092471]
2025-06-17 08:38:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41092471]
2025-06-17 08:38:19 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 你好！
2025-06-17 08:38:20 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 我是你的智能助手，有什么我可以帮你的吗？
2025-06-17 08:38:20 [boundedElastic-6] WARN  c.e.qasystem.service.ChatService - 回应太短: 你好！我是你的智能助手，有什么我可以帮你的吗？
2025-06-17 08:38:20 [boundedElastic-6] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 8, response: 你好！我是你的智能助手，有什么我可以帮你的吗？（回答可能不完整，请尝试重新提问）
2025-06-17 08:38:20 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:38:20 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@199660a2] was not registered for synchronization because synchronization is not active
2025-06-17 08:38:20 [boundedElastic-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:38:20 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:38:20 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 你好！我是你的智能助手，有什么我可以帮你的吗？（回答可能不完整，请尝试重新提问）(String), 5(Long)
2025-06-17 08:38:20 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 3
2025-06-17 08:38:20 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@199660a2]
2025-06-17 08:38:20 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:38:22 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:38:22 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:38:22 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:38:22 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47259647] was not registered for synchronization because synchronization is not active
2025-06-17 08:38:22 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:38:22 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:38:22 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:38:22 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:38:22 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47259647]
2025-06-17 08:38:22 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd3aae9] was not registered for synchronization because synchronization is not active
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd3aae9]
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec5facc] was not registered for synchronization because synchronization is not active
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM conversation WHERE user_id = ?
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-17 08:38:22 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec5facc]
2025-06-17 08:38:23 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:38:23 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cb01feb] was not registered for synchronization because synchronization is not active
2025-06-17 08:38:23 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:35:05.297, closeCount=0, lastValidateTimeMillis=2025-06-17 08:37:54.794}] will not be managed by Spring
2025-06-17 08:38:23 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:38:23 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 37(Long)
2025-06-17 08:38:23 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 2
2025-06-17 08:38:23 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cb01feb]
2025-06-17 08:39:01 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-17 08:39:01 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-17 08:39:01 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-3} closing ...
2025-06-17 08:39:01 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-3} closed
2025-06-17 08:39:06 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 54488 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-17 08:39:06 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-17 08:39:06 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-17 08:39:06 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-17 08:39:06 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-17 08:39:07 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-17 08:39:07 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-17 08:39:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:39:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-17 08:39:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 JDBC repository interfaces.
2025-06-17 08:39:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:39:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-17 08:39:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 Redis repository interfaces.
2025-06-17 08:39:07 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-17 08:39:07 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ConversationMapper.class]
2025-06-17 08:39:07 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-17 08:39:07 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-17 08:39:07 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'conversationMapper' and 'com.example.qasystem.mapper.ConversationMapper' mapperInterface
2025-06-17 08:39:07 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-17 08:39:07 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-17 08:39:07 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-17 08:39:07 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-17 08:39:07 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-17 08:39:07 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-17 08:39:07 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1489 ms
2025-06-17 08:39:07 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [42FE7B95850F02845C766DFC329AD261]
2025-06-17 08:39:07 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-06-17 08:39:08 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-06-17 08:39:08 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-17 08:39:08 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ConversationMapper.xml]'
2025-06-17 08:39:08 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-17 08:39:08 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-17 08:39:09 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-17 08:39:09 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-17 08:39:09 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-17 08:39:09 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-17 08:39:09 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-17 08:39:09 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-17 08:39:09 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 4.642 seconds (process running for 6.356)
2025-06-17 08:39:31 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-17 08:39:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-17 08:39:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-17 08:39:31 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 08:39:37 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:39:37 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@576a93d5] was not registered for synchronization because synchronization is not active
2025-06-17 08:39:37 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:39:37 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:39:37 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls2(String)
2025-06-17 08:39:37 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 08:39:37 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@576a93d5]
2025-06-17 08:39:37 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:39:37 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:39:37 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:39:37 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b8741b2] was not registered for synchronization because synchronization is not active
2025-06-17 08:39:37 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:39:37 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:39:37 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:39:37 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:39:37 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b8741b2]
2025-06-17 08:39:37 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:39:38 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:39:38 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:39:38 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cfdbedc] was not registered for synchronization because synchronization is not active
2025-06-17 08:39:38 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:39:38 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:39:38 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:39:38 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:39:38 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cfdbedc]
2025-06-17 08:39:42 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:39:42 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:39:42 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:39:42 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4857677d] was not registered for synchronization because synchronization is not active
2025-06-17 08:39:42 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:39:42 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:39:42 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:39:42 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:39:42 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4857677d]
2025-06-17 08:39:42 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:39:42 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:39:42 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:39:42 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@482feb45] was not registered for synchronization because synchronization is not active
2025-06-17 08:39:42 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:39:42 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:39:42 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:39:42 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:39:42 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@482feb45]
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@601903f3] was not registered for synchronization because synchronization is not active
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 37(String)
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@601903f3]
2025-06-17 08:39:48 [http-nio-8080-exec-8] INFO  c.e.q.controller.ChatController - 收到用户请求: ls2, 提示词: 你是谁？
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66422de5] was not registered for synchronization because synchronization is not active
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:39:48 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66422de5]
2025-06-17 08:39:48 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 8, prompt: 你是谁？
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3261ba75]
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will be managed by Spring
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 5
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3261ba75]
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3261ba75] from current transaction
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 你是谁？(String), 37(Long)
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3261ba75]
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3261ba75] from current transaction
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 8(Long), 你是谁？(String), null, 6(Long), 2025-06-17T08:40:03.105581700(LocalDateTime), 37(Long)
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3261ba75]
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 你是谁？
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3261ba75]
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3261ba75]
2025-06-17 08:40:03 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3261ba75]
2025-06-17 08:40:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 我是一个智能助手，随时准备帮助您解决问题。
2025-06-17 08:40:13 [boundedElastic-2] WARN  c.e.qasystem.service.ChatService - 回应太短: 我是一个智能助手，随时准备帮助您解决问题。
2025-06-17 08:40:13 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 8, response: 我是一个智能助手，随时准备帮助您解决问题。（回答可能不完整，请尝试重新提问）
2025-06-17 08:40:13 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:13 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3313a367] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:13 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:13 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:40:13 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 我是一个智能助手，随时准备帮助您解决问题。（回答可能不完整，请尝试重新提问）(String), 6(Long)
2025-06-17 08:40:13 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 3
2025-06-17 08:40:13 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3313a367]
2025-06-17 08:40:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:40:45 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:40:45 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:40:45 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:45 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd7df41] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:45 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:45 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:40:45 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:40:45 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:40:45 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd7df41]
2025-06-17 08:40:45 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f1bfe38] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f1bfe38]
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39bb17e1] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM conversation WHERE user_id = ?
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-17 08:40:45 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39bb17e1]
2025-06-17 08:40:49 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:40:49 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:40:49 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:49 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e69164] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:49 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:49 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:40:49 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:40:49 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:40:49 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e69164]
2025-06-17 08:40:49 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:40:49 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:40:49 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:49 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ae48b] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:49 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:49 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:40:49 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:40:49 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:40:49 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ae48b]
2025-06-17 08:40:50 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:40:50 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:40:50 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:50 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c6dfb79] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:50 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:50 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:40:50 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:40:50 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:40:50 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c6dfb79]
2025-06-17 08:40:50 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:40:50 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:40:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d888c8] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:50 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:40:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:40:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:40:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d888c8]
2025-06-17 08:40:52 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:40:52 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:40:52 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:52 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2342e2ec] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:52 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:52 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:40:52 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:40:52 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:40:52 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2342e2ec]
2025-06-17 08:40:52 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:40:52 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:40:52 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:52 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5904dc9] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:52 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:52 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:40:52 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:40:52 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:40:52 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5904dc9]
2025-06-17 08:40:53 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:40:53 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:40:53 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:53 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c1f92] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:53 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:53 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:40:53 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:40:53 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:40:53 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c1f92]
2025-06-17 08:40:53 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:40:53 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:40:53 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:40:53 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1bb62f] was not registered for synchronization because synchronization is not active
2025-06-17 08:40:53 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:40:53 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:40:53 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:40:53 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:40:53 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1bb62f]
2025-06-17 08:40:58 [http-nio-8080-exec-9] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 08:41:03 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:03 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59bce9b6] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:03 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:41:03 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:03 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls2(String)
2025-06-17 08:41:03 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 08:41:03 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59bce9b6]
2025-06-17 08:41:03 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:41:03 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:41:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7317c395] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:03 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:41:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:41:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:41:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7317c395]
2025-06-17 08:41:03 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:41:03 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:41:03 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:03 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2de1e23c] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:03 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:41:03 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:03 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:41:03 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:41:03 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2de1e23c]
2025-06-17 08:41:28 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:41:28 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:41:28 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:28 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19aad57a] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:28 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:41:28 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:28 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:41:28 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:41:28 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19aad57a]
2025-06-17 08:41:28 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:41:29 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:41:29 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:29 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36b9300] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:29 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:39:08.318}] will not be managed by Spring
2025-06-17 08:41:29 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:29 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:41:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e65e1e6] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:29 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:41:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:41:29 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:41:29 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36b9300]
2025-06-17 08:41:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 37(Long)
2025-06-17 08:41:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 3
2025-06-17 08:41:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e65e1e6]
2025-06-17 08:41:34 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:41:34 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:41:34 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:34 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@419c2df8] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:34 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:41:34 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:34 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:41:34 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:41:34 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@419c2df8]
2025-06-17 08:41:34 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:41:34 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:41:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d328afa] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:34 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:41:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:41:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:41:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d328afa]
2025-06-17 08:41:34 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:41:34 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:41:34 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:34 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26e1b350] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:34 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:41:34 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:34 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:41:34 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:41:34 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26e1b350]
2025-06-17 08:41:34 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:41:34 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:41:34 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:34 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11856b69] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:34 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:41:34 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:34 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:41:34 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:41:34 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11856b69]
2025-06-17 08:41:35 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:41:35 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:41:35 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:35 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@638cfd51] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:35 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:41:35 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:35 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:41:35 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:41:35 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@638cfd51]
2025-06-17 08:41:35 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:41:35 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:41:35 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:41:35 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d227993] was not registered for synchronization because synchronization is not active
2025-06-17 08:41:35 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:41:35 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:41:35 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:41:35 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:41:35 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d227993]
2025-06-17 08:42:08 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:42:08 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:42:08 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:42:08 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9533d5c] was not registered for synchronization because synchronization is not active
2025-06-17 08:42:08 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:42:08 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:42:08 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:42:08 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:42:08 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9533d5c]
2025-06-17 08:42:08 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:42:08 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:42:08 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:42:08 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68bbdab1] was not registered for synchronization because synchronization is not active
2025-06-17 08:42:08 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:42:08 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:42:08 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:42:08 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:42:08 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68bbdab1]
2025-06-17 08:42:13 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:42:13 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:42:13 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:42:13 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52edb1c] was not registered for synchronization because synchronization is not active
2025-06-17 08:42:13 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:42:13 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:42:13 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:42:13 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:42:13 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52edb1c]
2025-06-17 08:42:13 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:42:13 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:42:13 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:42:13 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5bc934] was not registered for synchronization because synchronization is not active
2025-06-17 08:42:13 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:42:13 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:42:13 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:42:13 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:42:13 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5bc934]
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56fcf885] was not registered for synchronization because synchronization is not active
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 37(String)
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56fcf885]
2025-06-17 08:42:19 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - 收到用户请求: ls2, 提示词: 你是谁
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c74f0d4] was not registered for synchronization because synchronization is not active
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:42:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c74f0d4]
2025-06-17 08:42:19 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 8, prompt: 你是谁
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab1fa]
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will be managed by Spring
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 6
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab1fa]
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab1fa] from current transaction
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 你是谁(String), 37(Long)
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab1fa]
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab1fa] from current transaction
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 8(Long), 你是谁(String), null, 7(Long), 2025-06-17T08:42:23.967914700(LocalDateTime), 37(Long)
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab1fa]
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 你是谁
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab1fa]
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab1fa]
2025-06-17 08:42:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab1fa]
2025-06-17 08:42:39 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 我是一个智能助手，随时准备帮助您解决问题。
2025-06-17 08:42:39 [boundedElastic-4] WARN  c.e.qasystem.service.ChatService - 回应太短: 我是一个智能助手，随时准备帮助您解决问题。
2025-06-17 08:42:39 [boundedElastic-4] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 8, response: 我是一个智能助手，随时准备帮助您解决问题。（回答可能不完整，请尝试重新提问）
2025-06-17 08:42:39 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:42:39 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a15f92] was not registered for synchronization because synchronization is not active
2025-06-17 08:42:39 [boundedElastic-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:42:39 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:42:39 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 我是一个智能助手，随时准备帮助您解决问题。（回答可能不完整，请尝试重新提问）(String), 7(Long)
2025-06-17 08:42:39 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 3
2025-06-17 08:42:39 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a15f92]
2025-06-17 08:42:39 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:43:02 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls2
2025-06-17 08:43:02 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:43:02 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:02 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55e11f91] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:02 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:02 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:43:02 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:43:02 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:43:02 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55e11f91]
2025-06-17 08:43:02 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 8
2025-06-17 08:43:02 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:02 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e292234] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:02 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:02 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:43:02 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 37(Long)
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls2
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6805cb] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.318, closeCount=0, lastValidateTimeMillis=2025-06-17 08:43:02.615}] will not be managed by Spring
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls2(String)
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6805cb]
2025-06-17 08:43:02 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 4
2025-06-17 08:43:02 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e292234]
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44939ab6] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM conversation WHERE user_id = ?
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 8(Long)
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-17 08:43:02 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44939ab6]
2025-06-17 08:43:05 [http-nio-8080-exec-6] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 08:43:10 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:10 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6813dfa9] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:10 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:10 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:43:10 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-17 08:43:10 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 08:43:10 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6813dfa9]
2025-06-17 08:43:10 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 08:43:15 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:15 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6854ffeb] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:15 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:15 [http-nio-8080-exec-7] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:43:15 [http-nio-8080-exec-7] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-17 08:43:15 [http-nio-8080-exec-7] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 08:43:15 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6854ffeb]
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd8ebf8] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd8ebf8]
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d1f01fc] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - <==      Total: 76
2025-06-17 08:43:15 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d1f01fc]
2025-06-17 08:43:15 [http-nio-8080-exec-9] INFO  c.e.qasystem.service.ChatService - Retrieved 76 chat history entries for userId: 6
2025-06-17 08:43:15 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:43:15 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:15 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c9028] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:15 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:15 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:43:15 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:43:15 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:43:15 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c9028]
2025-06-17 08:43:23 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:23 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@153c0164] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:23 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:23 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:43:23 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 12(Long)
2025-06-17 08:43:23 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 0
2025-06-17 08:43:23 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@153c0164]
2025-06-17 08:43:23 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:23 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654e9612] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:23 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:23 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:43:23 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 13(Long)
2025-06-17 08:43:23 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 3
2025-06-17 08:43:23 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654e9612]
2025-06-17 08:43:24 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:24 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b6d35f7] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:24 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:24 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:43:24 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 15(Long)
2025-06-17 08:43:24 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 4
2025-06-17 08:43:24 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b6d35f7]
2025-06-17 08:43:38 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-17 08:43:38 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:43:38 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:38 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67d6287a] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:38 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:38 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:43:38 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:43:38 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:43:38 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67d6287a]
2025-06-17 08:43:38 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-17 08:43:38 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:43:38 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:38 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4030891e] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:38 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:38 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:43:38 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:43:38 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:43:38 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4030891e]
2025-06-17 08:43:41 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:43:41 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587459f4] was not registered for synchronization because synchronization is not active
2025-06-17 08:43:41 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:43:41 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:43:41 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 14(Long)
2025-06-17 08:43:41 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 9
2025-06-17 08:43:41 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587459f4]
2025-06-17 08:44:31 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-17 08:44:31 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:44:31 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:31 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f5d0f77] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:31 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:31 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:44:31 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:44:31 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:44:31 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f5d0f77]
2025-06-17 08:44:31 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-17 08:44:31 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:44:31 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:31 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e2e0cd] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:31 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:31 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:44:31 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:44:31 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:44:31 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e2e0cd]
2025-06-17 08:44:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3245d1b0] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:34 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:44:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 16(Long)
2025-06-17 08:44:35 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 12
2025-06-17 08:44:35 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3245d1b0]
2025-06-17 08:44:35 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:35 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e24cef3] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:35 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:35 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:44:35 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 17(Long)
2025-06-17 08:44:35 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 0
2025-06-17 08:44:35 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e24cef3]
2025-06-17 08:44:35 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:35 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2dd628] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:35 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:35 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:44:35 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 18(Long)
2025-06-17 08:44:35 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 0
2025-06-17 08:44:35 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2dd628]
2025-06-17 08:44:36 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:36 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78187c57] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:36 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:36 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:44:36 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 19(Long)
2025-06-17 08:44:36 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 2
2025-06-17 08:44:36 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78187c57]
2025-06-17 08:44:36 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:36 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@784b9bb9] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:36 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:36 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:44:36 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 20(Long)
2025-06-17 08:44:36 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 11
2025-06-17 08:44:36 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@784b9bb9]
2025-06-17 08:44:36 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:36 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eca8d81] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:36 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:36 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:44:36 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 21(Long)
2025-06-17 08:44:36 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 4
2025-06-17 08:44:36 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eca8d81]
2025-06-17 08:44:37 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:37 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d818048] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:37 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:37 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:44:37 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 22(Long)
2025-06-17 08:44:37 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 1
2025-06-17 08:44:37 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d818048]
2025-06-17 08:44:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25a2d784] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:38 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:44:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 23(Long)
2025-06-17 08:44:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 2
2025-06-17 08:44:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25a2d784]
2025-06-17 08:44:38 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:44:38 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12990784] was not registered for synchronization because synchronization is not active
2025-06-17 08:44:38 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:41:29.034}] will not be managed by Spring
2025-06-17 08:44:38 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:44:38 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 24(Long)
2025-06-17 08:44:38 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 20
2025-06-17 08:44:38 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12990784]
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45d8f2ac] was not registered for synchronization because synchronization is not active
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:45:41.615}] will not be managed by Spring
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 14(String)
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45d8f2ac]
2025-06-17 08:45:41 [http-nio-8080-exec-8] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 如何更好的读书？
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c79d39d] was not registered for synchronization because synchronization is not active
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:45:41.615}] will not be managed by Spring
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:45:41 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c79d39d]
2025-06-17 08:45:41 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 如何更好的读书？
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26dc9799]
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:45:41.615}] will be managed by Spring
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 76
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26dc9799]
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26dc9799] from current transaction
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 如何更好的读书？(String), 14(Long)
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26dc9799]
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26dc9799] from current transaction
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 如何更好的读书？(String), null, 70(Long), 2025-06-17T08:45:43.947142100(LocalDateTime), 14(Long)
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26dc9799]
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 如何更好的读书？
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26dc9799]
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26dc9799]
2025-06-17 08:45:43 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26dc9799]
2025-06-17 08:46:00 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 更好地读书可以从以下几个方面入手：

1.
2025-06-17 08:46:01 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 明确阅读目的：知道自己为什么读书，是为了学习知识、提升技能，还是为了娱乐放松。
2025-06-17 08:46:01 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 明确目标可以帮助你更有针对性地选择书籍。

2.
2025-06-17 08:46:02 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 选择适合自己的书籍：根据自己的兴趣和需求，选择适合的书籍。
2025-06-17 08:46:03 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 不要盲目跟风，找到真正对你有帮助的书。

3.
2025-06-17 08:46:04 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 营造良好的阅读环境：找一个安静、舒适的地方读书，减少干扰，让自己更容易专注。

4.
2025-06-17 08:46:05 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 采用有效的阅读方法：比如略读和精读结合，先快速浏览，再重点阅读关键部分。
2025-06-17 08:46:05 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 学会做笔记和总结，帮助加深理解和记忆。

5.
2025-06-17 08:46:06 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 定期阅读，培养习惯：每天安排固定时间读书，养成习惯，这样可以持续积累知识。

6.
2025-06-17 08:46:08 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 分享和交流：和朋友或书友分享读书心得，可以加深对书的理解，也能获得新的视角。

通过这些方法，你可以更高效、更有收获地读书。
2025-06-17 08:46:08 [boundedElastic-6] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 6, response: 更好地读书可以从以下几个方面入手：

1.明确阅读目的：知道自己为什么读书，是为了学习知识、提升技能，还是为了娱乐放松。明确目标可以帮助你更有针对性地选择书籍。

2.选择适合自己的书籍：根据自己的兴趣和需求，选择适合的书籍。不要盲目跟风，找到真正对你有帮助的书。

3.营造良好的阅读环境：找一个安静、舒适的地方读书，减少干扰，让自己更容易专注。

4.采用有效的阅读方法：比如略读和精读结合，先快速浏览，再重点阅读关键部分。学会做笔记和总结，帮助加深理解和记忆。

5.定期阅读，培养习惯：每天安排固定时间读书，养成习惯，这样可以持续积累知识。

6.分享和交流：和朋友或书友分享读书心得，可以加深对书的理解，也能获得新的视角。

通过这些方法，你可以更高效、更有收获地读书。
2025-06-17 08:46:08 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:46:08 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db86fe2] was not registered for synchronization because synchronization is not active
2025-06-17 08:46:08 [boundedElastic-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:39:08.314, closeCount=0, lastValidateTimeMillis=2025-06-17 08:45:41.615}] will not be managed by Spring
2025-06-17 08:46:08 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:46:08 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 更好地读书可以从以下几个方面入手：

1.明确阅读目的：知道自己为什么读书，是为了学习知识、提升技能，还是为了娱乐放松。明确目标可以帮助你更有针对性地选择书籍。

2.选择适合自己的书籍：根据自己的兴趣和需求，选择适合的书籍。不要盲目跟风，找到真正对你有帮助的书。

3.营造良好的阅读环境：找一个安静、舒适的地方读书，减少干扰，让自己更容易专注。

4.采用有效的阅读方法：比如略读和精读结合，先快速浏览，再重点阅读关键部分。学会做笔记和总结，帮助加深理解和记忆。

5.定期阅读，培养习惯：每天安排固定时间读书，养成习惯，这样可以持续积累知识。

6.分享和交流：和朋友或书友分享读书心得，可以加深对书的理解，也能获得新的视角。

通过这些方法，你可以更高效、更有收获地读书。(String), 70(Long)
2025-06-17 08:46:08 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-17 08:46:08 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db86fe2]
2025-06-17 08:46:08 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:46:28 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-17 08:46:28 [Thread-7] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-17 08:46:28 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-06-17 08:46:28 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-17 08:46:28 [Thread-7] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-06-17 08:46:28 [Thread-7] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-06-17 08:46:28 [Thread-7] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-06-17 08:46:29 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 54488 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-17 08:46:29 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-17 08:46:29 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-17 08:46:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:46:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-17 08:46:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 JDBC repository interfaces.
2025-06-17 08:46:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:46:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-17 08:46:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 Redis repository interfaces.
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ConversationMapper.class]
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'conversationMapper' and 'com.example.qasystem.mapper.ConversationMapper' mapperInterface
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-17 08:46:29 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-17 08:46:29 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-17 08:46:29 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-17 08:46:29 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-17 08:46:29 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-17 08:46:29 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 442 ms
2025-06-17 08:46:29 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [24E094875D7AFE5FC5E24D4409217345]
2025-06-17 08:46:29 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-06-17 08:46:29 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-2} inited
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ConversationMapper.xml]'
2025-06-17 08:46:29 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-17 08:46:29 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-17 08:46:30 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-17 08:46:30 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-17 08:46:30 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-17 08:46:30 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-17 08:46:30 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-17 08:46:30 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-17 08:46:30 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 1.417 seconds (process running for 446.963)
2025-06-17 08:46:30 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-17 08:46:33 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-17 08:46:33 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-17 08:46:33 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-17 08:46:33 [http-nio-8080-exec-3] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 08:46:38 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:46:38 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@525a4d57] was not registered for synchronization because synchronization is not active
2025-06-17 08:46:38 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:46:38 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:46:38 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-17 08:46:38 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 08:46:38 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@525a4d57]
2025-06-17 08:46:38 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-17 08:46:38 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:46:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:46:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83946] was not registered for synchronization because synchronization is not active
2025-06-17 08:46:38 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:46:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:46:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:46:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:46:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83946]
2025-06-17 08:46:38 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a860cb] was not registered for synchronization because synchronization is not active
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a860cb]
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78528275] was not registered for synchronization because synchronization is not active
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM conversation WHERE user_id = ?
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 14
2025-06-17 08:46:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78528275]
2025-06-17 08:46:40 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:46:40 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fe910ec] was not registered for synchronization because synchronization is not active
2025-06-17 08:46:40 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:46:40 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:46:40 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 14(Long)
2025-06-17 08:46:40 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 10
2025-06-17 08:46:40 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fe910ec]
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da0a357] was not registered for synchronization because synchronization is not active
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 14(String)
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da0a357]
2025-06-17 08:46:47 [http-nio-8080-exec-4] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 如何更好读书
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf77956] was not registered for synchronization because synchronization is not active
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf77956]
2025-06-17 08:46:47 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 如何更好读书
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e292967]
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will be managed by Spring
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 77
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e292967]
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e292967] from current transaction
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 如何更好读书(String), 14(Long)
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e292967]
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e292967] from current transaction
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 如何更好读书(String), null, 71(Long), 2025-06-17T08:46:47.762505900(LocalDateTime), 14(Long)
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e292967]
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 如何更好读书
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e292967]
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e292967]
2025-06-17 08:46:47 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e292967]
2025-06-17 08:47:06 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 读书是一项很好的习惯，但如何更好地读书确实需要一些技巧和方法。
2025-06-17 08:47:07 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 首先，明确自己的读书目的，是为了学习新知识、提升技能，还是为了娱乐放松。
2025-06-17 08:47:08 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 其次，选择适合自己的书籍，不要盲目追风，而是根据自己的兴趣和需求来挑选。
2025-06-17 08:47:09 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 此外，制定一个合理的读书计划，每天安排固定的时间阅读，避免拖延。
2025-06-17 08:47:09 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 做笔记也是一个好习惯，可以帮助你更好地理解和记忆书中的内容。
2025-06-17 08:47:10 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 最后，定期复习和总结，将书中的知识与实际生活相结合，这样可以加深理解和应用。
2025-06-17 08:47:11 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 希望这些建议能帮助你更好地享受读书的乐趣！
2025-06-17 08:47:11 [boundedElastic-5] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 6, response: 读书是一项很好的习惯，但如何更好地读书确实需要一些技巧和方法。首先，明确自己的读书目的，是为了学习新知识、提升技能，还是为了娱乐放松。其次，选择适合自己的书籍，不要盲目追风，而是根据自己的兴趣和需求来挑选。此外，制定一个合理的读书计划，每天安排固定的时间阅读，避免拖延。做笔记也是一个好习惯，可以帮助你更好地理解和记忆书中的内容。最后，定期复习和总结，将书中的知识与实际生活相结合，这样可以加深理解和应用。希望这些建议能帮助你更好地享受读书的乐趣！
2025-06-17 08:47:11 [boundedElastic-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:47:11 [boundedElastic-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213b2472] was not registered for synchronization because synchronization is not active
2025-06-17 08:47:11 [boundedElastic-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:47:11 [boundedElastic-5] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:47:11 [boundedElastic-5] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 读书是一项很好的习惯，但如何更好地读书确实需要一些技巧和方法。首先，明确自己的读书目的，是为了学习新知识、提升技能，还是为了娱乐放松。其次，选择适合自己的书籍，不要盲目追风，而是根据自己的兴趣和需求来挑选。此外，制定一个合理的读书计划，每天安排固定的时间阅读，避免拖延。做笔记也是一个好习惯，可以帮助你更好地理解和记忆书中的内容。最后，定期复习和总结，将书中的知识与实际生活相结合，这样可以加深理解和应用。希望这些建议能帮助你更好地享受读书的乐趣！(String), 71(Long)
2025-06-17 08:47:11 [boundedElastic-5] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-17 08:47:11 [boundedElastic-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213b2472]
2025-06-17 08:47:11 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9379f4] was not registered for synchronization because synchronization is not active
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 14(String)
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9379f4]
2025-06-17 08:47:27 [http-nio-8080-exec-7] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 如何学好会话
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d5b012] was not registered for synchronization because synchronization is not active
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d5b012]
2025-06-17 08:47:27 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 如何学好会话
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df8f575]
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will be managed by Spring
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 78
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df8f575]
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df8f575] from current transaction
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 如何学好会话(String), 14(Long)
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df8f575]
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df8f575] from current transaction
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 如何学好会话(String), null, 72(Long), 2025-06-17T08:47:27.959408700(LocalDateTime), 14(Long)
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df8f575]
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 如何学好会话
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df8f575]
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df8f575]
2025-06-17 08:47:27 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df8f575]
2025-06-17 08:47:42 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 学好会话需要多方面的努力和练习，以下是一些建议：

1.
2025-06-17 08:47:43 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 多听多模仿：通过听播客、看视频、听音乐等方式，熟悉语言的发音、语调和常用表达。
2025-06-17 08:47:44 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 模仿发音和语速，帮助自己更自然地表达。

2.
2025-06-17 08:47:44 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 多说多练习：不要害怕犯错，勇敢开口。
2025-06-17 08:47:45 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 可以和朋友、同学练习对话，或者参加语言学习小组。
2025-06-17 08:47:45 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 如果找不到语伴，也可以尝试自言自语或对着镜子练习。

3.
2025-06-17 08:47:46 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 积累词汇和语法：会话的基础是词汇和语法。
2025-06-17 08:47:46 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 每天学习一些新单词和常用句型，通过造句和对话练习来巩固。

4.
2025-06-17 08:47:47 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 学习常用表达：掌握一些日常会话中的常用表达，比如问候、感谢、道歉等，这些是会话的基础。

5.
2025-06-17 08:47:49 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 创造语言环境：尽量让自己置身于语言环境中，比如看外语电影、听外语歌曲、阅读外语材料等，潜移默化地提升语言能力。

6.
2025-06-17 08:47:49 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 保持自信和积极心态：会话过程中难免会犯错，但不要因此气馁。
2025-06-17 08:47:50 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 保持自信，积极尝试，才能不断进步。

7.
2025-06-17 08:47:51 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 定期复习和总结：定期回顾自己学过的知识，总结会话中的不足，针对性地改进。

通过坚持练习和不断积累，你会逐渐提升自己的会话能力，变得更加自信和流利！
2025-06-17 08:47:51 [boundedElastic-6] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 6, response: 学好会话需要多方面的努力和练习，以下是一些建议：

1.多听多模仿：通过听播客、看视频、听音乐等方式，熟悉语言的发音、语调和常用表达。模仿发音和语速，帮助自己更自然地表达。

2.多说多练习：不要害怕犯错，勇敢开口。可以和朋友、同学练习对话，或者参加语言学习小组。如果找不到语伴，也可以尝试自言自语或对着镜子练习。

3.积累词汇和语法：会话的基础是词汇和语法。每天学习一些新单词和常用句型，通过造句和对话练习来巩固。

4.学习常用表达：掌握一些日常会话中的常用表达，比如问候、感谢、道歉等，这些是会话的基础。

5.创造语言环境：尽量让自己置身于语言环境中，比如看外语电影、听外语歌曲、阅读外语材料等，潜移默化地提升语言能力。

6.保持自信和积极心态：会话过程中难免会犯错，但不要因此气馁。保持自信，积极尝试，才能不断进步。

7.定期复习和总结：定期回顾自己学过的知识，总结会话中的不足，针对性地改进。

通过坚持练习和不断积累，你会逐渐提升自己的会话能力，变得更加自信和流利！
2025-06-17 08:47:51 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:47:51 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75a4b3dc] was not registered for synchronization because synchronization is not active
2025-06-17 08:47:51 [boundedElastic-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:47:51 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:47:51 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 学好会话需要多方面的努力和练习，以下是一些建议：

1.多听多模仿：通过听播客、看视频、听音乐等方式，熟悉语言的发音、语调和常用表达。模仿发音和语速，帮助自己更自然地表达。

2.多说多练习：不要害怕犯错，勇敢开口。可以和朋友、同学练习对话，或者参加语言学习小组。如果找不到语伴，也可以尝试自言自语或对着镜子练习。

3.积累词汇和语法：会话的基础是词汇和语法。每天学习一些新单词和常用句型，通过造句和对话练习来巩固。

4.学习常用表达：掌握一些日常会话中的常用表达，比如问候、感谢、道歉等，这些是会话的基础。

5.创造语言环境：尽量让自己置身于语言环境中，比如看外语电影、听外语歌曲、阅读外语材料等，潜移默化地提升语言能力。

6.保持自信和积极心态：会话过程中难免会犯错，但不要因此气馁。保持自信，积极尝试，才能不断进步。

7.定期复习和总结：定期回顾自己学过的知识，总结会话中的不足，针对性地改进。

通过坚持练习和不断积累，你会逐渐提升自己的会话能力，变得更加自信和流利！(String), 72(Long)
2025-06-17 08:47:51 [boundedElastic-6] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-17 08:47:51 [boundedElastic-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75a4b3dc]
2025-06-17 08:47:51 [boundedElastic-6] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:48:11 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:48:11 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c32c55d] was not registered for synchronization because synchronization is not active
2025-06-17 08:48:11 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:46:29.697, closeCount=0, lastValidateTimeMillis=2025-06-17 08:46:29.698}] will not be managed by Spring
2025-06-17 08:48:11 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:48:11 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 14(Long)
2025-06-17 08:48:11 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 12
2025-06-17 08:48:11 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c32c55d]
2025-06-17 08:50:14 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-17 08:50:14 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-17 08:50:14 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-2} closing ...
2025-06-17 08:50:14 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-2} closed
2025-06-17 08:50:19 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 76176 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-17 08:50:19 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-17 08:50:19 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-17 08:50:19 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-17 08:50:19 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-17 08:50:19 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-17 08:50:19 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-17 08:50:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:50:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-17 08:50:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-17 08:50:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 08:50:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-17 08:50:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 Redis repository interfaces.
2025-06-17 08:50:20 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-17 08:50:20 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ConversationMapper.class]
2025-06-17 08:50:20 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-17 08:50:20 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-17 08:50:20 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'conversationMapper' and 'com.example.qasystem.mapper.ConversationMapper' mapperInterface
2025-06-17 08:50:20 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-17 08:50:20 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-17 08:50:20 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-17 08:50:20 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-17 08:50:20 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-17 08:50:20 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-17 08:50:20 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1068 ms
2025-06-17 08:50:20 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [B710955551C023F508CFBD6D96E8F943]
2025-06-17 08:50:20 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-06-17 08:50:20 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-06-17 08:50:21 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-17 08:50:21 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ConversationMapper.xml]'
2025-06-17 08:50:21 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-17 08:50:21 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-17 08:50:21 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-17 08:50:21 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-17 08:50:21 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-17 08:50:21 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-17 08:50:21 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-17 08:50:22 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-17 08:50:22 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 3.263 seconds (process running for 3.798)
2025-06-17 08:50:25 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-17 08:50:25 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-17 08:50:25 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-17 08:50:25 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 08:50:29 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:50:29 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8644026] was not registered for synchronization because synchronization is not active
2025-06-17 08:50:29 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:50:20.882}] will not be managed by Spring
2025-06-17 08:50:29 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:50:30 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-17 08:50:30 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 08:50:30 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8644026]
2025-06-17 08:50:30 [http-nio-8080-exec-4] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 08:50:34 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:50:34 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ecf7f81] was not registered for synchronization because synchronization is not active
2025-06-17 08:50:34 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:50:20.882}] will not be managed by Spring
2025-06-17 08:50:34 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:50:34 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-17 08:50:34 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 08:50:34 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ecf7f81]
2025-06-17 08:50:34 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-17 08:50:34 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:50:34 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:50:34 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5b8f9e] was not registered for synchronization because synchronization is not active
2025-06-17 08:50:34 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:50:20.882}] will not be managed by Spring
2025-06-17 08:50:34 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:50:34 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:50:34 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:50:34 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5b8f9e]
2025-06-17 08:50:34 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79b90059] was not registered for synchronization because synchronization is not active
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:50:20.882}] will not be managed by Spring
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79b90059]
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73416b29] was not registered for synchronization because synchronization is not active
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:50:20.882}] will not be managed by Spring
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM conversation WHERE user_id = ?
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 14
2025-06-17 08:50:34 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73416b29]
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1416c211] was not registered for synchronization because synchronization is not active
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:50:20.882}] will not be managed by Spring
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 20(String)
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1416c211]
2025-06-17 08:50:49 [http-nio-8080-exec-10] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 如何更好的读书
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1ee3b0] was not registered for synchronization because synchronization is not active
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:50:20.882}] will not be managed by Spring
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:50:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1ee3b0]
2025-06-17 08:50:50 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 如何更好的读书
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aecc9bf]
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:50:20.882}] will be managed by Spring
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 79
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aecc9bf]
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aecc9bf] from current transaction
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 如何更好的读书(String), 20(Long)
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aecc9bf]
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aecc9bf] from current transaction
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 如何更好的读书(String), null, 73(Long), 2025-06-17T08:50:50.058009300(LocalDateTime), 20(Long)
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aecc9bf]
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 如何更好的读书
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aecc9bf]
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aecc9bf]
2025-06-17 08:50:50 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aecc9bf]
2025-06-17 08:51:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 更好地读书可以从以下几个方面入手。
2025-06-17 08:51:14 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 首先，明确自己的阅读目标，是为了获取知识、提升技能，还是为了娱乐放松，这样可以帮助你更有针对性地选择书籍。
2025-06-17 08:51:16 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 其次，选择适合自己的阅读方式，比如精读和泛读相结合，对于经典书籍可以深入研究，而对于轻松读物可以快速浏览。
2025-06-17 08:51:17 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 另外，养成做笔记和总结的习惯，可以帮助你更好地理解和记忆书中的内容。
2025-06-17 08:51:18 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 同时，定期复习也是巩固知识的重要方法。
2025-06-17 08:51:19 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 最后，可以尝试加入读书社群或参加读书会，与他人分享心得，也能提升阅读的乐趣和效果。
2025-06-17 08:51:19 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 6, response: 更好地读书可以从以下几个方面入手。首先，明确自己的阅读目标，是为了获取知识、提升技能，还是为了娱乐放松，这样可以帮助你更有针对性地选择书籍。其次，选择适合自己的阅读方式，比如精读和泛读相结合，对于经典书籍可以深入研究，而对于轻松读物可以快速浏览。另外，养成做笔记和总结的习惯，可以帮助你更好地理解和记忆书中的内容。同时，定期复习也是巩固知识的重要方法。最后，可以尝试加入读书社群或参加读书会，与他人分享心得，也能提升阅读的乐趣和效果。
2025-06-17 08:51:19 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:51:19 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@506f8697] was not registered for synchronization because synchronization is not active
2025-06-17 08:51:19 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:50:20.882}] will not be managed by Spring
2025-06-17 08:51:19 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:51:19 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 更好地读书可以从以下几个方面入手。首先，明确自己的阅读目标，是为了获取知识、提升技能，还是为了娱乐放松，这样可以帮助你更有针对性地选择书籍。其次，选择适合自己的阅读方式，比如精读和泛读相结合，对于经典书籍可以深入研究，而对于轻松读物可以快速浏览。另外，养成做笔记和总结的习惯，可以帮助你更好地理解和记忆书中的内容。同时，定期复习也是巩固知识的重要方法。最后，可以尝试加入读书社群或参加读书会，与他人分享心得，也能提升阅读的乐趣和效果。(String), 73(Long)
2025-06-17 08:51:19 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-17 08:51:19 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@506f8697]
2025-06-17 08:51:19 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@601ca815] was not registered for synchronization because synchronization is not active
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:53:20.439}] will not be managed by Spring
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 20(String)
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@601ca815]
2025-06-17 08:53:20 [http-nio-8080-exec-9] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 如何学好绘画
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b880c96] was not registered for synchronization because synchronization is not active
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:53:20.439}] will not be managed by Spring
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b880c96]
2025-06-17 08:53:20 [http-nio-8080-exec-9] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 如何学好绘画
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e170bf]
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:53:20.439}] will be managed by Spring
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - <==      Total: 80
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e170bf]
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e170bf] from current transaction
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 如何学好绘画(String), 20(Long)
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e170bf]
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e170bf] from current transaction
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 如何学好绘画(String), null, 74(Long), 2025-06-17T08:53:20.457249600(LocalDateTime), 20(Long)
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e170bf]
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 如何学好绘画
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e170bf]
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e170bf]
2025-06-17 08:53:20 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e170bf]
2025-06-17 08:53:36 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 学好绘画需要时间和耐心，同时也需要掌握一些方法和技巧。
2025-06-17 08:53:37 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 首先，可以从基础开始，学习素描、色彩理论和构图原理，这些都是绘画的基础。
2025-06-17 08:53:38 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 其次，多观察生活中的细节，培养对形状、光影和色彩的敏感度。
2025-06-17 08:53:38 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 此外，可以尝试临摹一些经典作品，通过模仿学习大师的技巧。
2025-06-17 08:53:39 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 最重要的是多练习，不要害怕犯错，每一次创作都是进步的机会。
2025-06-17 08:53:39 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 同时，可以参加绘画课程或加入绘画社群，与他人交流心得，互相学习。
2025-06-17 08:53:40 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 最后，保持对绘画的热情和耐心，坚持下去，你会逐渐发现自己的进步。
2025-06-17 08:53:40 [boundedElastic-4] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 6, response: 学好绘画需要时间和耐心，同时也需要掌握一些方法和技巧。首先，可以从基础开始，学习素描、色彩理论和构图原理，这些都是绘画的基础。其次，多观察生活中的细节，培养对形状、光影和色彩的敏感度。此外，可以尝试临摹一些经典作品，通过模仿学习大师的技巧。最重要的是多练习，不要害怕犯错，每一次创作都是进步的机会。同时，可以参加绘画课程或加入绘画社群，与他人交流心得，互相学习。最后，保持对绘画的热情和耐心，坚持下去，你会逐渐发现自己的进步。
2025-06-17 08:53:40 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:53:40 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1a9732] was not registered for synchronization because synchronization is not active
2025-06-17 08:53:40 [boundedElastic-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:53:20.439}] will not be managed by Spring
2025-06-17 08:53:40 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 08:53:40 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 学好绘画需要时间和耐心，同时也需要掌握一些方法和技巧。首先，可以从基础开始，学习素描、色彩理论和构图原理，这些都是绘画的基础。其次，多观察生活中的细节，培养对形状、光影和色彩的敏感度。此外，可以尝试临摹一些经典作品，通过模仿学习大师的技巧。最重要的是多练习，不要害怕犯错，每一次创作都是进步的机会。同时，可以参加绘画课程或加入绘画社群，与他人交流心得，互相学习。最后，保持对绘画的热情和耐心，坚持下去，你会逐渐发现自己的进步。(String), 74(Long)
2025-06-17 08:53:40 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-17 08:53:40 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1a9732]
2025-06-17 08:53:40 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 08:56:06 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:56:06 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@576c1811] was not registered for synchronization because synchronization is not active
2025-06-17 08:56:06 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:56:06.643}] will not be managed by Spring
2025-06-17 08:56:06 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 08:56:06 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 20(Long)
2025-06-17 08:56:06 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 13
2025-06-17 08:56:06 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@576c1811]
2025-06-17 08:56:21 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-17 08:56:21 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:56:21 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:56:21 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@411a795c] was not registered for synchronization because synchronization is not active
2025-06-17 08:56:21 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:56:06.643}] will not be managed by Spring
2025-06-17 08:56:21 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:56:21 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:56:21 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:56:21 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@411a795c]
2025-06-17 08:56:21 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-17 08:56:23 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-17 08:56:23 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:56:23 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:56:23 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ab60852] was not registered for synchronization because synchronization is not active
2025-06-17 08:56:23 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:56:06.643}] will not be managed by Spring
2025-06-17 08:56:23 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:56:23 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:56:23 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:56:23 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ab60852]
2025-06-17 08:56:23 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-17 08:56:23 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-17 08:56:23 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 08:56:23 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 08:56:23 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@300e3b97] was not registered for synchronization because synchronization is not active
2025-06-17 08:56:23 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 08:50:20.882, closeCount=0, lastValidateTimeMillis=2025-06-17 08:56:06.643}] will not be managed by Spring
2025-06-17 08:56:23 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 08:56:23 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 08:56:23 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 08:56:23 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@300e3b97]
2025-06-17 08:56:23 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-17 08:57:28 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-17 08:57:28 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-17 08:57:28 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-06-17 08:57:28 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-06-17 09:38:40 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 21204 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-17 09:38:40 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-17 09:38:40 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-17 09:38:40 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-17 09:38:40 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-17 09:38:41 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-17 09:38:41 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-17 09:38:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 09:38:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-17 09:38:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-17 09:38:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 09:38:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-17 09:38:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 Redis repository interfaces.
2025-06-17 09:38:41 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-17 09:38:41 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ConversationMapper.class]
2025-06-17 09:38:41 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-17 09:38:41 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-17 09:38:41 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'conversationMapper' and 'com.example.qasystem.mapper.ConversationMapper' mapperInterface
2025-06-17 09:38:41 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-17 09:38:41 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-17 09:38:41 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-17 09:38:41 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-17 09:38:41 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-17 09:38:41 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-17 09:38:41 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1246 ms
2025-06-17 09:38:41 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [121E4115604F5A30500B3038AC3AF682]
2025-06-17 09:38:41 [restartedMain] ERROR o.a.catalina.session.StandardManager - Exception loading sessions from persistent storage
java.io.StreamCorruptedException: invalid type code: 00
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1775)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2617)
	at java.base/java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:652)
	at java.base/java.lang.Throwable.readObject(Throwable.java:912)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1104)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2434)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2268)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1122)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:822)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:345)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4491)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:412)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:438)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:517)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:219)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:193)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1362)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1351)
	at com.example.qasystem.QaSystemApplication.main(QaSystemApplication.java:12)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2025-06-17 09:38:41 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-06-17 09:38:42 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-06-17 09:38:42 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-17 09:38:42 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ConversationMapper.xml]'
2025-06-17 09:38:42 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-17 09:38:42 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-17 09:38:42 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-17 09:38:42 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-17 09:38:43 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-17 09:38:43 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-17 09:38:43 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-17 09:38:43 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-17 09:38:43 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 3.447 seconds (process running for 4.034)
2025-06-17 09:42:12 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-17 09:42:12 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-17 09:42:13 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-06-17 09:42:13 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-06-17 09:42:31 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 33944 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-17 09:42:31 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-17 09:42:31 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-17 09:42:31 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-17 09:42:31 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-17 09:42:32 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-17 09:42:32 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-17 09:42:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 09:42:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-17 09:42:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JDBC repository interfaces.
2025-06-17 09:42:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-17 09:42:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-17 09:42:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-06-17 09:42:32 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-17 09:42:32 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ConversationMapper.class]
2025-06-17 09:42:32 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-17 09:42:32 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-17 09:42:32 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'conversationMapper' and 'com.example.qasystem.mapper.ConversationMapper' mapperInterface
2025-06-17 09:42:32 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-17 09:42:33 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-17 09:42:33 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-17 09:42:33 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-17 09:42:33 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-17 09:42:33 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-17 09:42:33 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1309 ms
2025-06-17 09:42:33 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-06-17 09:42:33 [restartedMain] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-06-17 09:42:33 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-17 09:42:33 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ConversationMapper.xml]'
2025-06-17 09:42:33 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-17 09:42:33 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-17 09:42:34 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-17 09:42:34 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-17 09:42:34 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-17 09:42:34 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-17 09:42:34 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-17 09:42:34 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-17 09:42:34 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 3.354 seconds (process running for 3.811)
2025-06-17 09:42:40 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-17 09:42:40 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-17 09:42:40 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-17 09:42:40 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 09:42:41 [http-nio-8080-exec-5] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 09:42:45 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:42:45 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4494a9cf] was not registered for synchronization because synchronization is not active
2025-06-17 09:42:45 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:42:33.515}] will not be managed by Spring
2025-06-17 09:42:45 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 09:42:45 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-17 09:42:45 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 09:42:45 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4494a9cf]
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4289720c] was not registered for synchronization because synchronization is not active
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:42:33.515}] will not be managed by Spring
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4289720c]
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26c3cfca] was not registered for synchronization because synchronization is not active
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:42:33.515}] will not be managed by Spring
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 81
2025-06-17 09:42:46 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26c3cfca]
2025-06-17 09:42:46 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 81 chat history entries for userId: 6
2025-06-17 09:42:46 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 09:42:46 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:42:46 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b604baf] was not registered for synchronization because synchronization is not active
2025-06-17 09:42:46 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:42:33.515}] will not be managed by Spring
2025-06-17 09:42:46 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 09:42:46 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 09:42:46 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 09:42:46 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b604baf]
2025-06-17 09:42:49 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:42:49 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0d71b4] was not registered for synchronization because synchronization is not active
2025-06-17 09:42:49 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:42:33.515}] will not be managed by Spring
2025-06-17 09:42:49 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 09:42:49 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 21(Long)
2025-06-17 09:42:49 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 4
2025-06-17 09:42:49 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0d71b4]
2025-06-17 09:42:50 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:42:50 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b02629d] was not registered for synchronization because synchronization is not active
2025-06-17 09:42:50 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:42:33.515}] will not be managed by Spring
2025-06-17 09:42:50 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 09:42:50 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 18(Long)
2025-06-17 09:42:50 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 0
2025-06-17 09:42:50 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b02629d]
2025-06-17 09:42:52 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:42:52 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87afd43] was not registered for synchronization because synchronization is not active
2025-06-17 09:42:52 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:42:33.515}] will not be managed by Spring
2025-06-17 09:42:52 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 09:42:52 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 17(Long)
2025-06-17 09:42:52 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 0
2025-06-17 09:42:52 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87afd43]
2025-06-17 09:42:53 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:42:53 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f741be] was not registered for synchronization because synchronization is not active
2025-06-17 09:42:53 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:42:33.515}] will not be managed by Spring
2025-06-17 09:42:53 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 09:42:53 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 20(Long)
2025-06-17 09:42:53 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 13
2025-06-17 09:42:53 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f741be]
2025-06-17 09:45:11 [http-nio-8080-exec-5] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 09:45:11 [http-nio-8080-exec-8] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 09:45:21 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:45:21 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3008aeb1] was not registered for synchronization because synchronization is not active
2025-06-17 09:45:21 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:45:21.297}] will not be managed by Spring
2025-06-17 09:45:21 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 09:45:21 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-17 09:45:21 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-17 09:45:21 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3008aeb1]
2025-06-17 09:45:21 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-17 09:45:21 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 09:45:21 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:45:21 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25cd79ed] was not registered for synchronization because synchronization is not active
2025-06-17 09:45:21 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:45:21.297}] will not be managed by Spring
2025-06-17 09:45:21 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 09:45:21 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 09:45:21 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 09:45:21 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25cd79ed]
2025-06-17 09:45:21 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-17 09:45:21 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 09:45:21 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:45:21 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f22597] was not registered for synchronization because synchronization is not active
2025-06-17 09:45:21 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:45:21.297}] will not be managed by Spring
2025-06-17 09:45:21 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 09:45:21 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 09:45:21 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 09:45:21 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f22597]
2025-06-17 09:45:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:45:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d300b4b] was not registered for synchronization because synchronization is not active
2025-06-17 09:45:22 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:45:21.297}] will not be managed by Spring
2025-06-17 09:45:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByConversationId - ==>  Preparing: SELECT * FROM chat_history WHERE conversation_id = ?
2025-06-17 09:45:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByConversationId - ==> Parameters: 16(Long)
2025-06-17 09:45:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByConversationId - <==      Total: 12
2025-06-17 09:45:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d300b4b]
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f66ce19] was not registered for synchronization because synchronization is not active
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:47:02.799}] will not be managed by Spring
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.ConversationMapper.findById - ==>  Preparing: SELECT * FROM conversation WHERE id = ?
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.ConversationMapper.findById - ==> Parameters: 21(String)
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.ConversationMapper.findById - <==      Total: 1
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f66ce19]
2025-06-17 09:47:02 [http-nio-8080-exec-2] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 台风是怎么形成的
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17c4cf7a] was not registered for synchronization because synchronization is not active
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:47:02.799}] will not be managed by Spring
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17c4cf7a]
2025-06-17 09:47:02 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 台风是怎么形成的
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a164927]
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:47:02.799}] will be managed by Spring
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 81
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a164927]
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a164927] from current transaction
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.updateConversation - ==>  Preparing: UPDATE conversation SET name = ? WHERE id = ?
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.updateConversation - ==> Parameters: 台风是怎么形成的(String), 21(Long)
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.updateConversation - <==    Updates: 1
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a164927]
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a164927] from current transaction
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at, conversation_id) VALUES (?, ?, ?,?, ?,?)
2025-06-17 09:47:02 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 台风是怎么形成的(String), null, 75(Long), 2025-06-17T09:47:02.829540300(LocalDateTime), 21(Long)
2025-06-17 09:47:03 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-17 09:47:03 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a164927]
2025-06-17 09:47:03 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - 保存历史记录: 台风是怎么形成的
2025-06-17 09:47:03 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a164927]
2025-06-17 09:47:03 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a164927]
2025-06-17 09:47:03 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a164927]
2025-06-17 09:47:18 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 台风是一种在热带海洋上形成的强烈热带气旋，它的形成需要特定的气象条件和环境。
2025-06-17 09:47:19 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 首先，温暖的海水温度（通常在26.
2025-06-17 09:47:19 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 5摄氏度以上）提供了大量水汽，这是台风形成的基础。
2025-06-17 09:47:20 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 其次，地球的自转通过科里奥利效应使空气产生旋转，这是台风形成的重要因素。
2025-06-17 09:47:22 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 此外，大气中的垂直风切变较小，使得上升气流能够持续发展。

台风的形成过程大致分为几个阶段：首先是热带扰动，随后发展为热带低压，接着是热带风暴，最后达到台风强度。
2025-06-17 09:47:23 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 在台风形成过程中，中心气压不断下降，风速逐渐增强。
2025-06-17 09:47:24 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Sending chunk: 台风通常具有明显的旋转结构，包括中心的台风眼、周围的螺旋状云带和底层的旋转风。

总的来说，台风的形成是一个复杂的过程，涉及多种气象因素的相互作用。
2025-06-17 09:47:24 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - 完成对话的userId: 6, response: 台风是一种在热带海洋上形成的强烈热带气旋，它的形成需要特定的气象条件和环境。首先，温暖的海水温度（通常在26.5摄氏度以上）提供了大量水汽，这是台风形成的基础。其次，地球的自转通过科里奥利效应使空气产生旋转，这是台风形成的重要因素。此外，大气中的垂直风切变较小，使得上升气流能够持续发展。

台风的形成过程大致分为几个阶段：首先是热带扰动，随后发展为热带低压，接着是热带风暴，最后达到台风强度。在台风形成过程中，中心气压不断下降，风速逐渐增强。台风通常具有明显的旋转结构，包括中心的台风眼、周围的螺旋状云带和底层的旋转风。

总的来说，台风的形成是一个复杂的过程，涉及多种气象因素的相互作用。
2025-06-17 09:47:24 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-17 09:47:24 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61025802] was not registered for synchronization because synchronization is not active
2025-06-17 09:47:24 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [ConnectionProxyImpl{connectedTime=2025-06-17 09:42:33.515, closeCount=0, lastValidateTimeMillis=2025-06-17 09:47:02.799}] will not be managed by Spring
2025-06-17 09:47:24 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-17 09:47:24 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 台风是一种在热带海洋上形成的强烈热带气旋，它的形成需要特定的气象条件和环境。首先，温暖的海水温度（通常在26.5摄氏度以上）提供了大量水汽，这是台风形成的基础。其次，地球的自转通过科里奥利效应使空气产生旋转，这是台风形成的重要因素。此外，大气中的垂直风切变较小，使得上升气流能够持续发展。

台风的形成过程大致分为几个阶段：首先是热带扰动，随后发展为热带低压，接着是热带风暴，最后达到台风强度。在台风形成过程中，中心气压不断下降，风速逐渐增强。台风通常具有明显的旋转结构，包括中心的台风眼、周围的螺旋状云带和底层的旋转风。

总的来说，台风的形成是一个复杂的过程，涉及多种气象因素的相互作用。(String), 75(Long)
2025-06-17 09:47:24 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-17 09:47:24 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61025802]
2025-06-17 09:47:24 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - 更新AI回复
2025-06-17 09:47:45 [http-nio-8080-exec-6] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-17 09:48:07 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-17 09:48:07 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-17 09:48:07 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-06-17 09:48:07 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
