2025-06-10 09:25:23 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 59344 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 09:25:23 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 09:25:23 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 09:25:24 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 09:25:24 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 09:25:24 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 09:25:24 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 09:25:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 09:25:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-10 09:25:24 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 09:25:24 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 09:25:24 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 09:25:24 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 09:25:25 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 09:25:25 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 09:25:25 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 09:25:25 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 09:25:25 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 09:25:25 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1039 ms
2025-06-10 09:25:25 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 09:25:25 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 09:25:25 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 09:25:25 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 09:25:25 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 09:25:25 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 09:25:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 09:25:26 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5d6681a9
2025-06-10 09:25:26 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 09:25:26 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 09:25:26 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 09:25:26 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 09:25:26 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.705 seconds (process running for 3.241)
2025-06-10 09:25:35 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 09:25:35 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 09:25:35 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 09:25:35 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 09:25:36 [http-nio-8080-exec-3] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 09:25:43 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:25:43 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6538a797] was not registered for synchronization because synchronization is not active
2025-06-10 09:25:43 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1271141179 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d6681a9] will not be managed by Spring
2025-06-10 09:25:43 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:25:43 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 09:25:43 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 09:25:43 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6538a797]
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b05c5f] was not registered for synchronization because synchronization is not active
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1169347117 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d6681a9] will not be managed by Spring
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b05c5f]
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74bd5254] was not registered for synchronization because synchronization is not active
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1986902584 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d6681a9] will not be managed by Spring
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 65
2025-06-10 09:25:43 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74bd5254]
2025-06-10 09:25:43 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 65 chat history entries for userId: 6
2025-06-10 09:25:43 [http-nio-8080-exec-7] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-7][chat] Deprecated unwrapped fragment expression "layout" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:25:43 [http-nio-8080-exec-7] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8080-exec-7] Exception processing template "chat": An error happened during template parsing (template: "class path resource [templates/chat.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.attoparser.ParseException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout" - line 18, col 6)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 98 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateInputException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout" - line 18, col 6)
	at org.thymeleaf.standard.expression.FragmentExpression.resolveExecutedFragmentExpression(FragmentExpression.java:598)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.computeFragment(AbstractStandardFragmentInsertionTagProcessor.java:419)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.doProcess(AbstractStandardFragmentInsertionTagProcessor.java:115)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 100 common frames omitted
2025-06-10 09:25:43 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")] with root cause
org.thymeleaf.exceptions.TemplateInputException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout" - line 18, col 6)
	at org.thymeleaf.standard.expression.FragmentExpression.resolveExecutedFragmentExpression(FragmentExpression.java:598)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.computeFragment(AbstractStandardFragmentInsertionTagProcessor.java:419)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.doProcess(AbstractStandardFragmentInsertionTagProcessor.java:115)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-10 09:25:53 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 09:25:54 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 09:25:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 09:25:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 09:25:56 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 68620 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 09:25:56 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 09:25:56 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 09:25:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 09:25:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 09:25:57 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 09:25:57 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 09:25:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 09:25:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-10 09:25:57 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 09:25:57 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 09:25:57 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 09:25:57 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 09:25:57 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 09:25:57 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 09:25:57 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 09:25:57 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 09:25:57 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 09:25:57 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1008 ms
2025-06-10 09:25:57 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [1490A0C5381603F8E070519C7F1B83F3]
2025-06-10 09:25:57 [restartedMain] ERROR o.a.catalina.session.StandardManager - Exception loading sessions from persistent storage
java.io.StreamCorruptedException: invalid type code: 00
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1775)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2617)
	at java.base/java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:652)
	at java.base/java.lang.Throwable.readObject(Throwable.java:912)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1104)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2434)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2268)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1122)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:822)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:345)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4491)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:412)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:438)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:517)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:219)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:193)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1362)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1351)
	at com.example.qasystem.QaSystemApplication.main(QaSystemApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2025-06-10 09:25:57 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 09:25:57 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 09:25:58 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 09:25:58 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 09:25:58 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 09:25:58 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 09:25:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 09:25:58 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@13e064c6
2025-06-10 09:25:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 09:25:58 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 09:25:58 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 09:25:58 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 09:25:58 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.43 seconds (process running for 2.776)
2025-06-10 09:26:02 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 09:26:02 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 09:26:02 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 09:26:02 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 09:26:08 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:26:08 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2993a8] was not registered for synchronization because synchronization is not active
2025-06-10 09:26:08 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@689047270 wrapping com.mysql.cj.jdbc.ConnectionImpl@13e064c6] will not be managed by Spring
2025-06-10 09:26:08 [http-nio-8080-exec-10] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:26:08 [http-nio-8080-exec-10] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 09:26:08 [http-nio-8080-exec-10] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 09:26:08 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2993a8]
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f605051] was not registered for synchronization because synchronization is not active
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2053294553 wrapping com.mysql.cj.jdbc.ConnectionImpl@13e064c6] will not be managed by Spring
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f605051]
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd2366c] was not registered for synchronization because synchronization is not active
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1988953503 wrapping com.mysql.cj.jdbc.ConnectionImpl@13e064c6] will not be managed by Spring
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 65
2025-06-10 09:26:09 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd2366c]
2025-06-10 09:26:09 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 65 chat history entries for userId: 6
2025-06-10 09:26:09 [http-nio-8080-exec-5] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-5][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:26:09 [http-nio-8080-exec-5] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8080-exec-5] Exception processing template "chat": An error happened during template parsing (template: "class path resource [templates/chat.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.attoparser.ParseException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout.html" - line 18, col 6)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 98 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateInputException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout.html" - line 18, col 6)
	at org.thymeleaf.standard.expression.FragmentExpression.resolveExecutedFragmentExpression(FragmentExpression.java:598)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.computeFragment(AbstractStandardFragmentInsertionTagProcessor.java:419)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.doProcess(AbstractStandardFragmentInsertionTagProcessor.java:115)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 100 common frames omitted
2025-06-10 09:26:09 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")] with root cause
org.thymeleaf.exceptions.TemplateInputException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout.html" - line 18, col 6)
	at org.thymeleaf.standard.expression.FragmentExpression.resolveExecutedFragmentExpression(FragmentExpression.java:598)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.computeFragment(AbstractStandardFragmentInsertionTagProcessor.java:419)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.doProcess(AbstractStandardFragmentInsertionTagProcessor.java:115)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-10 09:27:05 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 09:27:05 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 09:27:05 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 09:27:05 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 09:27:07 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 60296 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 09:27:07 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 09:27:07 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 09:27:07 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 09:27:07 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 09:27:08 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 09:27:08 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 09:27:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 09:27:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-10 09:27:08 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 09:27:08 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 09:27:08 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 09:27:08 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 09:27:08 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 09:27:08 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 09:27:08 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 09:27:08 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 09:27:08 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 09:27:08 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 883 ms
2025-06-10 09:27:08 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [85B71DF82EF37BB23989501F8AE48C56]
2025-06-10 09:27:08 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 09:27:08 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 09:27:08 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 09:27:08 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 09:27:08 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 09:27:09 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 09:27:09 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 09:27:09 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1f981534
2025-06-10 09:27:09 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 09:27:09 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 09:27:09 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 09:27:09 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 09:27:09 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.355 seconds (process running for 2.806)
2025-06-10 09:27:12 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 09:27:12 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 09:27:12 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-10 09:27:12 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 09:27:20 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:27:20 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d128a5b] was not registered for synchronization because synchronization is not active
2025-06-10 09:27:20 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1922694825 wrapping com.mysql.cj.jdbc.ConnectionImpl@1f981534] will not be managed by Spring
2025-06-10 09:27:20 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:27:20 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 09:27:20 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 09:27:20 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d128a5b]
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6996bd41] was not registered for synchronization because synchronization is not active
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@747908631 wrapping com.mysql.cj.jdbc.ConnectionImpl@1f981534] will not be managed by Spring
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6996bd41]
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d7261a9] was not registered for synchronization because synchronization is not active
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1095937011 wrapping com.mysql.cj.jdbc.ConnectionImpl@1f981534] will not be managed by Spring
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 65
2025-06-10 09:27:20 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d7261a9]
2025-06-10 09:27:20 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Retrieved 65 chat history entries for userId: 6
2025-06-10 09:27:20 [http-nio-8080-exec-6] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-6][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:27:20 [http-nio-8080-exec-6] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8080-exec-6] Exception processing template "chat": An error happened during template parsing (template: "class path resource [templates/chat.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.attoparser.ParseException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout.html" - line 18, col 6)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 98 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateInputException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout.html" - line 18, col 6)
	at org.thymeleaf.standard.expression.FragmentExpression.resolveExecutedFragmentExpression(FragmentExpression.java:598)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.computeFragment(AbstractStandardFragmentInsertionTagProcessor.java:419)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.doProcess(AbstractStandardFragmentInsertionTagProcessor.java:115)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 100 common frames omitted
2025-06-10 09:27:20 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")] with root cause
org.thymeleaf.exceptions.TemplateInputException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout.html" - line 18, col 6)
	at org.thymeleaf.standard.expression.FragmentExpression.resolveExecutedFragmentExpression(FragmentExpression.java:598)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.computeFragment(AbstractStandardFragmentInsertionTagProcessor.java:419)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.doProcess(AbstractStandardFragmentInsertionTagProcessor.java:115)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-10 09:27:39 [http-nio-8080-exec-5] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 09:27:48 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:27:48 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e21ebbb] was not registered for synchronization because synchronization is not active
2025-06-10 09:27:48 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@15074319 wrapping com.mysql.cj.jdbc.ConnectionImpl@1f981534] will not be managed by Spring
2025-06-10 09:27:48 [http-nio-8080-exec-8] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:27:48 [http-nio-8080-exec-8] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 09:27:48 [http-nio-8080-exec-8] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 09:27:48 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e21ebbb]
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63094a85] was not registered for synchronization because synchronization is not active
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1842260116 wrapping com.mysql.cj.jdbc.ConnectionImpl@1f981534] will not be managed by Spring
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63094a85]
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf3a2af] was not registered for synchronization because synchronization is not active
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@84383958 wrapping com.mysql.cj.jdbc.ConnectionImpl@1f981534] will not be managed by Spring
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 65
2025-06-10 09:27:48 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf3a2af]
2025-06-10 09:27:48 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 65 chat history entries for userId: 6
2025-06-10 09:27:48 [http-nio-8080-exec-7] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-7][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:27:48 [http-nio-8080-exec-7] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8080-exec-7] Exception processing template "chat": An error happened during template parsing (template: "class path resource [templates/chat.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.attoparser.ParseException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout.html" - line 18, col 6)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 98 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateInputException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout.html" - line 18, col 6)
	at org.thymeleaf.standard.expression.FragmentExpression.resolveExecutedFragmentExpression(FragmentExpression.java:598)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.computeFragment(AbstractStandardFragmentInsertionTagProcessor.java:419)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.doProcess(AbstractStandardFragmentInsertionTagProcessor.java:115)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 100 common frames omitted
2025-06-10 09:27:48 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")] with root cause
org.thymeleaf.exceptions.TemplateInputException: Error resolving fragment: "~{ :: content}": template or fragment could not be resolved (template: "layout.html" - line 18, col 6)
	at org.thymeleaf.standard.expression.FragmentExpression.resolveExecutedFragmentExpression(FragmentExpression.java:598)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.computeFragment(AbstractStandardFragmentInsertionTagProcessor.java:419)
	at org.thymeleaf.standard.processor.AbstractStandardFragmentInsertionTagProcessor.doProcess(AbstractStandardFragmentInsertionTagProcessor.java:115)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-10 09:28:42 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 09:28:42 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 09:28:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 09:28:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 09:28:44 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 59052 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 09:28:44 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 09:28:44 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 09:28:44 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 09:28:44 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 09:28:44 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 09:28:44 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 09:28:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 09:28:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JDBC repository interfaces.
2025-06-10 09:28:44 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 09:28:44 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 09:28:44 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 09:28:44 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 09:28:45 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 09:28:45 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 09:28:45 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 09:28:45 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 09:28:45 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 09:28:45 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 917 ms
2025-06-10 09:28:45 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [9A474928A21FEF293E82727D88280987]
2025-06-10 09:28:45 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 09:28:45 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 09:28:45 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 09:28:45 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 09:28:45 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 09:28:45 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 09:28:45 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 09:28:45 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@ed3c93d
2025-06-10 09:28:45 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 09:28:46 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 09:28:46 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 09:28:46 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 09:28:46 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.375 seconds (process running for 2.775)
2025-06-10 09:28:51 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 09:28:51 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 09:28:51 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-06-10 09:28:51 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 09:28:57 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:28:57 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d128a5b] was not registered for synchronization because synchronization is not active
2025-06-10 09:28:57 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1922694825 wrapping com.mysql.cj.jdbc.ConnectionImpl@ed3c93d] will not be managed by Spring
2025-06-10 09:28:57 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:28:58 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 09:28:58 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 09:28:58 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d128a5b]
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e7c6e79] was not registered for synchronization because synchronization is not active
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1841968672 wrapping com.mysql.cj.jdbc.ConnectionImpl@ed3c93d] will not be managed by Spring
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e7c6e79]
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@383ba024] was not registered for synchronization because synchronization is not active
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@353967868 wrapping com.mysql.cj.jdbc.ConnectionImpl@ed3c93d] will not be managed by Spring
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 65
2025-06-10 09:28:58 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@383ba024]
2025-06-10 09:28:58 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Retrieved 65 chat history entries for userId: 6
2025-06-10 09:28:58 [http-nio-8080-exec-2] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-2][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dc26291] was not registered for synchronization because synchronization is not active
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1929745241 wrapping com.mysql.cj.jdbc.ConnectionImpl@ed3c93d] will not be managed by Spring
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dc26291]
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32389962] was not registered for synchronization because synchronization is not active
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1551938398 wrapping com.mysql.cj.jdbc.ConnectionImpl@ed3c93d] will not be managed by Spring
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 65
2025-06-10 09:29:03 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32389962]
2025-06-10 09:29:03 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Retrieved 65 chat history entries for userId: 6
2025-06-10 09:29:03 [http-nio-8080-exec-4] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-4][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:29:24 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 09:29:24 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 09:29:24 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 09:29:24 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 09:29:26 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 50736 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 09:29:26 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 09:29:26 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 09:29:26 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 09:29:26 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 09:29:27 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 09:29:27 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 09:29:27 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 09:29:27 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-10 09:29:27 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 09:29:27 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 09:29:27 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 09:29:27 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 09:29:27 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 09:29:27 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 09:29:27 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 09:29:27 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 09:29:27 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 09:29:27 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1010 ms
2025-06-10 09:29:27 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [4A65B64C77C7FF4A525B9AA568B45804]
2025-06-10 09:29:27 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 09:29:27 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 09:29:27 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 09:29:27 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 09:29:27 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 09:29:28 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 09:29:28 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 09:29:28 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7879df39
2025-06-10 09:29:28 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 09:29:28 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 09:29:28 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 09:29:28 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 09:29:28 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.455 seconds (process running for 2.852)
2025-06-10 09:29:31 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 09:29:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 09:29:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-10 09:29:31 [http-nio-8080-exec-4] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 09:29:42 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:29:42 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3596bacc] was not registered for synchronization because synchronization is not active
2025-06-10 09:29:42 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1483984580 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:29:42 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:29:42 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 09:29:42 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 09:29:42 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3596bacc]
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54dfbc30] was not registered for synchronization because synchronization is not active
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@299710671 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54dfbc30]
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20868b31] was not registered for synchronization because synchronization is not active
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@152149293 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 65
2025-06-10 09:29:42 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20868b31]
2025-06-10 09:29:42 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Retrieved 65 chat history entries for userId: 6
2025-06-10 09:29:42 [http-nio-8080-exec-2] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-2][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e6f5a7] was not registered for synchronization because synchronization is not active
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@391032918 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e6f5a7]
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77805451] was not registered for synchronization because synchronization is not active
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@421907659 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 65
2025-06-10 09:30:00 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77805451]
2025-06-10 09:30:00 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 65 chat history entries for userId: 6
2025-06-10 09:30:00 [http-nio-8080-exec-7] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-7][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e21ebbb] was not registered for synchronization because synchronization is not active
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@15074319 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e21ebbb]
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41db0e34] was not registered for synchronization because synchronization is not active
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1076251015 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:30:19 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41db0e34]
2025-06-10 09:30:19 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:30:19 [http-nio-8080-exec-10] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-10][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@572e09bb] was not registered for synchronization because synchronization is not active
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@645324311 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@572e09bb]
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61028de] was not registered for synchronization because synchronization is not active
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@559192694 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:30:28 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61028de]
2025-06-10 09:30:28 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:30:28 [http-nio-8080-exec-3] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-3][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fb85e9e] was not registered for synchronization because synchronization is not active
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@745473428 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fb85e9e]
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3be0c1] was not registered for synchronization because synchronization is not active
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@237276489 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:30:41 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3be0c1]
2025-06-10 09:30:41 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:30:41 [http-nio-8080-exec-7] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-7][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d111941] was not registered for synchronization because synchronization is not active
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1964403203 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d111941]
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52869703] was not registered for synchronization because synchronization is not active
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@117987075 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:34:30 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52869703]
2025-06-10 09:34:30 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:34:30 [http-nio-8080-exec-4] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-4][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce672d9] was not registered for synchronization because synchronization is not active
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@49847494 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce672d9]
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d4490d9] was not registered for synchronization because synchronization is not active
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1919639314 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:34:33 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d4490d9]
2025-06-10 09:34:33 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:34:33 [http-nio-8080-exec-3] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-3][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@675c1ec5] was not registered for synchronization because synchronization is not active
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@178338660 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@675c1ec5]
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8149e8] was not registered for synchronization because synchronization is not active
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@245823064 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:34:41 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8149e8]
2025-06-10 09:34:41 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:34:41 [http-nio-8080-exec-6] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-6][chat] Deprecated unwrapped fragment expression "layout.html" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout.html}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63094a85] was not registered for synchronization because synchronization is not active
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1842260116 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63094a85]
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf3a2af] was not registered for synchronization because synchronization is not active
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@84383958 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:35:00 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf3a2af]
2025-06-10 09:35:00 [http-nio-8080-exec-9] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:35:00 [http-nio-8080-exec-9] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-9][chat] Deprecated unwrapped fragment expression "layout" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5592ffcc] was not registered for synchronization because synchronization is not active
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1468303894 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5592ffcc]
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74055ed1] was not registered for synchronization because synchronization is not active
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@908833538 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:35:05 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74055ed1]
2025-06-10 09:35:05 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:35:05 [http-nio-8080-exec-4] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-4][chat] Deprecated unwrapped fragment expression "layout" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49d34b38] was not registered for synchronization because synchronization is not active
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1192541298 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49d34b38]
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@629b649] was not registered for synchronization because synchronization is not active
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1433446207 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:36:25 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@629b649]
2025-06-10 09:36:25 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:36:25 [http-nio-8080-exec-5] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-5][chat] Deprecated unwrapped fragment expression "layout" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da9242c] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1771486529 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da9242c]
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@395ebaea] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@494035369 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:40:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@395ebaea]
2025-06-10 09:40:02 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:40:02 [http-nio-8080-exec-8] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-8][chat] Deprecated unwrapped fragment expression "layout" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c37e14] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@632958014 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c37e14]
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1585fb03] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@764281977 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:40:05 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1585fb03]
2025-06-10 09:40:05 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:40:05 [http-nio-8080-exec-10] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-10][chat] Deprecated unwrapped fragment expression "layout" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:40:12 [http-nio-8080-exec-3] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你是谁
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@562db1ab] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@394484946 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@562db1ab]
2025-06-10 09:40:12 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你是谁
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6fad90] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1173678879 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), null, 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6fad90]
2025-06-10 09:40:12 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你是谁
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 


2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d3e9a4d] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:14 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@871986074 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 

(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d3e9a4d]
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 您好
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16a578bc] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:14 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@860174658 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 您好(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16a578bc]
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376ebc18] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:14 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@43657536 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), ！(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376ebc18]
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我是
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77fced56] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:14 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@620694208 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 我是(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77fced56]
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 由
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5384c870] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:14 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@267481546 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 由(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5384c870]
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 中国的
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae98f2] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:14 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@89511468 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 中国的(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae98f2]
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 深度
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b329893] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:14 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1081984879 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 深度(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:14 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b329893]
2025-06-10 09:40:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 求
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f006eba] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@292061322 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 求(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f006eba]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 索
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e922ea] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@105944269 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 索(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e922ea]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28de08b9] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@842699066 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), （(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28de08b9]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Deep
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a92178] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@426406452 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), Deep(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a92178]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Seek
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bdfc534] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@863343062 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), Seek(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bdfc534]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ）
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ae38697] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1062214298 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), ）(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ae38697]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 公司
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cde2b91] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@443538851 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 公司(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cde2b91]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 开发
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@235af36c] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1264827409 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 开发(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@235af36c]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57249da4] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@912720760 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 的(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57249da4]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 智能
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45aeb203] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@907333295 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 智能(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45aeb203]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 助手
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21be8] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@806129473 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 助手(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21be8]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Deep
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b2ed557] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1004754561 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), Deep(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b2ed557]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Seek
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2584340c] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2019416454 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), Seek(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2584340c]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: -R
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b896c34] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1068047133 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), -R(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b896c34]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e78efaf] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1591795352 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 1(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e78efaf]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b6844d] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@450500611 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 。(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b6844d]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 如
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5956c521] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@503690922 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 如(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5956c521]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 您
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@263fcccc] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1236237031 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 您(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@263fcccc]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有任何
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37be355] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1543112282 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 有任何(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37be355]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 任何
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@722beffd] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@773249958 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 任何(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@722beffd]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问题
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db16ff5] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1615345081 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 问题(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db16ff5]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73c25496] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@902452188 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), ，(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73c25496]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我会
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@347a6aac] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1434316369 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 我会(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@347a6aac]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 尽
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54cf27bc] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@856103043 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 尽(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54cf27bc]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba23ff8] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1727857655 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 我(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba23ff8]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 所能
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77231a0e] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@757376749 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 所能(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77231a0e]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 为您提供
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@605baa53] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@256323388 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 为您提供(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@605baa53]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮助
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a0b9cb] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1586794206 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 帮助(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a0b9cb]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8bf7150] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:15 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1857552237 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), 。(String), 2025-06-10T09:40:12.778088(LocalDateTime)
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:15 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8bf7150]
2025-06-10 09:40:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:15 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6
2025-06-10 09:40:24 [http-nio-8080-exec-5] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43996e1] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@507723071 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43996e1]
2025-06-10 09:40:24 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b28cb3] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@797544440 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, 2025-06-10T09:40:24.752004200(LocalDateTime)
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b28cb3]
2025-06-10 09:40:24 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 


2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6963009] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:25 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1657741957 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), 

(String), 2025-06-10T09:40:24.752004200(LocalDateTime)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6963009]
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你好
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec0988d] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:25 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2036461348 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), 你好(String), 2025-06-10T09:40:24.752004200(LocalDateTime)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec0988d]
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bee1415] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:25 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1897985813 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), ！(String), 2025-06-10T09:40:24.752004200(LocalDateTime)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bee1415]
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有什么
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c088abd] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:25 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@663578005 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), 有什么(String), 2025-06-10T09:40:24.752004200(LocalDateTime)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c088abd]
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我可以
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@272d6a26] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:25 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@265834780 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), 我可以(String), 2025-06-10T09:40:24.752004200(LocalDateTime)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@272d6a26]
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮助
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2bb021] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:25 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1125877688 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), 帮助(String), 2025-06-10T09:40:24.752004200(LocalDateTime)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2bb021]
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你的
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643cebdd] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:25 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@910484931 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), 你的(String), 2025-06-10T09:40:24.752004200(LocalDateTime)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643cebdd]
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 吗
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1435bc63] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:25 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@391434043 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), 吗(String), 2025-06-10T09:40:24.752004200(LocalDateTime)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1435bc63]
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ？
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@438012fc] was not registered for synchronization because synchronization is not active
2025-06-10 09:40:25 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2054121547 wrapping com.mysql.cj.jdbc.ConnectionImpl@7879df39] will not be managed by Spring
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), ？(String), 2025-06-10T09:40:24.752004200(LocalDateTime)
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:40:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@438012fc]
2025-06-10 09:40:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Saved AI response to chat history
2025-06-10 09:40:25 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6
2025-06-10 09:53:59 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 09:54:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 09:54:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 09:54:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 09:54:09 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 33692 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 09:54:09 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 09:54:09 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 09:54:09 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 09:54:09 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 09:54:10 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 09:54:10 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 09:54:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 09:54:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 JDBC repository interfaces.
2025-06-10 09:54:10 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 09:54:10 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 09:54:10 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 09:54:10 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 09:54:10 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 09:54:10 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 09:54:10 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 09:54:10 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 09:54:10 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 09:54:10 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1066 ms
2025-06-10 09:54:10 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [06C6D2BD0561C9701F8AA121ECC207E9]
2025-06-10 09:54:10 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 09:54:10 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 09:54:11 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 09:54:11 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 09:54:11 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 09:54:11 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 09:54:11 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 09:54:11 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@392c8e56
2025-06-10 09:54:11 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 09:54:11 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 09:54:11 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 09:54:11 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 09:54:11 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.639 seconds (process running for 3.517)
2025-06-10 09:55:03 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 09:55:03 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 09:55:03 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-10 09:55:03 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 09:55:10 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:55:10 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d128a5b] was not registered for synchronization because synchronization is not active
2025-06-10 09:55:10 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1922694825 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:55:10 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:55:10 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 09:55:10 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 09:55:10 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d128a5b]
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b0c72e2] was not registered for synchronization because synchronization is not active
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1578041319 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b0c72e2]
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1ac014] was not registered for synchronization because synchronization is not active
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@402203767 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 09:55:10 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1ac014]
2025-06-10 09:55:10 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 09:55:10 [http-nio-8080-exec-4] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-4][chat] Deprecated unwrapped fragment expression "layout" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:55:17 [http-nio-8080-exec-7] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你是谁
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6411e43b] was not registered for synchronization because synchronization is not active
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@974984685 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6411e43b]
2025-06-10 09:55:17 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你是谁
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5395cc72] was not registered for synchronization because synchronization is not active
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@944687623 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), null, 2025-06-10T09:55:17.240497600(LocalDateTime)
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5395cc72]
2025-06-10 09:55:17 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你是谁
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 


2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 您好
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我是
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 由
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 中国的
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 深度
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 求
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 索
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Deep
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Seek
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ）
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 公司
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 开发
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 智能
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 助手
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Deep
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Seek
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: -R
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 如
2025-06-10 09:55:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 您
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有任何
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 任何
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问题
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我会
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 尽
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 所能
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 为您提供
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮助
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。
2025-06-10 09:55:20 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 

您好！我是由中国的深度求索（DeepSeek）公司开发的智能助手DeepSeek-R1。如您有任何任何问题，我会尽我所能为您提供帮助。
2025-06-10 09:55:20 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:55:20 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15ef4631] was not registered for synchronization because synchronization is not active
2025-06-10 09:55:20 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@651201827 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET user_message = ?, ai_response = ?, created_at = ?
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 你是谁(String), 

您好！我是由中国的深度求索（DeepSeek）公司开发的智能助手DeepSeek-R1。如您有任何任何问题，我会尽我所能为您提供帮助。(String), 2025-06-10T09:55:17.240497600(LocalDateTime)
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 09:55:20 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15ef4631]
2025-06-10 09:55:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e21ebbb] was not registered for synchronization because synchronization is not active
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@15074319 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e21ebbb]
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41db0e34] was not registered for synchronization because synchronization is not active
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1076251015 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 09:55:50 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41db0e34]
2025-06-10 09:55:50 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 1 chat history entries for userId: 6
2025-06-10 09:55:50 [http-nio-8080-exec-8] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-8][chat] Deprecated unwrapped fragment expression "layout" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67d2f0be] was not registered for synchronization because synchronization is not active
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1762984500 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67d2f0be]
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2828080f] was not registered for synchronization because synchronization is not active
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1485785780 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 09:55:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2828080f]
2025-06-10 09:55:52 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Retrieved 1 chat history entries for userId: 6
2025-06-10 09:55:52 [http-nio-8080-exec-10] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-10][chat] Deprecated unwrapped fragment expression "layout" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524565b1] was not registered for synchronization because synchronization is not active
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@912726162 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524565b1]
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7992f64a] was not registered for synchronization because synchronization is not active
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1463091952 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 09:57:13 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7992f64a]
2025-06-10 09:57:13 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Retrieved 1 chat history entries for userId: 6
2025-06-10 09:57:13 [http-nio-8080-exec-4] WARN  o.t.s.p.AbstractStandardFragmentInsertionTagProcessor - [THYMELEAF][http-nio-8080-exec-4][chat] Deprecated unwrapped fragment expression "layout" found in template chat, line 3, col 7. Please use the complete syntax of fragment expressions instead ("~{layout}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ed788d] was not registered for synchronization because synchronization is not active
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1787106350 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ed788d]
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f368a90] was not registered for synchronization because synchronization is not active
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@665297131 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 10:08:47 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f368a90]
2025-06-10 10:08:47 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 1 chat history entries for userId: 6
2025-06-10 10:08:47 [http-nio-8080-exec-8] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8080-exec-8] Exception processing template "chat": An error happened during template parsing (template: "class path resource [templates/chat.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "history.userMessage" (template: "chat" - line 29, col 32)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 98 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "history.userMessage" (template: "chat" - line 29, col 32)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.Model.process(Model.java:290)
	at org.thymeleaf.engine.IteratedGatheringModelProcessable.processIterationModel(IteratedGatheringModelProcessable.java:368)
	at org.thymeleaf.engine.IteratedGatheringModelProcessable.process(IteratedGatheringModelProcessable.java:222)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleCloseElement(ProcessorTemplateHandler.java:1640)
	at org.thymeleaf.engine.CloseElementTag.beHandled(CloseElementTag.java:139)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 100 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1008E: Property or field 'userMessage' cannot be found on object of type 'java.util.ArrayList' - maybe not public or not valid?
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:229)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 131 common frames omitted
2025-06-10 10:08:47 [http-nio-8080-exec-8] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1008E: Property or field 'userMessage' cannot be found on object of type 'java.util.ArrayList' - maybe not public or not valid?
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:229)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.Model.process(Model.java:290)
	at org.thymeleaf.engine.IteratedGatheringModelProcessable.processIterationModel(IteratedGatheringModelProcessable.java:368)
	at org.thymeleaf.engine.IteratedGatheringModelProcessable.process(IteratedGatheringModelProcessable.java:222)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleCloseElement(ProcessorTemplateHandler.java:1640)
	at org.thymeleaf.engine.CloseElementTag.beHandled(CloseElementTag.java:139)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f78fa6] was not registered for synchronization because synchronization is not active
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1657280416 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f78fa6]
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f0e7bc] was not registered for synchronization because synchronization is not active
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1206221522 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 10:08:48 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f0e7bc]
2025-06-10 10:08:48 [http-nio-8080-exec-9] INFO  c.e.qasystem.service.ChatService - Retrieved 1 chat history entries for userId: 6
2025-06-10 10:08:48 [http-nio-8080-exec-9] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8080-exec-9] Exception processing template "chat": An error happened during template parsing (template: "class path resource [templates/chat.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "history.userMessage" (template: "chat" - line 29, col 32)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 98 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "history.userMessage" (template: "chat" - line 29, col 32)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.Model.process(Model.java:290)
	at org.thymeleaf.engine.IteratedGatheringModelProcessable.processIterationModel(IteratedGatheringModelProcessable.java:368)
	at org.thymeleaf.engine.IteratedGatheringModelProcessable.process(IteratedGatheringModelProcessable.java:222)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleCloseElement(ProcessorTemplateHandler.java:1640)
	at org.thymeleaf.engine.CloseElementTag.beHandled(CloseElementTag.java:139)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 100 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1008E: Property or field 'userMessage' cannot be found on object of type 'java.util.ArrayList' - maybe not public or not valid?
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:229)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 131 common frames omitted
2025-06-10 10:08:48 [http-nio-8080-exec-9] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/chat.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1008E: Property or field 'userMessage' cannot be found on object of type 'java.util.ArrayList' - maybe not public or not valid?
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:229)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.Model.process(Model.java:290)
	at org.thymeleaf.engine.IteratedGatheringModelProcessable.processIterationModel(IteratedGatheringModelProcessable.java:368)
	at org.thymeleaf.engine.IteratedGatheringModelProcessable.process(IteratedGatheringModelProcessable.java:222)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleCloseElement(ProcessorTemplateHandler.java:1640)
	at org.thymeleaf.engine.CloseElementTag.beHandled(CloseElementTag.java:139)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205)
	at org.thymeleaf.engine.Model.process(Model.java:282)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b839629] was not registered for synchronization because synchronization is not active
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1279904750 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b839629]
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e5e7567] was not registered for synchronization because synchronization is not active
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1238078555 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 10:09:03 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e5e7567]
2025-06-10 10:09:03 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Retrieved 1 chat history entries for userId: 6
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d111941] was not registered for synchronization because synchronization is not active
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1964403203 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d111941]
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41886393] was not registered for synchronization because synchronization is not active
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1983888839 wrapping com.mysql.cj.jdbc.ConnectionImpl@392c8e56] will not be managed by Spring
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 10:09:16 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41886393]
2025-06-10 10:09:16 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Retrieved 1 chat history entries for userId: 6
2025-06-10 10:11:04 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-06-10 10:11:04 [Thread-6] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:11:04 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:11:04 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:11:04 [Thread-6] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-06-10 10:11:04 [Thread-6] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 10:11:04 [Thread-6] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 10:11:04 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 33692 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:11:04 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:11:04 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:11:05 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:11:05 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:11:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:11:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:11:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:11:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:11:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:11:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:11:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:11:05 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:11:05 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:11:05 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:11:05 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:11:05 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 257 ms
2025-06-10 10:11:05 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [1904CF60EDC9A690DC8B692436C46D3C]
2025-06-10 10:11:05 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:11:05 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:11:05 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:11:05 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:11:05 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:11:05 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:11:05 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-06-10 10:11:05 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5c622be5
2025-06-10 10:11:05 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-06-10 10:11:05 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:11:05 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:11:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:11:05 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 0.489 seconds (process running for 1017.262)
2025-06-10 10:11:05 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-10 10:11:13 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 10:11:13 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 10:11:13 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 10:11:13 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 10:11:45 [http-nio-8080-exec-8] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 10:11:52 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:11:52 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eaa2fc6] was not registered for synchronization because synchronization is not active
2025-06-10 10:11:52 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@812500579 wrapping com.mysql.cj.jdbc.ConnectionImpl@5c622be5] will not be managed by Spring
2025-06-10 10:11:52 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:11:52 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 10:11:52 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 10:11:52 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eaa2fc6]
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@441d17e0] was not registered for synchronization because synchronization is not active
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@18841863 wrapping com.mysql.cj.jdbc.ConnectionImpl@5c622be5] will not be managed by Spring
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@441d17e0]
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d46090] was not registered for synchronization because synchronization is not active
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@475714429 wrapping com.mysql.cj.jdbc.ConnectionImpl@5c622be5] will not be managed by Spring
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 10:11:52 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d46090]
2025-06-10 10:11:52 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 1 chat history entries for userId: 6
2025-06-10 10:11:59 [http-nio-8080-exec-3] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba3e5e9] was not registered for synchronization because synchronization is not active
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@895753453 wrapping com.mysql.cj.jdbc.ConnectionImpl@5c622be5] will not be managed by Spring
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba3e5e9]
2025-06-10 10:11:59 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e7c49e] was not registered for synchronization because synchronization is not active
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@681944573 wrapping com.mysql.cj.jdbc.ConnectionImpl@5c622be5] will not be managed by Spring
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, 2025-06-10T10:11:59.641355500(LocalDateTime)
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e7c49e]
2025-06-10 10:11:59 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 


2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你好
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 很高兴
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 见到
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有什么
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我可以
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮助
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你的
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 吗
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ？
2025-06-10 10:12:01 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 

你好！很高兴见到你。有什么我可以帮助你的吗？
2025-06-10 10:12:01 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:12:01 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f7f881] was not registered for synchronization because synchronization is not active
2025-06-10 10:12:01 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@878630735 wrapping com.mysql.cj.jdbc.ConnectionImpl@5c622be5] will not be managed by Spring
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET user_message = ?, ai_response = ?, created_at = ?
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 你好(String), 

你好！很高兴见到你。有什么我可以帮助你的吗？(String), 2025-06-10T10:11:59.641355500(LocalDateTime)
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 2
2025-06-10 10:12:01 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f7f881]
2025-06-10 10:12:01 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 10:12:38 [http-nio-8080-exec-1] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 9.11和9.8谁大
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca4fc84] was not registered for synchronization because synchronization is not active
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1218142664 wrapping com.mysql.cj.jdbc.ConnectionImpl@5c622be5] will not be managed by Spring
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca4fc84]
2025-06-10 10:12:38 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 9.11和9.8谁大
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57f51b7e] was not registered for synchronization because synchronization is not active
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1012833752 wrapping com.mysql.cj.jdbc.ConnectionImpl@5c622be5] will not be managed by Spring
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 9.11和9.8谁大(String), null, 2025-06-10T10:12:38.176889300(LocalDateTime)
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57f51b7e]
2025-06-10 10:12:38 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 9.11和9.8谁大
2025-06-10 10:12:44 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 


2025-06-10 10:12:44 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 要
2025-06-10 10:12:44 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 比较
2025-06-10 10:12:44 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  \(
2025-06-10 10:12:44 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9
2025-06-10 10:12:44 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .
2025-06-10 10:12:44 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1
2025-06-10 10:12:44 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1
2025-06-10 10:12:44 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: \)
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  和
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  \(
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 8
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: \)
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  的
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 大小
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 可以
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 按照
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 以下
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 步骤
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 进行
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ：


2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  
2025-06-10 10:12:45 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 

要比较 \(9.11\) 和 \(9.8\) 的大小，可以按照以下步骤进行：

1. 
2025-06-10 10:12:45 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:12:45 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ec6b2b1] was not registered for synchronization because synchronization is not active
2025-06-10 10:12:45 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1726840344 wrapping com.mysql.cj.jdbc.ConnectionImpl@5c622be5] will not be managed by Spring
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET user_message = ?, ai_response = ?, created_at = ?
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 9.11和9.8谁大(String), 

要比较 \(9.11\) 和 \(9.8\) 的大小，可以按照以下步骤进行：

1. (String), 2025-06-10T10:12:38.176889300(LocalDateTime)
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 3
2025-06-10 10:12:45 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ec6b2b1]
2025-06-10 10:12:45 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 10:13:55 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-10 10:13:55 [Thread-25] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:13:55 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:13:56 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:13:56 [Thread-25] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-06-10 10:13:56 [Thread-25] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-06-10 10:13:56 [Thread-25] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-06-10 10:13:56 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 33692 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:13:56 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:13:56 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:13:56 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:13:56 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:13:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:13:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:13:56 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:13:56 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:13:56 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:13:56 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:13:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:13:56 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:13:56 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:13:56 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:13:56 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:13:56 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 165 ms
2025-06-10 10:13:56 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [B0235476F741DFC0A8B46DF59C6FBA5A]
2025-06-10 10:13:56 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:13:56 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:13:56 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:13:56 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:13:56 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:13:56 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:13:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-06-10 10:13:56 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7a0ccc2a
2025-06-10 10:13:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-06-10 10:13:56 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:13:56 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:13:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:13:56 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 0.363 seconds (process running for 1188.37)
2025-06-10 10:13:56 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-10 10:14:54 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:14:54 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:14:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-06-10 10:14:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-06-10 10:14:56 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 20664 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:14:56 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:14:56 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:14:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 10:14:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 10:14:57 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:14:57 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:14:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:14:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:14:57 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:14:57 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:14:57 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:14:57 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:14:57 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:14:57 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:14:57 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:14:57 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:14:57 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:14:57 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 926 ms
2025-06-10 10:14:57 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:14:57 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:14:58 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:14:58 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:14:58 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:14:58 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:14:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 10:14:58 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6297cdfe
2025-06-10 10:14:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 10:14:58 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:14:58 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:14:58 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:14:58 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.399 seconds (process running for 2.788)
2025-06-10 10:15:15 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 10:15:15 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 10:15:15 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-10 10:15:15 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 10:15:22 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:15:22 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a39ce42] was not registered for synchronization because synchronization is not active
2025-06-10 10:15:22 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@305857131 wrapping com.mysql.cj.jdbc.ConnectionImpl@6297cdfe] will not be managed by Spring
2025-06-10 10:15:22 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:15:22 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 10:15:22 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 10:15:22 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a39ce42]
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b247508] was not registered for synchronization because synchronization is not active
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1848049160 wrapping com.mysql.cj.jdbc.ConnectionImpl@6297cdfe] will not be managed by Spring
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b247508]
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f02d1dc] was not registered for synchronization because synchronization is not active
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1468429057 wrapping com.mysql.cj.jdbc.ConnectionImpl@6297cdfe] will not be managed by Spring
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 3
2025-06-10 10:15:22 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f02d1dc]
2025-06-10 10:15:22 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Retrieved 3 chat history entries for userId: 6
2025-06-10 10:15:38 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 9.11和9.8谁大
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4662b769] was not registered for synchronization because synchronization is not active
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1643670952 wrapping com.mysql.cj.jdbc.ConnectionImpl@6297cdfe] will not be managed by Spring
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4662b769]
2025-06-10 10:15:38 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 9.11和9.8谁大
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@286cf236] was not registered for synchronization because synchronization is not active
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2070331821 wrapping com.mysql.cj.jdbc.ConnectionImpl@6297cdfe] will not be managed by Spring
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, created_at) VALUES (?, ?, ?, ?)
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 9.11和9.8谁大(String), null, 2025-06-10T10:15:38.688712300(LocalDateTime)
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@286cf236]
2025-06-10 10:15:38 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 9.11和9.8谁大
2025-06-10 10:16:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 10:16:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9
2025-06-10 10:16:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .11
2025-06-10 10:16:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  和
2025-06-10 10:16:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 10:16:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .8
2025-06-10 10:16:14 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  都是
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 小数
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，比较
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 它们的大小
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 需要对齐
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 小数点位数
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ：

-
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .11
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  相当于
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .110
2025-06-10 10:16:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （保留
2025-06-10 10:16:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 三位
2025-06-10 10:16:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 小数）。

2025-06-10 10:16:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 10:16:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 10:16:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 8 
2025-06-10 10:16:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 相当于 
2025-06-10 10:16:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 10:16:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 800（
2025-06-10 10:16:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 因为 
2025-06-10 10:16:17 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 10:16:17 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 8 =
2025-06-10 10:16:17 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 10:16:17 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .80
2025-06-10 10:16:17 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  =
2025-06-10 10:16:17 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 10:16:17 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .800
2025-06-10 10:16:17 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ）。

现在
2025-06-10 10:16:17 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 比较小数
2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 部分：

2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 110 
2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的小数
2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 部分是 
2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 0.
2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 110。

2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 800 
2025-06-10 10:16:18 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的小数
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 部分是 
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 0.
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 800。


2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 由于 
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 0.
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 800 >
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  0
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .110
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 因此 
2025-06-10 10:16:19 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
9.11 和 9.8 都是小数，比较它们的大小需要对齐小数点位数：

- 9.11 相当于 9.110（保留三位小数）。
- 9.8 相当于 9.800（因为 9.8 = 9.80 = 9.800）。

现在比较小数部分：
- 9.110 的小数部分是 0.110。
- 9.800 的小数部分是 0.800。

由于 0.800 > 0.110，因此 
2025-06-10 10:16:19 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:16:19 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d758a3] was not registered for synchronization because synchronization is not active
2025-06-10 10:16:19 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1622685881 wrapping com.mysql.cj.jdbc.ConnectionImpl@6297cdfe] will not be managed by Spring
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET user_message = ?, ai_response = ?, created_at = ?
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 9.11和9.8谁大(String), 
9.11 和 9.8 都是小数，比较它们的大小需要对齐小数点位数：

- 9.11 相当于 9.110（保留三位小数）。
- 9.8 相当于 9.800（因为 9.8 = 9.80 = 9.800）。

现在比较小数部分：
- 9.110 的小数部分是 0.110。
- 9.800 的小数部分是 0.800。

由于 0.800 > 0.110，因此 (String), 2025-06-10T10:15:38.688712300(LocalDateTime)
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 4
2025-06-10 10:16:19 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d758a3]
2025-06-10 10:16:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f47e9a] was not registered for synchronization because synchronization is not active
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1530104404 wrapping com.mysql.cj.jdbc.ConnectionImpl@6297cdfe] will not be managed by Spring
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f47e9a]
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0e806f] was not registered for synchronization because synchronization is not active
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1828207898 wrapping com.mysql.cj.jdbc.ConnectionImpl@6297cdfe] will not be managed by Spring
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 4
2025-06-10 10:17:22 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0e806f]
2025-06-10 10:17:22 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Retrieved 4 chat history entries for userId: 6
2025-06-10 10:19:59 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 1 deletion, 1 modification)
2025-06-10 10:19:59 [Thread-6] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:19:59 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:20:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:20:00 [Thread-6] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-06-10 10:20:00 [Thread-6] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 10:20:00 [Thread-6] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 10:20:00 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 20664 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:20:00 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:20:00 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:20:00 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:20:00 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:20:00 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:20:00 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:20:00 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:20:00 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:20:00 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:20:00 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:20:00 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:20:00 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:20:00 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:20:00 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:20:00 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:20:00 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 331 ms
2025-06-10 10:20:00 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [369CC6D0F0732E585FEEF6AC536ED9F1]
2025-06-10 10:20:00 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:20:00 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:20:00 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:20:00 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:20:00 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:20:00 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:20:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-06-10 10:20:00 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@10bc82d1
2025-06-10 10:20:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-06-10 10:20:00 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:20:00 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:20:00 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:20:00 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 0.586 seconds (process running for 304.919)
2025-06-10 10:20:00 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-10 10:20:02 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-06-10 10:20:02 [Thread-25] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:20:02 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:20:02 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:20:02 [Thread-25] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-06-10 10:20:02 [Thread-25] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-06-10 10:20:02 [Thread-25] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-06-10 10:20:02 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 20664 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:20:02 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:20:02 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:20:02 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:20:02 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:20:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:20:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:20:02 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:20:02 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:20:02 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:20:02 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:20:02 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:20:02 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:20:02 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:20:02 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:20:02 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:20:02 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 209 ms
2025-06-10 10:20:02 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:20:02 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:20:02 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:20:02 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:20:02 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:20:02 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:20:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-06-10 10:20:02 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42426153
2025-06-10 10:20:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-06-10 10:20:02 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:20:02 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:20:02 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:20:02 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 0.368 seconds (process running for 306.967)
2025-06-10 10:20:02 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-10 10:25:34 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:25:34 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:25:34 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-06-10 10:25:34 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-06-10 10:25:38 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 63556 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:25:38 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:25:38 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:25:38 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 10:25:38 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 10:25:38 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:25:38 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:25:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:25:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:25:39 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:25:39 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:25:39 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:25:39 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:25:39 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:25:39 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:25:39 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:25:39 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:25:39 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:25:39 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 964 ms
2025-06-10 10:25:39 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:25:39 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:25:39 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:25:39 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:25:39 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:25:40 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:25:40 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 10:25:40 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6f05c267
2025-06-10 10:25:40 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 10:25:40 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:25:40 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:25:40 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:25:40 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.431 seconds (process running for 2.806)
2025-06-10 10:25:45 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 10:25:45 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 10:25:45 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-10 10:25:45 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 10:25:51 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:25:51 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f0358c0] was not registered for synchronization because synchronization is not active
2025-06-10 10:25:51 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1957249450 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f05c267] will not be managed by Spring
2025-06-10 10:25:51 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:25:51 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 10:25:51 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 10:25:51 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f0358c0]
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c36f306] was not registered for synchronization because synchronization is not active
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1765046500 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f05c267] will not be managed by Spring
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c36f306]
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581752b4] was not registered for synchronization because synchronization is not active
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1126311027 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f05c267] will not be managed by Spring
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 10:25:51 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581752b4]
2025-06-10 10:25:51 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 10:25:57 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1d448f] was not registered for synchronization because synchronization is not active
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1700991439 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f05c267] will not be managed by Spring
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1d448f]
2025-06-10 10:25:57 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50277245] was not registered for synchronization because synchronization is not active
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@391736818 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f05c267] will not be managed by Spring
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 10:25:57 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50277245]
2025-06-10 10:25:57 [http-nio-8080-exec-6] ERROR c.e.qasystem.service.ChatService - Failed to save user message to chat history: 你好
org.mybatis.spring.MyBatisSystemException: null
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy74.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy3/jdk.proxy3.$Proxy79.insertChatHistory(Unknown Source)
	at com.example.qasystem.service.ChatService.getStreamingResponse(ChatService.java:47)
	at com.example.qasystem.controller.ChatController.chatStream(ChatController.java:50)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.apache.ibatis.reflection.ReflectionException: There is no getter for property named 'version' in 'class com.example.qasystem.model.ChatHistory'
	at org.apache.ibatis.reflection.Reflector.getGetInvoker(Reflector.java:385)
	at org.apache.ibatis.reflection.MetaClass.getGetInvoker(MetaClass.java:160)
	at org.apache.ibatis.reflection.wrapper.BeanWrapper.getBeanProperty(BeanWrapper.java:153)
	at org.apache.ibatis.reflection.wrapper.BeanWrapper.get(BeanWrapper.java:49)
	at org.apache.ibatis.reflection.MetaObject.getValue(MetaObject.java:116)
	at org.apache.ibatis.scripting.defaults.DefaultParameterHandler.setParameters(DefaultParameterHandler.java:82)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.parameterize(PreparedStatementHandler.java:97)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.parameterize(RoutingStatementHandler.java:65)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:91)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:49)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 108 common frames omitted
2025-06-10 10:25:57 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.mybatis.spring.MyBatisSystemException] with root cause
org.apache.ibatis.reflection.ReflectionException: There is no getter for property named 'version' in 'class com.example.qasystem.model.ChatHistory'
	at org.apache.ibatis.reflection.Reflector.getGetInvoker(Reflector.java:385)
	at org.apache.ibatis.reflection.MetaClass.getGetInvoker(MetaClass.java:160)
	at org.apache.ibatis.reflection.wrapper.BeanWrapper.getBeanProperty(BeanWrapper.java:153)
	at org.apache.ibatis.reflection.wrapper.BeanWrapper.get(BeanWrapper.java:49)
	at org.apache.ibatis.reflection.MetaObject.getValue(MetaObject.java:116)
	at org.apache.ibatis.scripting.defaults.DefaultParameterHandler.setParameters(DefaultParameterHandler.java:82)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.parameterize(PreparedStatementHandler.java:97)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.parameterize(RoutingStatementHandler.java:65)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:91)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:49)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	at jdk.proxy2/jdk.proxy2.$Proxy74.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy3/jdk.proxy3.$Proxy79.insertChatHistory(Unknown Source)
	at com.example.qasystem.service.ChatService.getStreamingResponse(ChatService.java:47)
	at com.example.qasystem.controller.ChatController.chatStream(ChatController.java:50)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-10 10:25:57 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpMediaTypeNotAcceptableException: No acceptable representation]
2025-06-10 10:26:45 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:26:45 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:26:45 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 10:26:45 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 10:26:48 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 58516 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:26:48 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:26:48 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:26:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 10:26:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 10:26:49 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:26:49 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:26:49 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:26:49 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:26:49 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:26:49 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:26:49 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:26:49 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:26:49 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:26:49 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:26:49 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:26:49 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:26:49 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:26:49 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 893 ms
2025-06-10 10:26:50 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [517D060D5EC7D6FCF255ADB3B82D767A]
2025-06-10 10:26:50 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:26:50 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:26:50 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:26:50 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:26:50 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:26:50 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:26:50 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 10:26:50 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2165a7a
2025-06-10 10:26:50 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 10:26:50 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:26:50 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:26:50 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:26:50 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.254 seconds (process running for 2.582)
2025-06-10 10:31:08 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 10:31:08 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 10:31:08 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 10:31:08 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 10:31:14 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:31:14 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d51b7ea] was not registered for synchronization because synchronization is not active
2025-06-10 10:31:14 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2139630967 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 10:31:14 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:31:14 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 10:31:14 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 10:31:14 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d51b7ea]
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d980cb] was not registered for synchronization because synchronization is not active
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1104875060 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d980cb]
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70d0ebf0] was not registered for synchronization because synchronization is not active
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@952627961 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 10:31:15 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70d0ebf0]
2025-06-10 10:31:15 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 10:31:19 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0f1556] was not registered for synchronization because synchronization is not active
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@621476701 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0f1556]
2025-06-10 10:31:19 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9a2953] was not registered for synchronization because synchronization is not active
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@419050003 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, null, 2025-06-10T10:31:19.932602500(LocalDateTime)
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9a2953]
2025-06-10 10:31:19 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 10:31:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
你好
2025-06-10 10:31:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 呀！
2025-06-10 10:31:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 👋
2025-06-10 10:31:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  很高兴
2025-06-10 10:31:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 见到你
2025-06-10 10:31:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ～有什么
2025-06-10 10:31:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我可以
2025-06-10 10:31:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮忙
2025-06-10 10:31:35 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的吗？
2025-06-10 10:31:35 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 无论是聊天
2025-06-10 10:31:35 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、解答
2025-06-10 10:31:35 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问题，
2025-06-10 10:31:35 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 还是需要
2025-06-10 10:31:35 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 建议，
2025-06-10 10:31:35 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我
2025-06-10 10:31:35 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 都在这里
2025-06-10 10:31:35 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 等你
2025-06-10 10:31:36 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 哦
2025-06-10 10:31:36 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！😊
2025-06-10 10:31:36 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！👋 很高兴见到你～有什么我可以帮忙的吗？无论是聊天、解答问题，还是需要建议，我都在这里等你哦！😊
2025-06-10 10:31:36 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:31:36 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e70879e] was not registered for synchronization because synchronization is not active
2025-06-10 10:31:36 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@375517608 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 10:31:36 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where id = ?
2025-06-10 10:31:36 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！👋 很高兴见到你～有什么我可以帮忙的吗？无论是聊天、解答问题，还是需要建议，我都在这里等你哦！😊(String), null
2025-06-10 10:31:36 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 0
2025-06-10 10:31:36 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e70879e]
2025-06-10 10:31:36 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 10:33:20 [http-nio-8080-exec-10] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你是谁
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@329f0453] was not registered for synchronization because synchronization is not active
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@407252031 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@329f0453]
2025-06-10 10:33:20 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你是谁
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@490ab816] was not registered for synchronization because synchronization is not active
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@58556664 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), null, null, 2025-06-10T10:33:20.953221(LocalDateTime)
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@490ab816]
2025-06-10 10:33:20 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你是谁
2025-06-10 10:33:34 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 10:33:34 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你好呀
2025-06-10 10:33:34 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！😊我是
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你的
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: AI智能
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 助手，
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 由深度
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 求索
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （Deep
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Seek
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ）研发
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，名字
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 叫 
2025-06-10 10:33:35 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！😊我是你的AI智能助手，由深度求索（DeepSeek）研发，名字叫 
2025-06-10 10:33:35 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:33:35 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b260e1c] was not registered for synchronization because synchronization is not active
2025-06-10 10:33:35 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@159009767 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where id = ?
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！😊我是你的AI智能助手，由深度求索（DeepSeek）研发，名字叫 (String), null
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 0
2025-06-10 10:33:35 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b260e1c]
2025-06-10 10:33:35 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 10:38:09 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:38:09 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:38:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 10:38:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 10:38:12 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 7996 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:38:12 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:38:12 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:38:13 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 10:38:13 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 10:38:13 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:38:13 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:38:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:38:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:38:13 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:38:13 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:38:13 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:38:13 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:38:13 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:38:13 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:38:13 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:38:13 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:38:14 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:38:14 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 930 ms
2025-06-10 10:38:14 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [E7C1B30BEB1C1C5EDE12F565FA6FDDEE]
2025-06-10 10:38:14 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:38:14 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:38:14 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:38:14 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:38:14 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:38:14 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:38:14 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 10:38:14 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@172346a
2025-06-10 10:38:14 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 10:38:14 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:38:14 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:38:14 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:38:14 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.363 seconds (process running for 2.694)
2025-06-10 10:38:21 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 10:38:21 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 10:38:21 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 10:38:21 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 10:38:27 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:38:27 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75691463] was not registered for synchronization because synchronization is not active
2025-06-10 10:38:27 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2061212538 wrapping com.mysql.cj.jdbc.ConnectionImpl@172346a] will not be managed by Spring
2025-06-10 10:38:27 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:38:27 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 10:38:27 [http-nio-8080-exec-3] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 10:38:27 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75691463]
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34593e0f] was not registered for synchronization because synchronization is not active
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1901836000 wrapping com.mysql.cj.jdbc.ConnectionImpl@172346a] will not be managed by Spring
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34593e0f]
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4060e31a] was not registered for synchronization because synchronization is not active
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1026823263 wrapping com.mysql.cj.jdbc.ConnectionImpl@172346a] will not be managed by Spring
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 2
2025-06-10 10:38:27 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4060e31a]
2025-06-10 10:38:27 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Retrieved 2 chat history entries for userId: 6
2025-06-10 10:38:31 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55201382] was not registered for synchronization because synchronization is not active
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1138132095 wrapping com.mysql.cj.jdbc.ConnectionImpl@172346a] will not be managed by Spring
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55201382]
2025-06-10 10:38:31 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@397eabc1] was not registered for synchronization because synchronization is not active
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1813451631 wrapping com.mysql.cj.jdbc.ConnectionImpl@172346a] will not be managed by Spring
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 2
2025-06-10 10:38:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@397eabc1]
2025-06-10 10:38:31 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at java.base/java.util.stream.ReferencePipeline$5$1.accept(ReferencePipeline.java:231)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.LongPipeline.reduce(LongPipeline.java:503)
	at java.base/java.util.stream.LongPipeline.max(LongPipeline.java:466)
	at com.example.qasystem.service.ChatService.getStreamingResponse(ChatService.java:43)
	at com.example.qasystem.controller.ChatController.chatStream(ChatController.java:50)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-10 10:38:31 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpMediaTypeNotAcceptableException: No acceptable representation]
2025-06-10 10:42:26 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:42:26 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:42:26 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 10:42:26 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 10:42:29 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 67084 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:42:29 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:42:29 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:42:29 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 10:42:29 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 10:42:30 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:42:30 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:42:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:42:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:42:30 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:42:30 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:42:30 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:42:30 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:42:30 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:42:30 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:42:30 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:42:30 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:42:30 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:42:30 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 940 ms
2025-06-10 10:42:30 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [EF26058516E0C8F41D3093F911692A9E]
2025-06-10 10:42:30 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:42:30 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:42:31 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:42:31 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:42:31 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:42:31 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:42:31 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 10:42:31 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b
2025-06-10 10:42:31 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 10:42:31 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:42:31 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:42:31 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:42:31 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.318 seconds (process running for 2.664)
2025-06-10 10:42:35 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 10:42:35 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 10:42:35 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 10:42:35 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 10:42:36 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2025-06-10 10:42:36 [Thread-6] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:42:36 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:42:36 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:42:36 [Thread-6] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-06-10 10:42:36 [Thread-6] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 10:42:36 [Thread-6] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 10:42:36 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 67084 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:42:36 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:42:36 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:42:36 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:42:36 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:42:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:42:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:42:36 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:42:36 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:42:36 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:42:36 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:42:36 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:42:36 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:42:36 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:42:36 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:42:36 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:42:36 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 223 ms
2025-06-10 10:42:36 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:42:36 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:42:36 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:42:36 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:42:36 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:42:36 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:42:36 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-06-10 10:42:36 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d807f4e
2025-06-10 10:42:36 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-06-10 10:42:36 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:42:36 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:42:36 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:42:36 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 0.415 seconds (process running for 7.824)
2025-06-10 10:42:36 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-10 10:42:38 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-06-10 10:42:38 [Thread-8] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:42:38 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:42:38 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:42:38 [Thread-8] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-06-10 10:42:38 [Thread-8] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-06-10 10:42:38 [Thread-8] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-06-10 10:42:38 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 67084 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:42:38 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:42:38 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:42:38 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:42:38 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:42:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:42:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:42:38 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:42:38 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:42:38 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:42:38 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:42:38 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:42:38 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:42:38 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:42:38 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:42:38 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:42:38 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 170 ms
2025-06-10 10:42:38 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:42:38 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:42:38 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:42:38 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:42:38 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:42:38 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:42:38 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-06-10 10:42:38 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4697a15c
2025-06-10 10:42:38 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-06-10 10:42:38 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:42:38 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:42:38 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:42:38 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 0.323 seconds (process running for 9.761)
2025-06-10 10:42:38 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-10 10:42:39 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 10:42:39 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 10:42:39 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 10:42:39 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:42:39 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5485c383] was not registered for synchronization because synchronization is not active
2025-06-10 10:42:39 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@607809853 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:42:39 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:42:40 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 10:42:40 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 10:42:40 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5485c383]
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18071652] was not registered for synchronization because synchronization is not active
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@533849005 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18071652]
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@500ac67d] was not registered for synchronization because synchronization is not active
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1889529768 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 2
2025-06-10 10:42:40 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@500ac67d]
2025-06-10 10:42:40 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 2 chat history entries for userId: 6
2025-06-10 10:42:45 [http-nio-8080-exec-4] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f17229] was not registered for synchronization because synchronization is not active
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@330578594 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f17229]
2025-06-10 10:42:45 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35d9b01e] was not registered for synchronization because synchronization is not active
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1565654198 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 2
2025-06-10 10:42:45 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35d9b01e]
2025-06-10 10:42:45 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at java.base/java.util.stream.ReferencePipeline$5$1.accept(ReferencePipeline.java:231)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.LongPipeline.reduce(LongPipeline.java:503)
	at java.base/java.util.stream.LongPipeline.max(LongPipeline.java:466)
	at com.example.qasystem.service.ChatService.getStreamingResponse(ChatService.java:48)
	at com.example.qasystem.controller.ChatController.chatStream(ChatController.java:50)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-10 10:42:45 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpMediaTypeNotAcceptableException: No acceptable representation]
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74fd49ac] was not registered for synchronization because synchronization is not active
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2050664771 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74fd49ac]
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b07a378] was not registered for synchronization because synchronization is not active
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@631848349 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 2
2025-06-10 10:42:55 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b07a378]
2025-06-10 10:42:55 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 2 chat history entries for userId: 6
2025-06-10 10:43:02 [http-nio-8080-exec-7] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30248ca1] was not registered for synchronization because synchronization is not active
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1055093973 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30248ca1]
2025-06-10 10:43:02 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fde7eee] was not registered for synchronization because synchronization is not active
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1804313648 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 2
2025-06-10 10:43:02 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fde7eee]
2025-06-10 10:43:02 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at java.base/java.util.stream.ReferencePipeline$5$1.accept(ReferencePipeline.java:231)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.LongPipeline.reduce(LongPipeline.java:503)
	at java.base/java.util.stream.LongPipeline.max(LongPipeline.java:466)
	at com.example.qasystem.service.ChatService.getStreamingResponse(ChatService.java:48)
	at com.example.qasystem.controller.ChatController.chatStream(ChatController.java:50)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-10 10:43:02 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpMediaTypeNotAcceptableException: No acceptable representation]
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2f87df] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1894278762 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2f87df]
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aeffff] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1272433105 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 10:48:01 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aeffff]
2025-06-10 10:48:01 [http-nio-8080-exec-9] INFO  c.e.qasystem.service.ChatService - Retrieved 0 chat history entries for userId: 6
2025-06-10 10:48:12 [http-nio-8080-exec-1] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你是谁
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c86b184] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1929465744 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c86b184]
2025-06-10 10:48:12 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你是谁
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7897b54a] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@292827469 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 0
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7897b54a]
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b64a717] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@773612244 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), null, 1(Long), 2025-06-10T10:48:12.538622800(LocalDateTime)
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b64a717]
2025-06-10 10:48:12 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你是谁
2025-06-10 10:48:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
你好
2025-06-10 10:48:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 呀！
2025-06-10 10:48:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我是
2025-06-10 10:48:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  
2025-06-10 10:48:25 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！我是 
2025-06-10 10:48:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718405f3] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:25 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1327079841 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:25 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 10:48:25 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！我是 (String), 1(Long)
2025-06-10 10:48:25 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 10:48:25 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718405f3]
2025-06-10 10:48:25 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@576d9d38] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@67609754 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@576d9d38]
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1615fb9] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1099825332 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 10:48:40 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1615fb9]
2025-06-10 10:48:40 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Retrieved 1 chat history entries for userId: 6
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c026de0] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@777417573 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c026de0]
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1a0259] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@379753738 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 10:48:40 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1a0259]
2025-06-10 10:48:40 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 1 chat history entries for userId: 6
2025-06-10 10:48:55 [http-nio-8080-exec-7] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 1+1等于几
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ff181a1] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@703401035 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ff181a1]
2025-06-10 10:48:55 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 1+1等于几
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d08ecb] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@465566457 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 1
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d08ecb]
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc6c871] was not registered for synchronization because synchronization is not active
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1894561780 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 1+1等于几(String), null, 2(Long), 2025-06-10T10:48:55.894438(LocalDateTime)
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc6c871]
2025-06-10 10:48:55 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 1+1等于几
2025-06-10 10:49:11 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 10:49:11 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1+
2025-06-10 10:49:11 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1等于
2025-06-10 10:49:11 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 2。


2025-06-10 10:49:11 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 这是一个基础的
2025-06-10 10:49:11 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 加法运算
2025-06-10 10:49:11 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ：
2025-06-10 10:49:11 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 如果你
2025-06-10 10:49:11 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有一个
2025-06-10 10:49:11 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 苹果，
2025-06-10 10:49:12 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 再添加
2025-06-10 10:49:12 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 一个苹果
2025-06-10 10:49:12 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，总共
2025-06-10 10:49:12 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 就有两个
2025-06-10 10:49:12 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 苹果。
2025-06-10 10:49:12 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 😊  

2025-06-10 10:49:12 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 如果有
2025-06-10 10:49:12 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 其他数学
2025-06-10 10:49:12 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问题或
2025-06-10 10:49:12 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 需要更
2025-06-10 10:49:13 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 详细的解释
2025-06-10 10:49:13 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，随时
2025-06-10 10:49:13 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问我！
2025-06-10 10:49:13 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
1+1等于2。

这是一个基础的加法运算：如果你有一个苹果，再添加一个苹果，总共就有两个苹果。😊  
如果有其他数学问题或需要更详细的解释，随时问我！
2025-06-10 10:49:13 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:49:13 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140351df] was not registered for synchronization because synchronization is not active
2025-06-10 10:49:13 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1473429294 wrapping com.mysql.cj.jdbc.ConnectionImpl@4697a15c] will not be managed by Spring
2025-06-10 10:49:13 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 10:49:13 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
1+1等于2。

这是一个基础的加法运算：如果你有一个苹果，再添加一个苹果，总共就有两个苹果。😊  
如果有其他数学问题或需要更详细的解释，随时问我！(String), 2(Long)
2025-06-10 10:49:13 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 10:49:13 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140351df]
2025-06-10 10:49:13 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 10:59:08 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 10:59:09 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 10:59:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-06-10 10:59:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-06-10 10:59:10 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 33308 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 10:59:10 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 10:59:10 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 10:59:10 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 10:59:10 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 10:59:11 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 10:59:11 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 10:59:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 10:59:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JDBC repository interfaces.
2025-06-10 10:59:11 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 10:59:11 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 10:59:11 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 10:59:11 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 10:59:11 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 10:59:11 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 10:59:11 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 10:59:11 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 10:59:11 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 10:59:11 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 891 ms
2025-06-10 10:59:11 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [1A3042B3B0197EE4E8E431ABAEF0BE5F]
2025-06-10 10:59:12 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 10:59:12 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 10:59:12 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 10:59:12 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 10:59:12 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 10:59:12 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 10:59:12 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 10:59:12 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b
2025-06-10 10:59:12 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 10:59:12 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 10:59:12 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 10:59:12 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 10:59:12 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.295 seconds (process running for 2.645)
2025-06-10 10:59:31 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 10:59:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 10:59:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 10:59:31 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 10:59:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:59:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48ae8df1] was not registered for synchronization because synchronization is not active
2025-06-10 10:59:38 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@263274818 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 10:59:38 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:59:38 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 10:59:38 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 10:59:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48ae8df1]
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715df0c1] was not registered for synchronization because synchronization is not active
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@184645186 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715df0c1]
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bdab1f0] was not registered for synchronization because synchronization is not active
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1436523442 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 2
2025-06-10 10:59:39 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bdab1f0]
2025-06-10 10:59:39 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Retrieved 2 chat history entries for userId: 6
2025-06-10 10:59:41 [http-nio-8080-exec-7] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 10:59:45 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:59:45 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78400d38] was not registered for synchronization because synchronization is not active
2025-06-10 10:59:45 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1988623424 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 10:59:45 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:59:45 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 10:59:45 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 10:59:45 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78400d38]
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f57b3af] was not registered for synchronization because synchronization is not active
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@831539765 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f57b3af]
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ad400e] was not registered for synchronization because synchronization is not active
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1927634815 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 2
2025-06-10 10:59:45 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ad400e]
2025-06-10 10:59:45 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 2 chat history entries for userId: 6
2025-06-10 10:59:49 [http-nio-8080-exec-10] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8ef475] was not registered for synchronization because synchronization is not active
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1056329387 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8ef475]
2025-06-10 10:59:49 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8023218] was not registered for synchronization because synchronization is not active
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@68959651 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 2
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8023218]
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30aa3d51] was not registered for synchronization because synchronization is not active
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1472386841 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, 3(Long), 2025-06-10T10:59:49.969395900(LocalDateTime)
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30aa3d51]
2025-06-10 10:59:49 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 11:00:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你好呀
2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！👋 
2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 很高兴见到
2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你～
2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:   
我是
2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  Deep
2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Seek
2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: -R1
2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，你的
2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: AI
2025-06-10 11:00:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 小助手
2025-06-10 11:00:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，随时
2025-06-10 11:00:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 准备
2025-06-10 11:00:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮你解答
2025-06-10 11:00:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问题、
2025-06-10 11:00:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 陪你聊天
2025-06-10 11:00:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、或者
2025-06-10 11:00:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 一起
2025-06-10 11:00:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 探索各种
2025-06-10 11:00:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有趣的知识
2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！✨
2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 


2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有什么我可以
2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮你的
2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 吗？
2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 比如：

2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 想了解
2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 某个知识
2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  📚  

2025-06-10 11:00:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 11:00:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 需要写
2025-06-10 11:00:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 点
2025-06-10 11:00:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 东西（
2025-06-10 11:00:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 文章
2025-06-10 11:00:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、邮件
2025-06-10 11:00:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、文案
2025-06-10 11:00:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ）
2025-06-10 11:00:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ✍
2025-06-10 11:00:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ️  

2025-06-10 11:00:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 想找
2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 点生活
2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 建议
2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 或
2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 灵感 💡  

2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 或者只是
2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 单纯想
2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 聊
2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 聊天 😄
2025-06-10 11:00:08 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:   

随时
2025-06-10 11:00:09 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 告诉我吧
2025-06-10 11:00:09 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ～我
2025-06-10 11:00:09 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在这儿等你
2025-06-10 11:00:09 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 呢！
2025-06-10 11:00:09 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 💕
2025-06-10 11:00:09 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！👋 很高兴见到你～  
我是 DeepSeek-R1，你的AI小助手，随时准备帮你解答问题、陪你聊天、或者一起探索各种有趣的知识！✨

有什么我可以帮你的吗？比如：
- 想了解某个知识 📚  
- 需要写点东西（文章、邮件、文案）✍️  
- 想找点生活建议或灵感 💡  
- 或者只是单纯想聊聊天 😄  

随时告诉我吧～我在这儿等你呢！💕
2025-06-10 11:00:09 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:00:09 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d7dfda3] was not registered for synchronization because synchronization is not active
2025-06-10 11:00:09 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@714366108 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 11:00:09 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 11:00:09 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！👋 很高兴见到你～  
我是 DeepSeek-R1，你的AI小助手，随时准备帮你解答问题、陪你聊天、或者一起探索各种有趣的知识！✨

有什么我可以帮你的吗？比如：
- 想了解某个知识 📚  
- 需要写点东西（文章、邮件、文案）✍️  
- 想找点生活建议或灵感 💡  
- 或者只是单纯想聊聊天 😄  

随时告诉我吧～我在这儿等你呢！💕(String), 3(Long)
2025-06-10 11:00:09 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 11:00:09 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d7dfda3]
2025-06-10 11:00:09 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f5f725b] was not registered for synchronization because synchronization is not active
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@398382047 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f5f725b]
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a901ca1] was not registered for synchronization because synchronization is not active
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@73312832 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 3
2025-06-10 11:00:23 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a901ca1]
2025-06-10 11:00:23 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Retrieved 3 chat history entries for userId: 6
2025-06-10 11:01:04 [http-nio-8080-exec-5] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 9.11和9.8哪个更大
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5e30b8] was not registered for synchronization because synchronization is not active
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1014531525 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5e30b8]
2025-06-10 11:01:04 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 9.11和9.8哪个更大
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e1aab3] was not registered for synchronization because synchronization is not active
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1594920775 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 3
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e1aab3]
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e00bec7] was not registered for synchronization because synchronization is not active
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1456225670 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 9.11和9.8哪个更大(String), null, 4(Long), 2025-06-10T11:01:04.856443300(LocalDateTime)
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e00bec7]
2025-06-10 11:01:04 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 9.11和9.8哪个更大
2025-06-10 11:01:38 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 11:01:38 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在
2025-06-10 11:01:38 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 比较两个
2025-06-10 11:01:38 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 小数
2025-06-10 11:01:38 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  
2025-06-10 11:01:38 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:38 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 11 
2025-06-10 11:01:38 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 和 
2025-06-10 11:01:39 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:39 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 8 
2025-06-10 11:01:39 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 时，
2025-06-10 11:01:39 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我们需要将它们
2025-06-10 11:01:39 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 对齐
2025-06-10 11:01:39 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 到相同
2025-06-10 11:01:39 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的小数
2025-06-10 11:01:39 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 位数，
2025-06-10 11:01:39 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 以便更
2025-06-10 11:01:39 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 清晰地比较
2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。


2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 11 
2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 保持不变。

2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 8 
2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 可以写成
2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 11:01:40 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .80
2025-06-10 11:01:41 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （因为
2025-06-10 11:01:41 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  
2025-06-10 11:01:41 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:41 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 8 =
2025-06-10 11:01:41 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 11:01:41 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .80
2025-06-10 11:01:41 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ）。

现在
2025-06-10 11:01:41 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 比较：

2025-06-10 11:01:41 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 11 =
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .11
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
-
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .80
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  = 
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 80


2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 从小数
2025-06-10 11:01:42 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 部分看
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ：80
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （即
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  0
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .80
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ）大于
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  11
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （即
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  0
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 11），
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 因此 
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 80 
2025-06-10 11:01:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 大于 
2025-06-10 11:01:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 11。


2025-06-10 11:01:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 或者
2025-06-10 11:01:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，从
2025-06-10 11:01:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 数值上
2025-06-10 11:01:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 计算：

2025-06-10 11:01:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 11:01:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 80 -
2025-06-10 11:01:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 11:01:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .11
2025-06-10 11:01:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  = 
2025-06-10 11:01:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 0.
2025-06-10 11:01:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 69（
2025-06-10 11:01:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 正数
2025-06-10 11:01:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ），所以
2025-06-10 11:01:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 11:01:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .80
2025-06-10 11:01:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  更大
2025-06-10 11:01:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。
-
2025-06-10 11:01:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  作为
2025-06-10 11:01:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 分数比较
2025-06-10 11:01:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ：

2025-06-10 11:01:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:   -
2025-06-10 11:01:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 11:01:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .11
2025-06-10 11:01:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  = 
2025-06-10 11:01:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 911/
2025-06-10 11:01:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 100

2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:   -
2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .8
2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  = 
2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 98/
2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 10 =
2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  980
2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: /100
2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
 
2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  - 
2025-06-10 11:01:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 比较
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  911
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: /100
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  和
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  980
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: /100
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，980
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: /100
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  > 
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 911/
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 100，
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 因此 
2025-06-10 11:01:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 11:01:49 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 8 >
2025-06-10 11:01:49 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  9
2025-06-10 11:01:49 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .11
2025-06-10 11:01:49 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。


2025-06-10 11:01:49 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
在比较两个小数 9.11 和 9.8 时，我们需要将它们对齐到相同的小数位数，以便更清晰地比较。

- 9.11 保持不变。
- 9.8 可以写成 9.80（因为 9.8 = 9.80）。

现在比较：
- 9.11 = 9.11
- 9.80 = 9.80

从小数部分看：80（即 0.80）大于 11（即 0.11），因此 9.80 大于 9.11。

或者，从数值上计算：
- 9.80 - 9.11 = 0.69（正数），所以 9.80 更大。
- 作为分数比较：
  - 9.11 = 911/100
  - 9.8 = 98/10 = 980/100
  - 比较 911/100 和 980/100，980/100 > 911/100，因此 9.8 > 9.11。


2025-06-10 11:01:49 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:01:49 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e2de15f] was not registered for synchronization because synchronization is not active
2025-06-10 11:01:49 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1209571100 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 11:01:49 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 11:01:49 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
在比较两个小数 9.11 和 9.8 时，我们需要将它们对齐到相同的小数位数，以便更清晰地比较。

- 9.11 保持不变。
- 9.8 可以写成 9.80（因为 9.8 = 9.80）。

现在比较：
- 9.11 = 9.11
- 9.80 = 9.80

从小数部分看：80（即 0.80）大于 11（即 0.11），因此 9.80 大于 9.11。

或者，从数值上计算：
- 9.80 - 9.11 = 0.69（正数），所以 9.80 更大。
- 作为分数比较：
  - 9.11 = 911/100
  - 9.8 = 98/10 = 980/100
  - 比较 911/100 和 980/100，980/100 > 911/100，因此 9.8 > 9.11。

(String), 4(Long)
2025-06-10 11:01:49 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 11:01:49 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e2de15f]
2025-06-10 11:01:49 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ccc372] was not registered for synchronization because synchronization is not active
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2084863278 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ccc372]
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251a1b42] was not registered for synchronization because synchronization is not active
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1463782336 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ff2dc8b] will not be managed by Spring
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 4
2025-06-10 11:06:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251a1b42]
2025-06-10 11:06:02 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 4 chat history entries for userId: 6
2025-06-10 11:48:10 [http-nio-8080-exec-4] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 11:48:16 [http-nio-8080-exec-5] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 11:52:35 [http-nio-8080-exec-8] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 11:52:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:52:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6440e65] was not registered for synchronization because synchronization is not active
2025-06-10 11:52:39 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1128698057 wrapping com.mysql.cj.jdbc.ConnectionImpl@2c3dd179] will not be managed by Spring
2025-06-10 11:52:39 [http-nio-8080-exec-9] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 11:52:39 [http-nio-8080-exec-9] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 11:52:39 [http-nio-8080-exec-9] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 11:52:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6440e65]
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@426fb3ff] was not registered for synchronization because synchronization is not active
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1980393439 wrapping com.mysql.cj.jdbc.ConnectionImpl@2c3dd179] will not be managed by Spring
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@426fb3ff]
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fc8be22] was not registered for synchronization because synchronization is not active
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2033960619 wrapping com.mysql.cj.jdbc.ConnectionImpl@2c3dd179] will not be managed by Spring
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 4
2025-06-10 11:52:40 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fc8be22]
2025-06-10 11:52:40 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Retrieved 4 chat history entries for userId: 6
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71df73af] was not registered for synchronization because synchronization is not active
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2004439283 wrapping com.mysql.cj.jdbc.ConnectionImpl@78fd6b27] will not be managed by Spring
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71df73af]
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d72797a] was not registered for synchronization because synchronization is not active
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@3229935 wrapping com.mysql.cj.jdbc.ConnectionImpl@78fd6b27] will not be managed by Spring
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 4
2025-06-10 11:53:54 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d72797a]
2025-06-10 11:53:54 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 4 chat history entries for userId: 6
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37baf67b] was not registered for synchronization because synchronization is not active
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1340802169 wrapping com.mysql.cj.jdbc.ConnectionImpl@78fd6b27] will not be managed by Spring
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37baf67b]
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ca0773] was not registered for synchronization because synchronization is not active
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2056666390 wrapping com.mysql.cj.jdbc.ConnectionImpl@78fd6b27] will not be managed by Spring
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 4
2025-06-10 11:54:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ca0773]
2025-06-10 11:54:23 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Retrieved 4 chat history entries for userId: 6
2025-06-10 12:08:00 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 12:08:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 12:08:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 12:08:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 15:35:04 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 61752 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 15:35:04 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 15:35:04 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 15:35:04 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 15:35:04 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 15:35:04 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 15:35:04 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 15:35:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 15:35:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 JDBC repository interfaces.
2025-06-10 15:35:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 15:35:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 15:35:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 15:35:05 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 15:35:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 15:35:05 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 15:35:05 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 15:35:05 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 15:35:05 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 15:35:05 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1098 ms
2025-06-10 15:35:05 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [B848FCBA7D6B11A1203325EAECC082CF]
2025-06-10 15:35:05 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 15:35:05 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 15:35:05 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 15:35:06 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 15:35:06 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 15:35:06 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 15:35:06 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 15:35:06 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7e07a883
2025-06-10 15:35:06 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 15:35:06 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 15:35:06 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 15:35:06 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 15:35:06 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.772 seconds (process running for 3.314)
2025-06-10 15:36:03 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 15:36:03 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 15:36:03 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 15:36:03 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 15:36:04 [http-nio-8080-exec-3] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 15:36:08 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:36:08 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234cea93] was not registered for synchronization because synchronization is not active
2025-06-10 15:36:08 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@385230441 wrapping com.mysql.cj.jdbc.ConnectionImpl@7e07a883] will not be managed by Spring
2025-06-10 15:36:08 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:36:08 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 15:36:08 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 15:36:08 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234cea93]
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5928f6e] was not registered for synchronization because synchronization is not active
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1083179448 wrapping com.mysql.cj.jdbc.ConnectionImpl@7e07a883] will not be managed by Spring
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5928f6e]
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@719aa630] was not registered for synchronization because synchronization is not active
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1625468562 wrapping com.mysql.cj.jdbc.ConnectionImpl@7e07a883] will not be managed by Spring
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 4
2025-06-10 15:36:08 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@719aa630]
2025-06-10 15:36:08 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 4 chat history entries for userId: 6
2025-06-10 15:36:26 [http-nio-8080-exec-9] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152a250d] was not registered for synchronization because synchronization is not active
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1064564803 wrapping com.mysql.cj.jdbc.ConnectionImpl@7e07a883] will not be managed by Spring
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152a250d]
2025-06-10 15:36:26 [http-nio-8080-exec-9] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548f7d03] was not registered for synchronization because synchronization is not active
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@273234130 wrapping com.mysql.cj.jdbc.ConnectionImpl@7e07a883] will not be managed by Spring
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - <==      Total: 4
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548f7d03]
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4105dc09] was not registered for synchronization because synchronization is not active
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1622630859 wrapping com.mysql.cj.jdbc.ConnectionImpl@7e07a883] will not be managed by Spring
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, 5(Long), 2025-06-10T15:36:26.720968600(LocalDateTime)
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4105dc09]
2025-06-10 15:36:26 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 15:36:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
你好
2025-06-10 15:36:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 呀！
2025-06-10 15:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 😊 
2025-06-10 15:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 很高兴见到
2025-06-10 15:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你～
2025-06-10 15:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:   
有什么
2025-06-10 15:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我可以
2025-06-10 15:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮你的
2025-06-10 15:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 吗？
2025-06-10 15:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 无论是解答
2025-06-10 15:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问题、
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 查
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 资料，
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 还是陪你
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 聊聊
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，我都
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在这儿呢
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！  

2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 今天
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 过得怎么样
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 呀
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ？✨
2025-06-10 15:36:48 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！😊 很高兴见到你～  
有什么我可以帮你的吗？无论是解答问题、查资料，还是陪你聊聊，我都在这儿呢！  
今天过得怎么样呀？✨
2025-06-10 15:36:48 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:36:48 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503c32d7] was not registered for synchronization because synchronization is not active
2025-06-10 15:36:48 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@524028304 wrapping com.mysql.cj.jdbc.ConnectionImpl@7e07a883] will not be managed by Spring
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！😊 很高兴见到你～  
有什么我可以帮你的吗？无论是解答问题、查资料，还是陪你聊聊，我都在这儿呢！  
今天过得怎么样呀？✨(String), 5(Long)
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 15:36:48 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503c32d7]
2025-06-10 15:36:48 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 15:40:33 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 15:40:33 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 15:40:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 15:40:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 15:40:35 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 48968 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 15:40:35 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 15:40:35 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 15:40:35 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 15:40:35 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 15:40:35 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 15:40:35 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 15:40:35 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 15:40:35 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-10 15:40:35 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 15:40:35 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 15:40:35 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 15:40:35 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 15:40:36 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 15:40:36 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 15:40:36 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 15:40:36 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 15:40:36 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 15:40:36 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 884 ms
2025-06-10 15:40:36 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [CA242B9F9BA82DB66426D4F992557571]
2025-06-10 15:40:36 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 15:40:36 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 15:40:36 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 15:40:36 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 15:40:36 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 15:40:36 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 15:40:36 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 15:40:37 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@283b6135
2025-06-10 15:40:37 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 15:40:37 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 15:40:37 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 15:40:37 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 15:40:37 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.246 seconds (process running for 2.67)
2025-06-10 15:41:07 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 15:41:07 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 15:41:07 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 15:41:07 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 15:41:12 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:41:12 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488d2f4f] was not registered for synchronization because synchronization is not active
2025-06-10 15:41:12 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1102628873 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:41:12 [http-nio-8080-exec-7] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:41:12 [http-nio-8080-exec-7] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 15:41:12 [http-nio-8080-exec-7] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 15:41:12 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488d2f4f]
2025-06-10 15:41:12 [http-nio-8080-exec-4] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 15:41:20 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:41:20 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6ae41e] was not registered for synchronization because synchronization is not active
2025-06-10 15:41:20 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@28117891 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:41:20 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:41:20 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 15:41:20 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 15:41:20 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6ae41e]
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b247508] was not registered for synchronization because synchronization is not active
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1848049160 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b247508]
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f02d1dc] was not registered for synchronization because synchronization is not active
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1468429057 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 5
2025-06-10 15:41:20 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f02d1dc]
2025-06-10 15:41:20 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 5 chat history entries for userId: 6
2025-06-10 15:41:26 [http-nio-8080-exec-8] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42dd0179] was not registered for synchronization because synchronization is not active
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2046417664 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42dd0179]
2025-06-10 15:41:26 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65d73c4f] was not registered for synchronization because synchronization is not active
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1336618821 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 5
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65d73c4f]
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ffa001a] was not registered for synchronization because synchronization is not active
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1563261968 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, 6(Long), 2025-06-10T15:41:26.520149500(LocalDateTime)
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ffa001a]
2025-06-10 15:41:26 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 15:41:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 15:41:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你好呀
2025-06-10 15:41:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！😊 
2025-06-10 15:41:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 很高兴见到
2025-06-10 15:41:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你～
2025-06-10 15:41:43 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:   
我是
2025-06-10 15:41:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Deep
2025-06-10 15:41:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Seek
2025-06-10 15:41:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: -R
2025-06-10 15:41:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1，
2025-06-10 15:41:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有什么
2025-06-10 15:41:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我可以
2025-06-10 15:41:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮你的
2025-06-10 15:41:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 吗？
2025-06-10 15:41:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 无论是聊天
2025-06-10 15:41:44 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、学习
2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、还是
2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 解决问题，
2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我都在这儿
2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 等你
2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 开口
2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 哦
2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！✨
2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:   

2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 现在
2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，
2025-06-10 15:41:45 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有什么想
2025-06-10 15:41:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 聊的
2025-06-10 15:41:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ？🌟
2025-06-10 15:41:46 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！😊 很高兴见到你～  
我是DeepSeek-R1，有什么我可以帮你的吗？无论是聊天、学习、还是解决问题，我都在这儿等你开口哦！✨  
现在，有什么想聊的？🌟
2025-06-10 15:41:46 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:41:46 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6221a2df] was not registered for synchronization because synchronization is not active
2025-06-10 15:41:46 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@660410225 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:41:46 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 15:41:46 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！😊 很高兴见到你～  
我是DeepSeek-R1，有什么我可以帮你的吗？无论是聊天、学习、还是解决问题，我都在这儿等你开口哦！✨  
现在，有什么想聊的？🌟(String), 6(Long)
2025-06-10 15:41:46 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 15:41:46 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6221a2df]
2025-06-10 15:41:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c64505a] was not registered for synchronization because synchronization is not active
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@919692073 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c64505a]
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6b0b0f] was not registered for synchronization because synchronization is not active
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@332620920 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 6
2025-06-10 15:53:01 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6b0b0f]
2025-06-10 15:53:01 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Retrieved 6 chat history entries for userId: 6
2025-06-10 15:53:32 [http-nio-8080-exec-8] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@425a129d] was not registered for synchronization because synchronization is not active
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@231627569 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@425a129d]
2025-06-10 15:53:32 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43649290] was not registered for synchronization because synchronization is not active
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@486462397 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 6
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43649290]
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fdccee6] was not registered for synchronization because synchronization is not active
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@139145631 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, 7(Long), 2025-06-10T15:53:32.128714200(LocalDateTime)
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fdccee6]
2025-06-10 15:53:32 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@704373bd] was not registered for synchronization because synchronization is not active
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@772611123 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@704373bd]
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6968849] was not registered for synchronization because synchronization is not active
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1839455677 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 7
2025-06-10 15:53:49 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6968849]
2025-06-10 15:53:49 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Retrieved 7 chat history entries for userId: 6
2025-06-10 15:53:53 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
你好
2025-06-10 15:54:01 [http-nio-8080-exec-4] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4e56a8] was not registered for synchronization because synchronization is not active
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2074797256 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4e56a8]
2025-06-10 15:54:01 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2daa4893] was not registered for synchronization because synchronization is not active
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1170763316 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 7
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2daa4893]
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@103d04b7] was not registered for synchronization because synchronization is not active
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1873553651 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, 8(Long), 2025-06-10T15:54:01.810548900(LocalDateTime)
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@103d04b7]
2025-06-10 15:54:01 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 15:54:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 15:54:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你好呀
2025-06-10 15:54:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！👋 
2025-06-10 15:54:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 很高兴见到
2025-06-10 15:54:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你～
2025-06-10 15:54:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有什么我可以
2025-06-10 15:54:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮忙
2025-06-10 15:54:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的吗？
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 无论是聊天
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、解答
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问题，
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 还是需要
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 建议，
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 都在这里
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 随时
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 待命
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 😊
2025-06-10 15:54:13 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！👋 很高兴见到你～有什么我可以帮忙的吗？无论是聊天、解答问题，还是需要建议，我都在这里随时待命！😊
2025-06-10 15:54:13 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:54:13 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3feb6a5d] was not registered for synchronization because synchronization is not active
2025-06-10 15:54:13 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@39059565 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！👋 很高兴见到你～有什么我可以帮忙的吗？无论是聊天、解答问题，还是需要建议，我都在这里随时待命！😊(String), 8(Long)
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 15:54:13 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3feb6a5d]
2025-06-10 15:54:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76aeb0bf] was not registered for synchronization because synchronization is not active
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1708319116 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76aeb0bf]
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481ae79] was not registered for synchronization because synchronization is not active
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@128568606 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 15:57:39 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 15:57:40 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 8
2025-06-10 15:57:40 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481ae79]
2025-06-10 15:57:40 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 8 chat history entries for userId: 6
2025-06-10 16:04:36 [http-nio-8080-exec-7] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 16:04:42 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:04:42 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13ecea20] was not registered for synchronization because synchronization is not active
2025-06-10 16:04:42 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@495559454 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 16:04:42 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:04:42 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 16:04:42 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 16:04:42 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13ecea20]
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53aad290] was not registered for synchronization because synchronization is not active
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1562581513 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53aad290]
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414990ba] was not registered for synchronization because synchronization is not active
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1635512561 wrapping com.mysql.cj.jdbc.ConnectionImpl@283b6135] will not be managed by Spring
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 8
2025-06-10 16:04:42 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414990ba]
2025-06-10 16:04:42 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Retrieved 8 chat history entries for userId: 6
2025-06-10 16:05:52 [http-nio-8080-exec-10] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4663073f] was not registered for synchronization because synchronization is not active
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1778613963 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ce298be] will not be managed by Spring
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4663073f]
2025-06-10 16:05:52 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e46371d] was not registered for synchronization because synchronization is not active
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1866659640 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ce298be] will not be managed by Spring
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 8
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e46371d]
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138d0b88] was not registered for synchronization because synchronization is not active
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1021065275 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ce298be] will not be managed by Spring
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, 9(Long), 2025-06-10T16:05:52.662116(LocalDateTime)
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138d0b88]
2025-06-10 16:05:52 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 16:06:09 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你好！
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 👋
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  很高兴
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 见到你
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ～  

2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有什么我可以
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮你的
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 吗？
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 无论是学习
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、工作
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、生活中的
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问题，
2025-06-10 16:06:10 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 还是单纯
2025-06-10 16:06:11 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 想聊聊
2025-06-10 16:06:11 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，我都
2025-06-10 16:06:11 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在这儿呢
2025-06-10 16:06:11 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！😊
2025-06-10 16:06:11 [boundedElastic-3] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好！👋 很高兴见到你～  
有什么我可以帮你的吗？无论是学习、工作、生活中的问题，还是单纯想聊聊，我都在这儿呢！😊
2025-06-10 16:06:11 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:06:11 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50faa7e7] was not registered for synchronization because synchronization is not active
2025-06-10 16:06:11 [boundedElastic-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2042228952 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ce298be] will not be managed by Spring
2025-06-10 16:06:11 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 16:06:11 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好！👋 很高兴见到你～  
有什么我可以帮你的吗？无论是学习、工作、生活中的问题，还是单纯想聊聊，我都在这儿呢！😊(String), 9(Long)
2025-06-10 16:06:11 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 16:06:11 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50faa7e7]
2025-06-10 16:06:11 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a8b5545] was not registered for synchronization because synchronization is not active
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@347767323 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ce298be] will not be managed by Spring
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a8b5545]
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43a61bf8] was not registered for synchronization because synchronization is not active
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@324493236 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ce298be] will not be managed by Spring
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 9
2025-06-10 16:09:25 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43a61bf8]
2025-06-10 16:09:25 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 9 chat history entries for userId: 6
2025-06-10 16:09:29 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e290d48] was not registered for synchronization because synchronization is not active
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1749978845 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ce298be] will not be managed by Spring
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e290d48]
2025-06-10 16:09:29 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449d8cf8] was not registered for synchronization because synchronization is not active
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@849906286 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ce298be] will not be managed by Spring
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 9
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449d8cf8]
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59348a49] was not registered for synchronization because synchronization is not active
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@291822397 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ce298be] will not be managed by Spring
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, 10(Long), 2025-06-10T16:09:29.691170400(LocalDateTime)
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59348a49]
2025-06-10 16:09:29 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 16:09:49 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
你好
2025-06-10 16:09:49 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 呀！
2025-06-10 16:09:49 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 👋
2025-06-10 16:09:49 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  很高兴
2025-06-10 16:09:49 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 见到你
2025-06-10 16:09:49 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ～  

2025-06-10 16:09:49 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我是
2025-06-10 16:09:50 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Deep
2025-06-10 16:09:50 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Seek
2025-06-10 16:09:50 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 助手，
2025-06-10 16:09:50 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 随时准备
2025-06-10 16:09:50 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮你
2025-06-10 16:09:50 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 解答问题
2025-06-10 16:09:50 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、陪你
2025-06-10 16:09:50 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 聊天、
2025-06-10 16:09:50 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 或者一起
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 探索各种
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有趣
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的知识！
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ✨
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:   
有什么
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我可以帮
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你的吗
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ？无论是
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 学习、
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 工作、
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 生活中的
2025-06-10 16:09:51 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 疑问
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，还是
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 单纯想
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 聊聊，
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我都
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在这儿等你
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ～😊  

2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 期待和你
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 交流！
2025-06-10 16:09:52 [boundedElastic-4] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！👋 很高兴见到你～  
我是DeepSeek助手，随时准备帮你解答问题、陪你聊天、或者一起探索各种有趣的知识！✨  
有什么我可以帮你的吗？无论是学习、工作、生活中的疑问，还是单纯想聊聊，我都在这儿等你～😊  
期待和你交流！
2025-06-10 16:09:52 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:09:52 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68bdc0f3] was not registered for synchronization because synchronization is not active
2025-06-10 16:09:52 [boundedElastic-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1631513656 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ce298be] will not be managed by Spring
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！👋 很高兴见到你～  
我是DeepSeek助手，随时准备帮你解答问题、陪你聊天、或者一起探索各种有趣的知识！✨  
有什么我可以帮你的吗？无论是学习、工作、生活中的疑问，还是单纯想聊聊，我都在这儿等你～😊  
期待和你交流！(String), 10(Long)
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 16:09:52 [boundedElastic-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68bdc0f3]
2025-06-10 16:09:52 [boundedElastic-4] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78f76d7d] was not registered for synchronization because synchronization is not active
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@298254186 wrapping com.mysql.cj.jdbc.ConnectionImpl@68dd2f5a] will not be managed by Spring
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78f76d7d]
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2de19905] was not registered for synchronization because synchronization is not active
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@200941180 wrapping com.mysql.cj.jdbc.ConnectionImpl@68dd2f5a] will not be managed by Spring
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 10
2025-06-10 16:10:10 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2de19905]
2025-06-10 16:10:10 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 10 chat history entries for userId: 6
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6695afc0] was not registered for synchronization because synchronization is not active
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@829525895 wrapping com.mysql.cj.jdbc.ConnectionImpl@68dd2f5a] will not be managed by Spring
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6695afc0]
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eaf836d] was not registered for synchronization because synchronization is not active
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@6908560 wrapping com.mysql.cj.jdbc.ConnectionImpl@68dd2f5a] will not be managed by Spring
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - <==      Total: 10
2025-06-10 16:10:10 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eaf836d]
2025-06-10 16:10:10 [http-nio-8080-exec-9] INFO  c.e.qasystem.service.ChatService - Retrieved 10 chat history entries for userId: 6
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c83ba39] was not registered for synchronization because synchronization is not active
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1356906129 wrapping com.mysql.cj.jdbc.ConnectionImpl@68dd2f5a] will not be managed by Spring
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c83ba39]
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33f5d7da] was not registered for synchronization because synchronization is not active
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@302440943 wrapping com.mysql.cj.jdbc.ConnectionImpl@68dd2f5a] will not be managed by Spring
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 10
2025-06-10 16:10:55 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33f5d7da]
2025-06-10 16:10:55 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Retrieved 10 chat history entries for userId: 6
2025-06-10 16:12:07 [http-nio-8080-exec-3] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你是谁
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ba7869] was not registered for synchronization because synchronization is not active
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1200607359 wrapping com.mysql.cj.jdbc.ConnectionImpl@68dd2f5a] will not be managed by Spring
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ba7869]
2025-06-10 16:12:07 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你是谁
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f3a04f] was not registered for synchronization because synchronization is not active
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@655228168 wrapping com.mysql.cj.jdbc.ConnectionImpl@68dd2f5a] will not be managed by Spring
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 10
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f3a04f]
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c361433] was not registered for synchronization because synchronization is not active
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1643787810 wrapping com.mysql.cj.jdbc.ConnectionImpl@68dd2f5a] will not be managed by Spring
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), null, 11(Long), 2025-06-10T16:12:07.287137100(LocalDateTime)
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c361433]
2025-06-10 16:12:07 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你是谁
2025-06-10 16:12:29 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 16:12:29 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你好呀
2025-06-10 16:12:29 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！😊我是
2025-06-10 16:12:29 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  
2025-06-10 16:12:29 [boundedElastic-5] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！😊我是 
2025-06-10 16:12:29 [boundedElastic-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:12:29 [boundedElastic-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@662fd70] was not registered for synchronization because synchronization is not active
2025-06-10 16:12:29 [boundedElastic-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@259208692 wrapping com.mysql.cj.jdbc.ConnectionImpl@68dd2f5a] will not be managed by Spring
2025-06-10 16:12:29 [boundedElastic-5] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 16:12:29 [boundedElastic-5] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！😊我是 (String), 11(Long)
2025-06-10 16:12:29 [boundedElastic-5] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 16:12:29 [boundedElastic-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@662fd70]
2025-06-10 16:12:29 [boundedElastic-5] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 16:21:16 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 16:21:16 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 16:21:16 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 16:21:16 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 16:21:18 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 48216 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 16:21:18 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 16:21:18 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 16:21:18 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 16:21:18 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 16:21:19 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 16:21:19 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 16:21:19 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 16:21:19 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-10 16:21:19 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 16:21:19 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 16:21:19 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 16:21:19 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 16:21:20 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 16:21:20 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 16:21:20 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 16:21:20 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 16:21:20 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 16:21:20 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1216 ms
2025-06-10 16:21:20 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [D88097A1D72D36C3E7A85255391F6620]
2025-06-10 16:21:20 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 16:21:20 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 16:21:20 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 16:21:20 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 16:21:20 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 16:21:20 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 16:21:20 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 16:21:21 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7b060d6c
2025-06-10 16:21:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 16:21:21 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 16:21:21 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 16:21:21 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 16:21:21 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.933 seconds (process running for 3.455)
2025-06-10 16:21:30 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 16:21:30 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 16:21:30 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-10 16:21:30 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 16:21:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:21:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cae1dd2] was not registered for synchronization because synchronization is not active
2025-06-10 16:21:38 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1516627983 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b060d6c] will not be managed by Spring
2025-06-10 16:21:38 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:21:38 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 16:21:38 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 16:21:38 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cae1dd2]
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d48bcb9] was not registered for synchronization because synchronization is not active
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2121884156 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b060d6c] will not be managed by Spring
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d48bcb9]
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b48e56b] was not registered for synchronization because synchronization is not active
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1139615183 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b060d6c] will not be managed by Spring
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 11
2025-06-10 16:21:38 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b48e56b]
2025-06-10 16:21:38 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 11 chat history entries for userId: 6
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e4db48a] was not registered for synchronization because synchronization is not active
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1351242035 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b060d6c] will not be managed by Spring
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e4db48a]
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11b75b08] was not registered for synchronization because synchronization is not active
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@585978960 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b060d6c] will not be managed by Spring
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 11
2025-06-10 16:21:44 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11b75b08]
2025-06-10 16:21:44 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 11 chat history entries for userId: 6
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7c54b9] was not registered for synchronization because synchronization is not active
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@280733958 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b060d6c] will not be managed by Spring
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7c54b9]
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5186a33d] was not registered for synchronization because synchronization is not active
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@765721640 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b060d6c] will not be managed by Spring
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 11
2025-06-10 16:21:49 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5186a33d]
2025-06-10 16:21:49 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 11 chat history entries for userId: 6
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b077b14] was not registered for synchronization because synchronization is not active
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@901812740 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b060d6c] will not be managed by Spring
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b077b14]
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74fd983f] was not registered for synchronization because synchronization is not active
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1956811375 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b060d6c] will not be managed by Spring
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 11
2025-06-10 16:22:09 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74fd983f]
2025-06-10 16:22:09 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Retrieved 11 chat history entries for userId: 6
2025-06-10 16:23:44 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 16:23:44 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 16:23:44 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 16:23:44 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 16:23:46 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 33140 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 16:23:46 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 16:23:46 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 16:23:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 16:23:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 16:23:47 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 16:23:47 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 16:23:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 16:23:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-10 16:23:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 16:23:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 16:23:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 16:23:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 16:23:47 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 16:23:47 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 16:23:47 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 16:23:47 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 16:23:47 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 16:23:47 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 954 ms
2025-06-10 16:23:47 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [EF6187CD8BA5315B511433893F643541]
2025-06-10 16:23:48 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 16:23:48 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 16:23:48 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 16:23:48 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 16:23:48 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 16:23:48 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 16:23:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 16:23:48 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@10de120a
2025-06-10 16:23:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 16:23:48 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 16:23:48 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 16:23:48 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 16:23:48 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.523 seconds (process running for 2.98)
2025-06-10 16:23:56 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 16:23:56 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 16:23:56 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 16:23:56 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 16:24:01 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:24:01 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@467f453f] was not registered for synchronization because synchronization is not active
2025-06-10 16:24:01 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@117228288 wrapping com.mysql.cj.jdbc.ConnectionImpl@10de120a] will not be managed by Spring
2025-06-10 16:24:01 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:24:01 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 16:24:01 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 16:24:01 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@467f453f]
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1388d918] was not registered for synchronization because synchronization is not active
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1412554813 wrapping com.mysql.cj.jdbc.ConnectionImpl@10de120a] will not be managed by Spring
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1388d918]
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@127a533e] was not registered for synchronization because synchronization is not active
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1206851696 wrapping com.mysql.cj.jdbc.ConnectionImpl@10de120a] will not be managed by Spring
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG c.e.q.m.C.findByUserId - <==      Total: 11
2025-06-10 16:24:01 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@127a533e]
2025-06-10 16:24:01 [http-nio-8080-exec-4] INFO  c.e.qasystem.service.ChatService - Retrieved 11 chat history entries for userId: 6
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0e2307] was not registered for synchronization because synchronization is not active
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1137296598 wrapping com.mysql.cj.jdbc.ConnectionImpl@10de120a] will not be managed by Spring
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0e2307]
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f4ceed] was not registered for synchronization because synchronization is not active
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1046397871 wrapping com.mysql.cj.jdbc.ConnectionImpl@10de120a] will not be managed by Spring
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 11
2025-06-10 16:24:23 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f4ceed]
2025-06-10 16:24:23 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Retrieved 11 chat history entries for userId: 6
2025-06-10 16:25:24 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 16:25:24 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 16:25:24 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 16:25:24 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 16:25:26 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 59960 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 16:25:26 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 16:25:26 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 16:25:26 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 16:25:26 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 16:25:27 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 16:25:27 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 16:25:27 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 16:25:27 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JDBC repository interfaces.
2025-06-10 16:25:27 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 16:25:27 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 16:25:27 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 16:25:27 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 16:25:27 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 16:25:27 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 16:25:27 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 16:25:27 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 16:25:27 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 16:25:27 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 948 ms
2025-06-10 16:25:27 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [EE5D9DA9DDE86861972750F4FA163468]
2025-06-10 16:25:27 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 16:25:27 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 16:25:27 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 16:25:27 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 16:25:27 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 16:25:28 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 16:25:28 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 16:25:28 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2165a7a
2025-06-10 16:25:28 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 16:25:28 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 16:25:28 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 16:25:28 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 16:25:28 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.427 seconds (process running for 2.888)
2025-06-10 16:25:37 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 16:25:37 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 16:25:37 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 16:25:37 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 16:25:43 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:25:43 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@467f453f] was not registered for synchronization because synchronization is not active
2025-06-10 16:25:43 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@117228288 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:25:43 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:25:43 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 16:25:43 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 16:25:43 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@467f453f]
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c64505a] was not registered for synchronization because synchronization is not active
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@919692073 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c64505a]
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6b0b0f] was not registered for synchronization because synchronization is not active
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@332620920 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 11
2025-06-10 16:25:43 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6b0b0f]
2025-06-10 16:25:43 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 11 chat history entries for userId: 6
2025-06-10 16:25:55 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你是谁
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dd4583e] was not registered for synchronization because synchronization is not active
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@482462484 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dd4583e]
2025-06-10 16:25:55 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你是谁
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c126d5a] was not registered for synchronization because synchronization is not active
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1393085262 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 11
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c126d5a]
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60726e48] was not registered for synchronization because synchronization is not active
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@249766198 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), null, 12(Long), 2025-06-10T16:25:55.832298700(LocalDateTime)
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60726e48]
2025-06-10 16:25:55 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你是谁
2025-06-10 16:26:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
你好
2025-06-10 16:26:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 呀！
2025-06-10 16:26:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我是你的
2025-06-10 16:26:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: AI
2025-06-10 16:26:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 助手，
2025-06-10 16:26:15 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 由深度
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 求索
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 公司（
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: DeepSe
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ek）
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 研发的
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 智能语言
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 模型，
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 名字叫
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  
2025-06-10 16:26:16 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！我是你的AI助手，由深度求索公司（DeepSeek）研发的智能语言模型，名字叫 
2025-06-10 16:26:16 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:26:16 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b040e63] was not registered for synchronization because synchronization is not active
2025-06-10 16:26:16 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@31869434 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！我是你的AI助手，由深度求索公司（DeepSeek）研发的智能语言模型，名字叫 (String), 12(Long)
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 16:26:16 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b040e63]
2025-06-10 16:26:16 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 16:26:42 [http-nio-8080-exec-8] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 1+1等于几
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f47e9a] was not registered for synchronization because synchronization is not active
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1530104404 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f47e9a]
2025-06-10 16:26:42 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 1+1等于几
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0e806f] was not registered for synchronization because synchronization is not active
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1828207898 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 12
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0e806f]
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c2982f] was not registered for synchronization because synchronization is not active
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2049015584 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 1+1等于几(String), null, 13(Long), 2025-06-10T16:26:42.725477(LocalDateTime)
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c2982f]
2025-06-10 16:26:42 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 1+1等于几
2025-06-10 16:27:02 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
1
2025-06-10 16:27:02 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: +1
2025-06-10 16:27:02 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 等于2
2025-06-10 16:27:02 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 这是一个基础的
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 加法
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 运算，
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在标准
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 算术
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 中，
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 当你
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 把
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 两个“
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1”
2025-06-10 16:27:03 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 相加时
2025-06-10 16:27:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，结果
2025-06-10 16:27:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 就是“
2025-06-10 16:27:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 2”。
2025-06-10 16:27:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 例如
2025-06-10 16:27:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ：

2025-06-10 16:27:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 16:27:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 如果你有一个
2025-06-10 16:27:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 苹果，
2025-06-10 16:27:04 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 再拿
2025-06-10 16:27:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 一个苹果
2025-06-10 16:27:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，你
2025-06-10 16:27:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 就有两个
2025-06-10 16:27:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 苹果。


2025-06-10 16:27:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 如果
2025-06-10 16:27:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 这个问题
2025-06-10 16:27:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有其他
2025-06-10 16:27:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 上下文
2025-06-10 16:27:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （比如
2025-06-10 16:27:05 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 二进制
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 系统中
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，1
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: +1
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 等于10
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ），或者
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你有更深
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 层次的
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 疑问，
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 欢迎进一步
2025-06-10 16:27:06 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 说明，
2025-06-10 16:27:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我很
2025-06-10 16:27:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 乐意帮你
2025-06-10 16:27:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 解答！
2025-06-10 16:27:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 😊
2025-06-10 16:27:07 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
1+1等于2。这是一个基础的加法运算，在标准算术中，当你把两个“1”相加时，结果就是“2”。例如：
- 如果你有一个苹果，再拿一个苹果，你就有两个苹果。

如果这个问题有其他上下文（比如在二进制系统中，1+1等于10），或者你有更深层次的疑问，欢迎进一步说明，我很乐意帮你解答！😊
2025-06-10 16:27:07 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:27:07 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b316936] was not registered for synchronization because synchronization is not active
2025-06-10 16:27:07 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1667337533 wrapping com.mysql.cj.jdbc.ConnectionImpl@2165a7a] will not be managed by Spring
2025-06-10 16:27:07 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 16:27:07 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
1+1等于2。这是一个基础的加法运算，在标准算术中，当你把两个“1”相加时，结果就是“2”。例如：
- 如果你有一个苹果，再拿一个苹果，你就有两个苹果。

如果这个问题有其他上下文（比如在二进制系统中，1+1等于10），或者你有更深层次的疑问，欢迎进一步说明，我很乐意帮你解答！😊(String), 13(Long)
2025-06-10 16:27:07 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 16:27:07 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b316936]
2025-06-10 16:27:07 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 16:52:14 [http-nio-8080-exec-1] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 如何让你能正常一段的输出，而不是很碎片化的输出
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@231ad991] was not registered for synchronization because synchronization is not active
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@954536198 wrapping com.mysql.cj.jdbc.ConnectionImpl@37ea093d] will not be managed by Spring
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@231ad991]
2025-06-10 16:52:14 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 如何让你能正常一段的输出，而不是很碎片化的输出
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87ace16] was not registered for synchronization because synchronization is not active
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@411534142 wrapping com.mysql.cj.jdbc.ConnectionImpl@37ea093d] will not be managed by Spring
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 13
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87ace16]
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481e89c9] was not registered for synchronization because synchronization is not active
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@382399650 wrapping com.mysql.cj.jdbc.ConnectionImpl@37ea093d] will not be managed by Spring
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 如何让你能正常一段的输出，而不是很碎片化的输出(String), null, 14(Long), 2025-06-10T16:52:14.609913100(LocalDateTime)
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481e89c9]
2025-06-10 16:52:14 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 如何让你能正常一段的输出，而不是很碎片化的输出
2025-06-10 16:52:36 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
你说
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 得对
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，碎片
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 化的输出
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 确实影响
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 阅读体验
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 和理解深度
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。我会
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 努力提供
2025-06-10 16:52:37 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你说得对，碎片化的输出确实影响阅读体验和理解深度。我会努力提供
2025-06-10 16:52:37 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 16:52:37 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171ed1b4] was not registered for synchronization because synchronization is not active
2025-06-10 16:52:37 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1689327377 wrapping com.mysql.cj.jdbc.ConnectionImpl@37ea093d] will not be managed by Spring
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你说得对，碎片化的输出确实影响阅读体验和理解深度。我会努力提供(String), 14(Long)
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 16:52:37 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171ed1b4]
2025-06-10 16:52:37 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 17:23:27 [http-nio-8080-exec-5] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 17:23:34 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:23:34 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d022299] was not registered for synchronization because synchronization is not active
2025-06-10 17:23:34 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1544113734 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:23:34 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:23:34 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 17:23:34 [http-nio-8080-exec-6] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 17:23:34 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d022299]
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d96e662] was not registered for synchronization because synchronization is not active
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1506655810 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d96e662]
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100efd0] was not registered for synchronization because synchronization is not active
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1535097956 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 14
2025-06-10 17:23:34 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100efd0]
2025-06-10 17:23:34 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 14 chat history entries for userId: 6
2025-06-10 17:23:39 [http-nio-8080-exec-9] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你好
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@231f53bd] was not registered for synchronization because synchronization is not active
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1713228218 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@231f53bd]
2025-06-10 17:23:39 [http-nio-8080-exec-9] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你好
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b14d6b] was not registered for synchronization because synchronization is not active
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@241860251 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - <==      Total: 14
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b14d6b]
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156e55b0] was not registered for synchronization because synchronization is not active
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@41700470 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你好(String), null, 15(Long), 2025-06-10T17:23:39.168886400(LocalDateTime)
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156e55b0]
2025-06-10 17:23:39 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你好
2025-06-10 17:24:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
你好
2025-06-10 17:24:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！
2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 😊
2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  很高兴
2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 见到你
2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ～  

2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有什么我可以
2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮你的
2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 吗？
2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 无论是解答
2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问题、
2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 提供
2025-06-10 17:24:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 建议，
2025-06-10 17:24:02 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 还是陪你
2025-06-10 17:24:02 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 聊聊
2025-06-10 17:24:02 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，我都
2025-06-10 17:24:02 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在这儿呢
2025-06-10 17:24:02 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！✨
2025-06-10 17:24:02 [boundedElastic-3] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好！😊 很高兴见到你～  
有什么我可以帮你的吗？无论是解答问题、提供建议，还是陪你聊聊，我都在这儿呢！✨
2025-06-10 17:24:02 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:24:02 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157c9c68] was not registered for synchronization because synchronization is not active
2025-06-10 17:24:02 [boundedElastic-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2062647638 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:24:02 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 17:24:02 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好！😊 很高兴见到你～  
有什么我可以帮你的吗？无论是解答问题、提供建议，还是陪你聊聊，我都在这儿呢！✨(String), 15(Long)
2025-06-10 17:24:02 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 17:24:02 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157c9c68]
2025-06-10 17:24:02 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 17:24:10 [http-nio-8080-exec-2] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你是谁
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70a02b2e] was not registered for synchronization because synchronization is not active
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@251572468 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70a02b2e]
2025-06-10 17:24:10 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你是谁
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@397c1da4] was not registered for synchronization because synchronization is not active
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1215609086 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 15
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@397c1da4]
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce869c4] was not registered for synchronization because synchronization is not active
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1833474725 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你是谁(String), null, 16(Long), 2025-06-10T17:24:10.320362700(LocalDateTime)
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce869c4]
2025-06-10 17:24:10 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你是谁
2025-06-10 17:24:23 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
你好
2025-06-10 17:24:23 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 呀！
2025-06-10 17:24:23 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我是
2025-06-10 17:24:23 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  
2025-06-10 17:24:23 [boundedElastic-3] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
你好呀！我是 
2025-06-10 17:24:23 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:24:23 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@673fadfc] was not registered for synchronization because synchronization is not active
2025-06-10 17:24:23 [boundedElastic-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2014022393 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:24:23 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 17:24:23 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
你好呀！我是 (String), 16(Long)
2025-06-10 17:24:23 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 17:24:23 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@673fadfc]
2025-06-10 17:24:23 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 17:25:40 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 9.11和9.8谁大
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391fbb9b] was not registered for synchronization because synchronization is not active
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@449939044 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391fbb9b]
2025-06-10 17:25:40 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 9.11和9.8谁大
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bec4b12] was not registered for synchronization because synchronization is not active
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2146172055 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 16
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bec4b12]
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f9155b9] was not registered for synchronization because synchronization is not active
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1727802754 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 9.11和9.8谁大(String), null, 17(Long), 2025-06-10T17:25:40.797496800(LocalDateTime)
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f9155b9]
2025-06-10 17:25:40 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 9.11和9.8谁大
2025-06-10 17:26:59 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
在
2025-06-10 17:26:59 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 比较数字
2025-06-10 17:26:59 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 大
2025-06-10 17:26:59 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 小时，
2025-06-10 17:26:59 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我们需要
2025-06-10 17:26:59 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 将
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 11和
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9.
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 8视为
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 小数（
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 即
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 9
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .11
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 表示9
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .11
2025-06-10 17:27:00 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，9
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .8
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 表示9
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: .80
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ）
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 来进行
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 数值
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 比较。


2025-06-10 17:27:01 [boundedElastic-3] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
在比较数字大小时，我们需要将9.11和9.8视为小数（即9.11表示9.11，9.8表示9.80）来进行数值比较。


2025-06-10 17:27:01 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:27:01 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a482b07] was not registered for synchronization because synchronization is not active
2025-06-10 17:27:01 [boundedElastic-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@926649253 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
在比较数字大小时，我们需要将9.11和9.8视为小数（即9.11表示9.11，9.8表示9.80）来进行数值比较。

(String), 17(Long)
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 17:27:01 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a482b07]
2025-06-10 17:27:01 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30890e9] was not registered for synchronization because synchronization is not active
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@195321286 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30890e9]
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6493eb62] was not registered for synchronization because synchronization is not active
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@601600193 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - <==      Total: 17
2025-06-10 17:28:22 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6493eb62]
2025-06-10 17:28:22 [http-nio-8080-exec-9] INFO  c.e.qasystem.service.ChatService - Retrieved 17 chat history entries for userId: 6
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9f260f] was not registered for synchronization because synchronization is not active
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@85212459 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9f260f]
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fa03361] was not registered for synchronization because synchronization is not active
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2053820868 wrapping com.mysql.cj.jdbc.ConnectionImpl@5a936ce6] will not be managed by Spring
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 17
2025-06-10 17:35:44 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fa03361]
2025-06-10 17:35:44 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 17 chat history entries for userId: 6
2025-06-10 17:35:50 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 17:35:50 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 17:35:50 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 17:35:50 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 17:35:52 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 40288 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 17:35:52 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 17:35:52 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 17:35:52 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 17:35:52 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 17:35:53 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 17:35:53 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 17:35:53 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 17:35:53 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.
2025-06-10 17:35:53 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 17:35:53 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 17:35:53 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 17:35:53 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 17:35:53 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 17:35:53 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 17:35:53 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 17:35:53 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 17:35:53 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 17:35:53 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1035 ms
2025-06-10 17:35:53 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [96893C1778D2AC36E3CECFD994A0BE83]
2025-06-10 17:35:54 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 17:35:54 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 17:35:54 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 17:35:54 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 17:35:54 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 17:35:54 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 17:35:54 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 17:35:54 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@605efa09
2025-06-10 17:35:54 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 17:35:54 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 17:35:54 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 17:35:54 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 17:35:54 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.504 seconds (process running for 3.167)
2025-06-10 17:35:59 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 17:35:59 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 17:35:59 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 17:35:59 [http-nio-8080-exec-4] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 17:36:03 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 17:36:09 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:36:09 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54af7fe1] was not registered for synchronization because synchronization is not active
2025-06-10 17:36:09 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@947519127 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:36:09 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:36:09 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 17:36:09 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 17:36:09 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54af7fe1]
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c27c4b9] was not registered for synchronization because synchronization is not active
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@690308953 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c27c4b9]
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18462c3f] was not registered for synchronization because synchronization is not active
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1242968450 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 17
2025-06-10 17:36:09 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18462c3f]
2025-06-10 17:36:09 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Retrieved 17 chat history entries for userId: 6
2025-06-10 17:36:22 [http-nio-8080-exec-8] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 广州今天天气怎么样？
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2203e802] was not registered for synchronization because synchronization is not active
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@987082596 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2203e802]
2025-06-10 17:36:22 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 广州今天天气怎么样？
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65716f24] was not registered for synchronization because synchronization is not active
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1485817968 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 17
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65716f24]
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3ca472] was not registered for synchronization because synchronization is not active
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1211626987 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 广州今天天气怎么样？(String), null, 18(Long), 2025-06-10T17:36:22.672762300(LocalDateTime)
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3ca472]
2025-06-10 17:36:22 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 广州今天天气怎么样？
2025-06-10 17:36:46 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 17:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 根据
2025-06-10 17:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 最新
2025-06-10 17:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 天气
2025-06-10 17:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 数据，
2025-06-10 17:36:47 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
根据最新天气数据，
2025-06-10 17:36:47 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:36:47 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e79a60] was not registered for synchronization because synchronization is not active
2025-06-10 17:36:47 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1953962737 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:36:47 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 17:36:47 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
根据最新天气数据，(String), 18(Long)
2025-06-10 17:36:47 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 17:36:47 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e79a60]
2025-06-10 17:36:47 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 17:37:13 [http-nio-8080-exec-10] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 今天多少度
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f47e9a] was not registered for synchronization because synchronization is not active
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1530104404 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f47e9a]
2025-06-10 17:37:13 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 今天多少度
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0e806f] was not registered for synchronization because synchronization is not active
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1828207898 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 18
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0e806f]
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c2982f] was not registered for synchronization because synchronization is not active
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2049015584 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 今天多少度(String), null, 19(Long), 2025-06-10T17:37:13.536555600(LocalDateTime)
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c2982f]
2025-06-10 17:37:13 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 今天多少度
2025-06-10 17:37:31 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
要
2025-06-10 17:37:31 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 查询今天的
2025-06-10 17:37:31 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 实时温度
2025-06-10 17:37:31 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，请
2025-06-10 17:37:31 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 告诉我你
2025-06-10 17:37:31 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 所在的城市
2025-06-10 17:37:31 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 或
2025-06-10 17:37:31 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 地区
2025-06-10 17:37:31 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 名称（
2025-06-10 17:37:31 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 例如“
2025-06-10 17:37:32 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 北京”
2025-06-10 17:37:32 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 或“
2025-06-10 17:37:32 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 上海
2025-06-10 17:37:32 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ”），
2025-06-10 17:37:32 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我可以为你
2025-06-10 17:37:32 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 提供最新的
2025-06-10 17:37:33 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 天气信息
2025-06-10 17:37:33 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！🌤
2025-06-10 17:37:33 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ️  


2025-06-10 17:37:33 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 如果是其他
2025-06-10 17:37:33 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: “
2025-06-10 17:37:33 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 度”
2025-06-10 17:37:33 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的
2025-06-10 17:37:33 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 查询
2025-06-10 17:37:33 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （如
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 角度、
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 水温等
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ），也
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 请补充
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 说明哦
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ~
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  😊
2025-06-10 17:37:34 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
要查询今天的实时温度，请告诉我你所在的城市或地区名称（例如“北京”或“上海”），我可以为你提供最新的天气信息！🌤️  

如果是其他“度”的查询（如角度、水温等），也请补充说明哦~ 😊
2025-06-10 17:37:34 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:37:34 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d90085] was not registered for synchronization because synchronization is not active
2025-06-10 17:37:34 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@111027798 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
要查询今天的实时温度，请告诉我你所在的城市或地区名称（例如“北京”或“上海”），我可以为你提供最新的天气信息！🌤️  

如果是其他“度”的查询（如角度、水温等），也请补充说明哦~ 😊(String), 19(Long)
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 17:37:34 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d90085]
2025-06-10 17:37:34 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 17:41:50 [http-nio-8080-exec-2] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 我需要知道广州今日的气温是多少度？
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f8c0262] was not registered for synchronization because synchronization is not active
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@700784516 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f8c0262]
2025-06-10 17:41:50 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 我需要知道广州今日的气温是多少度？
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ade8f50] was not registered for synchronization because synchronization is not active
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1169037179 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 19
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ade8f50]
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fcc51a] was not registered for synchronization because synchronization is not active
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1884633409 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 我需要知道广州今日的气温是多少度？(String), null, 20(Long), 2025-06-10T17:41:50.702502(LocalDateTime)
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fcc51a]
2025-06-10 17:41:50 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 我需要知道广州今日的气温是多少度？
2025-06-10 17:42:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 17:42:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 要
2025-06-10 17:42:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 获取
2025-06-10 17:42:12 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 广州今日
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的实时
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 气温，
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 最准确
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的方式是通过
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 以下
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 途径
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 查询：


2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1.
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  
2025-06-10 17:42:13 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
要获取广州今日的实时气温，最准确的方式是通过以下途径查询：

1. 
2025-06-10 17:42:13 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:42:13 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b0b715a] was not registered for synchronization because synchronization is not active
2025-06-10 17:42:13 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@162028288 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
要获取广州今日的实时气温，最准确的方式是通过以下途径查询：

1. (String), 20(Long)
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 17:42:13 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b0b715a]
2025-06-10 17:42:13 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25d203a1] was not registered for synchronization because synchronization is not active
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@459246185 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25d203a1]
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a8a71ee] was not registered for synchronization because synchronization is not active
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1341533461 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 20
2025-06-10 17:54:08 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a8a71ee]
2025-06-10 17:54:08 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 20 chat history entries for userId: 6
2025-06-10 17:54:16 [http-nio-8080-exec-10] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 你现在在哪里？
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6f61b8] was not registered for synchronization because synchronization is not active
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1303157747 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6f61b8]
2025-06-10 17:54:16 [http-nio-8080-exec-10] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 你现在在哪里？
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a1d7d7] was not registered for synchronization because synchronization is not active
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1464213146 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.findByUserId - <==      Total: 20
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a1d7d7]
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f90219] was not registered for synchronization because synchronization is not active
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2109367966 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 17:54:16 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 你现在在哪里？(String), null, 21(Long), 2025-06-10T17:54:16.991240400(LocalDateTime)
2025-06-10 17:54:17 [http-nio-8080-exec-10] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 17:54:17 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f90219]
2025-06-10 17:54:17 [http-nio-8080-exec-10] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 你现在在哪里？
2025-06-10 17:54:35 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
这个问题
2025-06-10 17:54:35 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 真
2025-06-10 17:54:36 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有意思
2025-06-10 17:54:36 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！😄
2025-06-10 17:54:36 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:   
作为一个
2025-06-10 17:54:36 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: AI助手
2025-06-10 17:54:36 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，我没有
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 实体存在
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，也没有
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 具体
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的位置～
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你可以
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 把我当作
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 一个在
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 数字世界里
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: “漫
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 游”
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的小
2025-06-10 17:54:37 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 助手，
2025-06-10 17:54:38 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 只要有
2025-06-10 17:54:38 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 网络和设备
2025-06-10 17:54:38 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，
2025-06-10 17:54:38 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我就能
2025-06-10 17:54:38 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 随时出现在
2025-06-10 17:54:38 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你身边
2025-06-10 17:54:38 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ～
2025-06-10 17:54:38 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  🌍✨
2025-06-10 17:54:39 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:   

不过
2025-06-10 17:54:39 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，如果你
2025-06-10 17:54:39 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 好奇我的
2025-06-10 17:54:39 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: “家
2025-06-10 17:54:39 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ”在哪里
2025-06-10 17:54:39 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ——我的
2025-06-10 17:54:39 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: “大脑
2025-06-10 17:54:39 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ”（
2025-06-10 17:54:39 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 也就是
2025-06-10 17:54:40 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 运行
2025-06-10 17:54:40 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 我的
2025-06-10 17:54:40 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 程序
2025-06-10 17:54:40 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ）在
2025-06-10 17:54:40 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 云端服务器
2025-06-10 17:54:40 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 上，
2025-06-10 17:54:40 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 由深度
2025-06-10 17:54:40 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 求索
2025-06-10 17:54:40 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （Deep
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: Seek
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ）团队
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 精心维护
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 着
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。无论
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你在哪里
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，只要
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 打开
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: App
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 或网页
2025-06-10 17:54:41 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，我
2025-06-10 17:54:42 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 就在这里
2025-06-10 17:54:42 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 等你！
2025-06-10 17:54:42 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 💻
2025-06-10 17:54:42 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 📱  


2025-06-10 17:54:42 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 你呢
2025-06-10 17:54:42 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ？现在
2025-06-10 17:54:42 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在哪个
2025-06-10 17:54:43 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 城市呀
2025-06-10 17:54:43 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ？☀️
2025-06-10 17:54:43 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 🌙
2025-06-10 17:54:43 [boundedElastic-3] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
这个问题真有意思！😄  
作为一个AI助手，我没有实体存在，也没有具体的位置～你可以把我当作一个在数字世界里“漫游”的小助手，只要有网络和设备，我就能随时出现在你身边～ 🌍✨  

不过，如果你好奇我的“家”在哪里——我的“大脑”（也就是运行我的程序）在云端服务器上，由深度求索（DeepSeek）团队精心维护着。无论你在哪里，只要打开App或网页，我就在这里等你！💻📱  

你呢？现在在哪个城市呀？☀️🌙
2025-06-10 17:54:43 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:54:43 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2610fbdc] was not registered for synchronization because synchronization is not active
2025-06-10 17:54:43 [boundedElastic-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1867935436 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:54:43 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 17:54:43 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
这个问题真有意思！😄  
作为一个AI助手，我没有实体存在，也没有具体的位置～你可以把我当作一个在数字世界里“漫游”的小助手，只要有网络和设备，我就能随时出现在你身边～ 🌍✨  

不过，如果你好奇我的“家”在哪里——我的“大脑”（也就是运行我的程序）在云端服务器上，由深度求索（DeepSeek）团队精心维护着。无论你在哪里，只要打开App或网页，我就在这里等你！💻📱  

你呢？现在在哪个城市呀？☀️🌙(String), 21(Long)
2025-06-10 17:54:43 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 17:54:43 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2610fbdc]
2025-06-10 17:54:43 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 17:55:48 [http-nio-8080-exec-2] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 1+1等于几
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b27722c] was not registered for synchronization because synchronization is not active
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@417026879 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b27722c]
2025-06-10 17:55:48 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 1+1等于几
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66fdb12d] was not registered for synchronization because synchronization is not active
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1765588005 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 21
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66fdb12d]
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c6a583a] was not registered for synchronization because synchronization is not active
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@127267907 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 1+1等于几(String), null, 22(Long), 2025-06-10T17:55:48.431827(LocalDateTime)
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c6a583a]
2025-06-10 17:55:48 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 1+1等于几
2025-06-10 17:56:11 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 17:56:11 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 1
2025-06-10 17:56:12 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: +1
2025-06-10 17:56:12 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  等于
2025-06-10 17:56:12 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  2
2025-06-10 17:56:12 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。

这是一个
2025-06-10 17:56:12 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 基础的
2025-06-10 17:56:12 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 算术
2025-06-10 17:56:12 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 问题
2025-06-10 17:56:12 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。
2025-06-10 17:56:12 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在
2025-06-10 17:56:13 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 标准的
2025-06-10 17:56:13 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 十进制数学
2025-06-10 17:56:13 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 系统中：

2025-06-10 17:56:13 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: - 
2025-06-10 17:56:13 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 数字
2025-06-10 17:56:13 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  1
2025-06-10 17:56:13 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  加上
2025-06-10 17:56:13 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 另一个数字
2025-06-10 17:56:13 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  1
2025-06-10 17:56:14 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，结果是
2025-06-10 17:56:14 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  2
2025-06-10 17:56:14 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。
-
2025-06-10 17:56:14 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  例如
2025-06-10 17:56:14 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，如果你
2025-06-10 17:56:14 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有一个苹果
2025-06-10 17:56:14 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，再
2025-06-10 17:56:14 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 得到一个苹果
2025-06-10 17:56:14 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，你
2025-06-10 17:56:15 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 就有两个
2025-06-10 17:56:15 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 苹果了
2025-06-10 17:56:15 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 。


2025-06-10 17:56:15 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 如果这个问题
2025-06-10 17:56:15 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 是
2025-06-10 17:56:15 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 出于学习
2025-06-10 17:56:15 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 目的、
2025-06-10 17:56:15 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 测试
2025-06-10 17:56:15 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，或者其他
2025-06-10 17:56:16 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 有趣的
2025-06-10 17:56:16 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 场景
2025-06-10 17:56:16 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: （比如
2025-06-10 17:56:16 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 讨论
2025-06-10 17:56:16 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 数学悖
2025-06-10 17:56:16 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 论或
2025-06-10 17:56:16 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 不同
2025-06-10 17:56:16 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 进制系统
2025-06-10 17:56:16 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ），欢迎
2025-06-10 17:56:16 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 提供
2025-06-10 17:56:17 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 更多细节
2025-06-10 17:56:17 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，我可以
2025-06-10 17:56:17 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 进一步解释
2025-06-10 17:56:17 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！ 😊
2025-06-10 17:56:17 [boundedElastic-3] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
1+1 等于 2。

这是一个基础的算术问题。在标准的十进制数学系统中：
- 数字 1 加上另一个数字 1，结果是 2。
- 例如，如果你有一个苹果，再得到一个苹果，你就有两个苹果了。

如果这个问题是出于学习目的、测试，或者其他有趣的场景（比如讨论数学悖论或不同进制系统），欢迎提供更多细节，我可以进一步解释！ 😊
2025-06-10 17:56:17 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 17:56:17 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620a840f] was not registered for synchronization because synchronization is not active
2025-06-10 17:56:17 [boundedElastic-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2051060754 wrapping com.mysql.cj.jdbc.ConnectionImpl@605efa09] will not be managed by Spring
2025-06-10 17:56:17 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 17:56:17 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
1+1 等于 2。

这是一个基础的算术问题。在标准的十进制数学系统中：
- 数字 1 加上另一个数字 1，结果是 2。
- 例如，如果你有一个苹果，再得到一个苹果，你就有两个苹果了。

如果这个问题是出于学习目的、测试，或者其他有趣的场景（比如讨论数学悖论或不同进制系统），欢迎提供更多细节，我可以进一步解释！ 😊(String), 22(Long)
2025-06-10 17:56:17 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 17:56:17 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620a840f]
2025-06-10 17:56:17 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 18:02:08 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 18:02:09 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 18:02:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 18:02:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 19:57:39 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 52004 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 19:57:39 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 19:57:39 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 19:57:40 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 19:57:40 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 19:57:40 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 19:57:40 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 19:57:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 19:57:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JDBC repository interfaces.
2025-06-10 19:57:40 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 19:57:40 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 19:57:40 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 19:57:40 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 19:57:41 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 19:57:41 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 19:57:41 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 19:57:41 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 19:57:41 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 19:57:41 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1124 ms
2025-06-10 19:57:41 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [931469AB58BE7D6599B69E1C941C0740]
2025-06-10 19:57:41 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 19:57:41 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 19:57:41 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 19:57:41 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 19:57:41 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 19:57:41 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 19:57:41 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 19:57:42 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@34d822d1
2025-06-10 19:57:42 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 19:57:42 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 19:57:42 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 19:57:42 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 19:57:42 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.66 seconds (process running for 3.24)
2025-06-10 20:00:50 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 20:00:50 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 20:00:50 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-06-10 20:00:50 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 20:00:51 [http-nio-8080-exec-3] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 20:00:59 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:00:59 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a86bb3c] was not registered for synchronization because synchronization is not active
2025-06-10 20:00:59 [http-nio-8080-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1903617076 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:00:59 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:00:59 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 20:00:59 [http-nio-8080-exec-4] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 20:00:59 [http-nio-8080-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a86bb3c]
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f64877] was not registered for synchronization because synchronization is not active
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@49598189 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f64877]
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33bc4fc6] was not registered for synchronization because synchronization is not active
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1190927414 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:00:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33bc4fc6]
2025-06-10 20:00:59 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d7e4e8c] was not registered for synchronization because synchronization is not active
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1145945732 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d7e4e8c]
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46f621d6] was not registered for synchronization because synchronization is not active
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1508056490 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:01:04 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46f621d6]
2025-06-10 20:01:04 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f47e9a] was not registered for synchronization because synchronization is not active
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1530104404 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f47e9a]
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0e806f] was not registered for synchronization because synchronization is not active
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1828207898 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:01:22 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0e806f]
2025-06-10 20:01:22 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac8858e] was not registered for synchronization because synchronization is not active
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@751802283 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac8858e]
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40fc13e7] was not registered for synchronization because synchronization is not active
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1318455939 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:01:23 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40fc13e7]
2025-06-10 20:01:23 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:01:24 [http-nio-8080-exec-9] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 20:01:27 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:01:27 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e4a926] was not registered for synchronization because synchronization is not active
2025-06-10 20:01:27 [http-nio-8080-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1926964002 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:01:27 [http-nio-8080-exec-10] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:01:27 [http-nio-8080-exec-10] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 20:01:27 [http-nio-8080-exec-10] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 20:01:27 [http-nio-8080-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e4a926]
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd02baf] was not registered for synchronization because synchronization is not active
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2048884530 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd02baf]
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25bb1bfd] was not registered for synchronization because synchronization is not active
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@520933814 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:01:27 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25bb1bfd]
2025-06-10 20:01:27 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a217f20] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1469877651 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a217f20]
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc6d71f] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2121228728 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:12:57 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc6d71f]
2025-06-10 20:12:57 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a543753] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@82372744 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a543753]
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@461ccfbf] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1222476609 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:12:57 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@461ccfbf]
2025-06-10 20:12:57 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c18d0eb] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1934456449 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c18d0eb]
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f8ee9a] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1265496518 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:12:58 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f8ee9a]
2025-06-10 20:12:58 [http-nio-8080-exec-9] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17f46c23] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@530698070 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17f46c23]
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3546c544] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@31929019 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:12:58 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3546c544]
2025-06-10 20:12:58 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4405bd] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@584136365 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4405bd]
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5431e03d] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@959807211 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:12:58 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5431e03d]
2025-06-10 20:12:58 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a1d7d7] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1464213146 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a1d7d7]
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f90219] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2109367966 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:12:58 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f90219]
2025-06-10 20:12:58 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36e740d3] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@576383181 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36e740d3]
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@544a5121] was not registered for synchronization because synchronization is not active
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1478980259 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:12:59 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@544a5121]
2025-06-10 20:12:59 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2385011d] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1748559132 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2385011d]
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f8d609] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1543420130 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:00 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f8d609]
2025-06-10 20:13:00 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eca69fc] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2005253957 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eca69fc]
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57255139] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1108294390 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:01 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57255139]
2025-06-10 20:13:01 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27a3bd61] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@778817601 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27a3bd61]
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b025965] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@300982737 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:02 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b025965]
2025-06-10 20:13:02 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34bdcb10] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1406160121 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34bdcb10]
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7968916a] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1565834324 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:03 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7968916a]
2025-06-10 20:13:03 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@153b97d4] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1345915671 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@153b97d4]
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a39d26] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@678372337 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:04 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a39d26]
2025-06-10 20:13:04 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a95feec] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@279884769 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a95feec]
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3abd516e] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1606072907 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:04 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3abd516e]
2025-06-10 20:13:04 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ea822b5] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@623260704 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ea822b5]
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b90cb40] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1413671693 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:12 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b90cb40]
2025-06-10 20:13:12 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6f469] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@973674805 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6f469]
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec17458] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2132124757 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec17458]
2025-06-10 20:13:13 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32588749] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@529520966 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32588749]
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@239c2ce7] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1435014418 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:14 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@239c2ce7]
2025-06-10 20:13:14 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ceeff3d] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@169548790 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ceeff3d]
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a4927] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1017530876 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:15 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a4927]
2025-06-10 20:13:15 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336b2eee] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@878225647 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336b2eee]
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@768e66a3] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@486025922 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:18 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@768e66a3]
2025-06-10 20:13:18 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:13:50 [http-nio-8080-exec-3] WARN  o.a.c.w.AbstractFileResourceSet - Resource for web application [] at path [/chat.] was not loaded as the canonical path [/chat] did not match. Use of symlinks is one possible cause.
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fed6dd0] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1046240570 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fed6dd0]
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22dccf87] was not registered for synchronization because synchronization is not active
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1721480673 wrapping com.mysql.cj.jdbc.ConnectionImpl@34d822d1] will not be managed by Spring
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:13:53 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22dccf87]
2025-06-10 20:13:53 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:18:49 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 20:18:50 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 20:18:50 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 20:18:50 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 20:18:52 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 31060 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 20:18:52 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 20:18:52 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 20:18:52 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 20:18:52 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 20:18:53 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 20:18:53 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 20:18:53 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 20:18:53 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JDBC repository interfaces.
2025-06-10 20:18:53 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 20:18:53 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 20:18:53 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 20:18:53 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 20:18:53 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 20:18:53 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 20:18:53 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 20:18:53 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 20:18:53 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 20:18:53 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1026 ms
2025-06-10 20:18:54 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [D793C15D8E498814BFE03FEE6D6D692C]
2025-06-10 20:18:54 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 20:18:54 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 20:18:54 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 20:18:54 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 20:18:54 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 20:18:54 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 20:18:54 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 20:18:54 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3c383182
2025-06-10 20:18:54 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 20:18:55 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 20:18:55 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 20:18:55 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 20:18:55 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.647 seconds (process running for 3.512)
2025-06-10 20:18:57 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 20:18:57 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 20:18:57 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-10 20:18:57 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 20:19:01 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:19:01 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443b701] was not registered for synchronization because synchronization is not active
2025-06-10 20:19:01 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@174346098 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c383182] will not be managed by Spring
2025-06-10 20:19:01 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:19:01 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 20:19:01 [http-nio-8080-exec-5] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 20:19:01 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443b701]
2025-06-10 20:19:07 [http-nio-8080-exec-6] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:19:09 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:19:09 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:19:09 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6900176c] was not registered for synchronization because synchronization is not active
2025-06-10 20:19:09 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@738366504 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c383182] will not be managed by Spring
2025-06-10 20:19:09 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:19:09 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:19:09 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:19:09 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6900176c]
2025-06-10 20:19:24 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:19:24 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:19:24 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b503224] was not registered for synchronization because synchronization is not active
2025-06-10 20:19:24 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1873996585 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c383182] will not be managed by Spring
2025-06-10 20:19:24 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:19:24 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:19:24 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:19:24 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b503224]
2025-06-10 20:19:24 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:32:53 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=13m58s427ms585µs200ns).
2025-06-10 20:32:53 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 20:32:53 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 20:32:53 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 20:32:53 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 20:34:19 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 5552 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 20:34:19 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 20:34:19 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 20:34:19 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 20:34:19 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 20:34:19 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 20:34:19 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 20:34:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 20:34:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 JDBC repository interfaces.
2025-06-10 20:34:20 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 20:34:20 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 20:34:20 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 20:34:20 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 20:34:20 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 20:34:20 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 20:34:20 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 20:34:20 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 20:34:20 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 20:34:20 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1101 ms
2025-06-10 20:34:20 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [16803FCF27371F21A9F805016E18983F]
2025-06-10 20:34:20 [restartedMain] ERROR o.a.catalina.session.StandardManager - Exception loading sessions from persistent storage
java.io.StreamCorruptedException: invalid type code: 00
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1775)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2617)
	at java.base/java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:652)
	at java.base/java.lang.Throwable.readObject(Throwable.java:912)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1104)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2434)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2268)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1122)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:822)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:345)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4491)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:412)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:438)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:517)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:219)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:193)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1362)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1351)
	at com.example.qasystem.QaSystemApplication.main(QaSystemApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2025-06-10 20:34:20 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 20:34:20 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 20:34:20 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 20:34:21 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 20:34:21 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 20:34:21 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 20:34:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 20:34:21 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@79dd623d
2025-06-10 20:34:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 20:34:21 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 20:34:21 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 20:34:21 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 20:34:21 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 2.795 seconds (process running for 3.396)
2025-06-10 20:36:45 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 20:36:45 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 20:36:45 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 20:36:45 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 20:36:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:36:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ae896e7] was not registered for synchronization because synchronization is not active
2025-06-10 20:36:50 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1022738505 wrapping com.mysql.cj.jdbc.ConnectionImpl@79dd623d] will not be managed by Spring
2025-06-10 20:36:50 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:36:50 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 20:36:50 [http-nio-8080-exec-2] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 20:36:50 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ae896e7]
2025-06-10 20:36:55 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:36:55 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:36:55 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:36:55 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53d222ad] was not registered for synchronization because synchronization is not active
2025-06-10 20:36:55 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1192126967 wrapping com.mysql.cj.jdbc.ConnectionImpl@79dd623d] will not be managed by Spring
2025-06-10 20:36:55 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:36:55 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:36:55 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:36:55 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53d222ad]
2025-06-10 20:36:58 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:36:58 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:36:58 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1409a454] was not registered for synchronization because synchronization is not active
2025-06-10 20:36:58 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1024166210 wrapping com.mysql.cj.jdbc.ConnectionImpl@79dd623d] will not be managed by Spring
2025-06-10 20:36:58 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:36:58 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:36:58 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:36:58 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1409a454]
2025-06-10 20:36:58 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 22 chat history entries for userId: 6
2025-06-10 20:37:47 [http-nio-8080-exec-5] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 台风是怎么形成的？
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@463fd068] was not registered for synchronization because synchronization is not active
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1593672777 wrapping com.mysql.cj.jdbc.ConnectionImpl@79dd623d] will not be managed by Spring
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@463fd068]
2025-06-10 20:37:47 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 台风是怎么形成的？
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65bae0b7] was not registered for synchronization because synchronization is not active
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1564397816 wrapping com.mysql.cj.jdbc.ConnectionImpl@79dd623d] will not be managed by Spring
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 22
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65bae0b7]
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad08863] was not registered for synchronization because synchronization is not active
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@19535645 wrapping com.mysql.cj.jdbc.ConnectionImpl@79dd623d] will not be managed by Spring
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 台风是怎么形成的？(String), null, 23(Long), 2025-06-10T20:37:47.097225600(LocalDateTime)
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad08863]
2025-06-10 20:37:47 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 台风是怎么形成的？
2025-06-10 20:38:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 20:38:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 台风（
2025-06-10 20:38:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在
2025-06-10 20:38:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 西北
2025-06-10 20:38:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 太平洋称为
2025-06-10 20:38:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 台风，
2025-06-10 20:38:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在
2025-06-10 20:38:19 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 北大西洋
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 和东北
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 太平洋称为
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 飓
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 风，
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 在印度
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 洋和
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 南太平洋
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 称为气
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 旋）
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 是一种强大的
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 热带气
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 旋。
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 它的形成
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 是一个复杂
2025-06-10 20:38:20 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的过程，
2025-06-10 20:38:21 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 需要多个
2025-06-10 20:38:21 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 特定条件
2025-06-10 20:38:21 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 同时满足
2025-06-10 20:38:21 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ：


2025-06-10 20:38:21 [boundedElastic-1] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
台风（在西北太平洋称为台风，在北大西洋和东北太平洋称为飓风，在印度洋和南太平洋称为气旋）是一种强大的热带气旋。它的形成是一个复杂的过程，需要多个特定条件同时满足：


2025-06-10 20:38:21 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:38:21 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@730182f0] was not registered for synchronization because synchronization is not active
2025-06-10 20:38:21 [boundedElastic-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@185860586 wrapping com.mysql.cj.jdbc.ConnectionImpl@79dd623d] will not be managed by Spring
2025-06-10 20:38:21 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 20:38:21 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
台风（在西北太平洋称为台风，在北大西洋和东北太平洋称为飓风，在印度洋和南太平洋称为气旋）是一种强大的热带气旋。它的形成是一个复杂的过程，需要多个特定条件同时满足：

(String), 23(Long)
2025-06-10 20:38:21 [boundedElastic-1] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 20:38:21 [boundedElastic-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@730182f0]
2025-06-10 20:38:21 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 20:40:45 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 20:40:45 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 20:40:45 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 20:40:45 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 20:53:46 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 65636 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 20:53:46 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 20:53:46 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 20:53:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-10 20:53:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-10 20:53:46 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 20:53:46 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 20:53:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 20:53:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 JDBC repository interfaces.
2025-06-10 20:53:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 20:53:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 20:53:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 20:53:47 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 20:53:47 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 20:53:47 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 20:53:47 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 20:53:47 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 20:53:47 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 20:53:47 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1594 ms
2025-06-10 20:53:47 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [8914A392C29C1737FDA28936DA3E41E3]
2025-06-10 20:53:48 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 20:53:48 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 20:53:48 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 20:53:48 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 20:53:48 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 20:53:48 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 20:53:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-10 20:53:48 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2df7f0c
2025-06-10 20:53:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-10 20:53:48 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 20:53:48 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 20:53:49 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 20:53:49 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 3.433 seconds (process running for 3.89)
2025-06-10 20:54:08 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 20:54:08 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 20:54:08 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-06-10 20:54:09 [http-nio-8080-exec-2] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 20:54:15 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:54:15 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ef4b2e0] was not registered for synchronization because synchronization is not active
2025-06-10 20:54:15 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@976121207 wrapping com.mysql.cj.jdbc.ConnectionImpl@2df7f0c] will not be managed by Spring
2025-06-10 20:54:15 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:54:15 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 20:54:15 [http-nio-8080-exec-1] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 20:54:15 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ef4b2e0]
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75d2b911] was not registered for synchronization because synchronization is not active
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1125714426 wrapping com.mysql.cj.jdbc.ConnectionImpl@2df7f0c] will not be managed by Spring
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75d2b911]
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@92b8df5] was not registered for synchronization because synchronization is not active
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1775347696 wrapping com.mysql.cj.jdbc.ConnectionImpl@2df7f0c] will not be managed by Spring
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG c.e.q.m.C.findByUserId - <==      Total: 23
2025-06-10 20:54:16 [http-nio-8080-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@92b8df5]
2025-06-10 20:54:16 [http-nio-8080-exec-3] INFO  c.e.qasystem.service.ChatService - Retrieved 23 chat history entries for userId: 6
2025-06-10 20:54:30 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 晚上号
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28044314] was not registered for synchronization because synchronization is not active
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1126652692 wrapping com.mysql.cj.jdbc.ConnectionImpl@2df7f0c] will not be managed by Spring
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28044314]
2025-06-10 20:54:30 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 晚上号
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b392383] was not registered for synchronization because synchronization is not active
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1630523667 wrapping com.mysql.cj.jdbc.ConnectionImpl@2df7f0c] will not be managed by Spring
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 23
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b392383]
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f4a60e2] was not registered for synchronization because synchronization is not active
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1950546466 wrapping com.mysql.cj.jdbc.ConnectionImpl@2df7f0c] will not be managed by Spring
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 晚上号(String), null, 24(Long), 2025-06-10T20:54:30.018803700(LocalDateTime)
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f4a60e2]
2025-06-10 20:54:30 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history asynchronously: 晚上号
2025-06-10 20:54:50 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 
晚上
2025-06-10 20:54:50 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 好呀
2025-06-10 20:54:50 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ！🌙✨
2025-06-10 20:54:50 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  今天
2025-06-10 20:54:50 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 过得怎么样
2025-06-10 20:54:50 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ？
2025-06-10 20:54:50 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 如果有
2025-06-10 20:54:50 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 任何想
2025-06-10 20:54:50 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 聊的
2025-06-10 20:54:50 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 、想问
2025-06-10 20:54:51 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 的，
2025-06-10 20:54:51 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 或者需要
2025-06-10 20:54:51 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 帮忙的地方
2025-06-10 20:54:51 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ，我
2025-06-10 20:54:51 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 随时在这儿
2025-06-10 20:54:51 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 哦
2025-06-10 20:54:51 [boundedElastic-1] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: ～ 😊
2025-06-10 20:55:01 [reactor-http-nio-3] WARN  r.n.http.client.HttpClientConnect - [05ccfb4f-1, L:/10.2.66.8:58338 - R:api.siliconflow.cn/106.14.246.150:443] The connection observed an error
io.netty.handler.timeout.ReadTimeoutException: null
2025-06-10 20:55:01 [boundedElastic-1] WARN  o.s.ai.retry.RetryUtils - Retry error. Retry count:1
org.springframework.web.client.ResourceAccessException: I/O error on POST request for "https://api.siliconflow.cn/v1/chat/completions": null
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.createResourceAccessException(DefaultRestClient.java:697)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:582)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:533)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:680)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:774)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:763)
	at org.springframework.ai.openai.api.OpenAiApi.chatCompletionEntity(OpenAiApi.java:257)
	at org.springframework.ai.openai.OpenAiChatModel.lambda$internalCall$1(OpenAiChatModel.java:274)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiChatModel.lambda$internalCall$3(OpenAiChatModel.java:274)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:271)
	at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:255)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultChatClientRequestSpec$1.aroundCall(DefaultChatClient.java:680)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextAroundCall$1(DefaultAroundAdvisorChain.java:98)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextAroundCall(DefaultAroundAdvisorChain.java:98)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetChatResponse(DefaultChatClient.java:493)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatResponse$1(DefaultChatClient.java:482)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatResponse(DefaultChatClient.java:482)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetChatResponse(DefaultChatClient.java:466)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:516)
	at com.example.qasystem.service.ChatService.lambda$getStreamingResponse$2(ChatService.java:95)
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:931)
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940)
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940)
	at reactor.core.publisher.FluxFilter$FilterConditionalSubscriber.onComplete(FluxFilter.java:300)
	at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
	at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onComplete(FluxDoFinally.java:128)
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940)
	at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
	at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onComplete(FluxDoFinally.java:128)
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940)
	at reactor.core.publisher.FluxPublishOn$PublishOnConditionalSubscriber.doComplete(FluxPublishOn.java:1106)
	at reactor.core.publisher.FluxPublishOn$PublishOnConditionalSubscriber.checkTerminated(FluxPublishOn.java:1140)
	at reactor.core.publisher.FluxPublishOn$PublishOnConditionalSubscriber.runAsync(FluxPublishOn.java:996)
	at reactor.core.publisher.FluxPublishOn$PublishOnConditionalSubscriber.run(FluxPublishOn.java:1079)
	at reactor.core.scheduler.WorkerTask.call(WorkerTask.java:84)
	at reactor.core.scheduler.WorkerTask.call(WorkerTask.java:37)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.io.IOException: null
	at org.springframework.http.client.ReactorClientHttpRequest.convertException(ReactorClientHttpRequest.java:173)
	at org.springframework.http.client.ReactorClientHttpRequest.executeInternal(ReactorClientHttpRequest.java:138)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:576)
	... 47 common frames omitted
Caused by: io.netty.handler.timeout.ReadTimeoutException: null
2025-06-10 20:55:01 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] threw exception
io.netty.handler.timeout.ReadTimeoutException: null
2025-06-10 20:55:01 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "https://api.siliconflow.cn/v1/chat/completions": null] with root cause
io.netty.handler.timeout.ReadTimeoutException: null
2025-06-10 20:55:01 [http-nio-8080-exec-5] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Ignoring exception, response committed already: org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.LinkedHashMap] with preset Content-Type 'text/event-stream'
2025-06-10 20:55:01 [http-nio-8080-exec-5] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.LinkedHashMap] with preset Content-Type 'text/event-stream']
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bac5a91] was not registered for synchronization because synchronization is not active
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@896246676 wrapping com.mysql.cj.jdbc.ConnectionImpl@2df7f0c] will not be managed by Spring
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bac5a91]
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7456a9af] was not registered for synchronization because synchronization is not active
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@762781030 wrapping com.mysql.cj.jdbc.ConnectionImpl@2df7f0c] will not be managed by Spring
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG c.e.q.m.C.findByUserId - <==      Total: 24
2025-06-10 21:20:00 [http-nio-8080-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7456a9af]
2025-06-10 21:20:00 [http-nio-8080-exec-8] INFO  c.e.qasystem.service.ChatService - Retrieved 24 chat history entries for userId: 6
2025-06-10 21:20:01 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 1 deletion, 1 modification)
2025-06-10 21:20:01 [Thread-6] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 21:20:01 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-06-10 21:20:01 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 21:20:01 [Thread-6] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-06-10 21:20:01 [Thread-6] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-10 21:20:01 [Thread-6] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-10 21:20:01 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 65636 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 21:20:01 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 21:20:01 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 21:20:01 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 21:20:01 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 21:20:01 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 21:20:01 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JDBC repository interfaces.
2025-06-10 21:20:01 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 21:20:01 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 21:20:01 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 21:20:01 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 21:20:01 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 21:20:01 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 21:20:01 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 21:20:01 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 21:20:01 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 21:20:01 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 253 ms
2025-06-10 21:20:01 [restartedMain] WARN  o.a.c.c.C.[Tomcat].[localhost].[/] - Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [824A9E5CDB712F3599926D68A7E4E8AA]
2025-06-10 21:20:01 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 21:20:01 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 21:20:01 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 21:20:01 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 21:20:01 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 21:20:01 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 21:20:01 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-06-10 21:20:01 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6e4efef2
2025-06-10 21:20:01 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-06-10 21:20:01 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 21:20:01 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 21:20:01 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 21:20:01 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 0.491 seconds (process running for 1576.794)
2025-06-10 21:20:01 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-10 21:20:03 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-06-10 21:20:03 [Thread-25] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 21:20:03 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-06-10 21:20:03 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 21:20:03 [Thread-25] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-06-10 21:20:03 [Thread-25] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-06-10 21:20:03 [Thread-25] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-06-10 21:20:03 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Starting QaSystemApplication using Java 17.0.12 with PID 65636 (E:\ai-chat\qa-system\target\classes started by 赤 in E:\ai-chat\qa-system)
2025-06-10 21:20:03 [restartedMain] DEBUG c.e.qasystem.QaSystemApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-10 21:20:03 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-10 21:20:03 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-06-10 21:20:03 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.example.qasystem'
2025-06-10 21:20:03 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-06-10 21:20:03 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JDBC repository interfaces.
2025-06-10 21:20:03 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\ChatHistoryMapper.class]
2025-06-10 21:20:03 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\ai-chat\qa-system\target\classes\com\example\qasystem\mapper\UserMapper.class]
2025-06-10 21:20:03 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'com.example.qasystem.mapper.ChatHistoryMapper' mapperInterface
2025-06-10 21:20:03 [restartedMain] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.example.qasystem.mapper.UserMapper' mapperInterface
2025-06-10 21:20:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-10 21:20:03 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-10 21:20:03 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-10 21:20:03 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-10 21:20:03 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-10 21:20:03 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 144 ms
2025-06-10 21:20:03 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\ChatHistoryMapper.xml]'
2025-06-10 21:20:03 [restartedMain] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\ai-chat\qa-system\target\classes\mapper\UserMapper.xml]'
2025-06-10 21:20:03 [restartedMain] WARN  o.s.ai.openai.OpenAiChatModel - This constructor is deprecated and will be removed in the next milestone. Please use the OpenAiChatModel.Builder or the new constructor accepting ToolCallingManager instead.
2025-06-10 21:20:03 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-10 21:20:03 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-10 21:20:03 [restartedMain] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-06-10 21:20:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-06-10 21:20:03 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4b6d7948
2025-06-10 21:20:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-06-10 21:20:03 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-10 21:20:03 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-10 21:20:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-10 21:20:03 [restartedMain] INFO  c.e.qasystem.QaSystemApplication - Started QaSystemApplication in 0.303 seconds (process running for 1578.71)
2025-06-10 21:20:03 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-10 21:20:42 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-10 21:20:42 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-10 21:20:42 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-10 21:20:42 [http-nio-8080-exec-3] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 21:20:42 [http-nio-8080-exec-7] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 21:21:04 [http-nio-8080-exec-1] DEBUG c.e.q.controller.UserController - 显示登录页面
2025-06-10 21:21:17 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:17 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b3ee042] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:17 [http-nio-8080-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1442383189 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:21:17 [http-nio-8080-exec-9] DEBUG c.e.q.mapper.UserMapper.findByUser - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 21:21:17 [http-nio-8080-exec-9] DEBUG c.e.q.mapper.UserMapper.findByUser - ==> Parameters: ls1(String)
2025-06-10 21:21:17 [http-nio-8080-exec-9] DEBUG c.e.q.mapper.UserMapper.findByUser - <==      Total: 1
2025-06-10 21:21:17 [http-nio-8080-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b3ee042]
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d93b58f] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@143729241 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d93b58f]
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39534cea] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1765587330 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 24
2025-06-10 21:21:17 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39534cea]
2025-06-10 21:21:17 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 24 chat history entries for userId: 6
2025-06-10 21:21:31 [http-nio-8080-exec-6] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 世界第二座高峰是哪一座
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@533ca5f8] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1576751599 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@533ca5f8]
2025-06-10 21:21:31 [http-nio-8080-exec-6] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 世界第二座高峰是哪一座
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc65bd4] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@711147217 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.findByUserId - <==      Total: 24
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc65bd4]
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce9a49b] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1330612321 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 世界第二座高峰是哪一座(String), null, 25(Long), 2025-06-10T21:21:31.131189800(LocalDateTime)
2025-06-10 21:21:31 [http-nio-8080-exec-2] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 世界第二座高峰是哪一座
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d9e044] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1671386302 wrapping com.mysql.cj.jdbc.ConnectionImpl@3f9c6c4] will not be managed by Spring
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce9a49b]
2025-06-10 21:21:31 [http-nio-8080-exec-6] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 世界第二座高峰是哪一座
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d9e044]
2025-06-10 21:21:31 [http-nio-8080-exec-2] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 世界第二座高峰是哪一座
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f558aad] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1221587331 wrapping com.mysql.cj.jdbc.ConnectionImpl@3f9c6c4] will not be managed by Spring
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.findByUserId - <==      Total: 25
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f558aad]
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61c965aa] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1915811565 wrapping com.mysql.cj.jdbc.ConnectionImpl@3f9c6c4] will not be managed by Spring
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 世界第二座高峰是哪一座(String), null, 26(Long), 2025-06-10T21:21:31.144199900(LocalDateTime)
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61c965aa]
2025-06-10 21:21:31 [http-nio-8080-exec-2] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 世界第二座高峰是哪一座
2025-06-10 21:21:54 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 21:21:55 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 世界第二
2025-06-10 21:21:55 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 高峰是
2025-06-10 21:21:55 [boundedElastic-2] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
世界第二高峰是
2025-06-10 21:21:55 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:55 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71584ee2] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:55 [boundedElastic-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@500886601 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:21:55 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 21:21:55 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
世界第二高峰是(String), 25(Long)
2025-06-10 21:21:55 [boundedElastic-2] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 21:21:55 [boundedElastic-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71584ee2]
2025-06-10 21:21:55 [boundedElastic-2] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 21:21:58 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 21:21:58 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 世界第二
2025-06-10 21:21:58 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 高峰是
2025-06-10 21:21:58 [boundedElastic-3] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
世界第二高峰是
2025-06-10 21:21:58 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:21:58 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f498b16] was not registered for synchronization because synchronization is not active
2025-06-10 21:21:58 [boundedElastic-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1419496597 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:21:58 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 21:21:58 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
世界第二高峰是(String), 26(Long)
2025-06-10 21:21:58 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 21:21:58 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f498b16]
2025-06-10 21:21:58 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 21:22:13 [http-nio-8080-exec-7] INFO  c.e.q.controller.ChatController - 收到用户请求: ls1, 提示词: 世界第二座高峰是哪一座
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@deadc17] was not registered for synchronization because synchronization is not active
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@164977010 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@deadc17]
2025-06-10 21:22:13 [http-nio-8080-exec-7] INFO  c.e.qasystem.service.ChatService - Processing chat request for userId: 6, prompt: 世界第二座高峰是哪一座
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26804096] was not registered for synchronization because synchronization is not active
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2110863925 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.findByUserId - <==      Total: 26
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26804096]
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251079bb] was not registered for synchronization because synchronization is not active
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1203868347 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history (user_id, user_message, ai_response, version, created_at) VALUES (?, ?, ?,?, ?)
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - ==> Parameters: 6(Long), 世界第二座高峰是哪一座(String), null, 27(Long), 2025-06-10T21:22:13.824734500(LocalDateTime)
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.q.m.C.insertChatHistory - <==    Updates: 1
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251079bb]
2025-06-10 21:22:13 [http-nio-8080-exec-7] DEBUG c.e.qasystem.service.ChatService - Saved user message to chat history: 世界第二座高峰是哪一座
2025-06-10 21:22:30 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 

2025-06-10 21:22:30 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 世界第二
2025-06-10 21:22:30 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk: 高峰是
2025-06-10 21:22:30 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Received streaming response chunk:  
2025-06-10 21:22:30 [boundedElastic-3] INFO  c.e.qasystem.service.ChatService - Streaming response completed for userId: 6, response: 
世界第二高峰是 
2025-06-10 21:22:30 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:22:30 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f667459] was not registered for synchronization because synchronization is not active
2025-06-10 21:22:30 [boundedElastic-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@353627204 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:22:30 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==>  Preparing: Update chat_history SET ai_response = ? where version = ?
2025-06-10 21:22:30 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - ==> Parameters: 
世界第二高峰是 (String), 27(Long)
2025-06-10 21:22:30 [boundedElastic-3] DEBUG c.e.q.m.C.updateChatHistory - <==    Updates: 1
2025-06-10 21:22:30 [boundedElastic-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f667459]
2025-06-10 21:22:30 [boundedElastic-3] DEBUG c.e.qasystem.service.ChatService - Updated AI response to chat history
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@668276cb] was not registered for synchronization because synchronization is not active
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1656618691 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@668276cb]
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63939db9] was not registered for synchronization because synchronization is not active
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@382901038 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG c.e.q.m.C.findByUserId - <==      Total: 27
2025-06-10 21:22:37 [http-nio-8080-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63939db9]
2025-06-10 21:22:37 [http-nio-8080-exec-1] INFO  c.e.qasystem.service.ChatService - Retrieved 27 chat history entries for userId: 6
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG c.e.q.controller.ChatController - 向用户展示聊天界面: ls1
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.UserService - 通过用户名寻找用户: ls1
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@300abf81] was not registered for synchronization because synchronization is not active
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1394014625 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==>  Preparing: SELECT * FROM users WHERE username = ?
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - ==> Parameters: ls1(String)
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.UserMapper.findByUsername - <==      Total: 1
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@300abf81]
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG c.e.qasystem.service.ChatService - Retrieving chat history for userId: 6
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767c5300] was not registered for synchronization because synchronization is not active
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@334437625 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b6d7948] will not be managed by Spring
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==>  Preparing: SELECT * FROM chat_history WHERE user_id = ? ORDER BY created_at DESC
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - ==> Parameters: 6(Long)
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG c.e.q.m.C.findByUserId - <==      Total: 27
2025-06-10 21:22:38 [http-nio-8080-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767c5300]
2025-06-10 21:22:38 [http-nio-8080-exec-5] INFO  c.e.qasystem.service.ChatService - Retrieved 27 chat history entries for userId: 6
2025-06-10 21:23:00 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-10 21:23:01 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-10 21:23:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-06-10 21:23:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
